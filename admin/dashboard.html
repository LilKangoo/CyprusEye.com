<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- Security: Content Security Policy - Admin Panel -->
  <!-- Note: Relaxed CSP for admin panel - protected by authentication -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://esm.sh https://*.esm.sh; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https: blob:; connect-src 'self' https://daoohnbnnowmmcizgvrq.supabase.co https://*.supabase.co https://esm.sh; object-src 'none'; base-uri 'self'; form-action 'self';">
  <!-- Admin panel is already protected by multi-layer authentication -->
  
  <meta name="theme-color" content="#dc2626" />
  <meta name="robots" content="noindex,nofollow" />
  <title>CyprusEye Admin Panel</title>
  <meta name="description" content="Admin panel for CyprusEye Quest management" />
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Jost:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <!-- Favicon -->
  <link rel="icon" href="/assets/cyprus_logo-1000x1054.png" type="image/png" />
  
  <!-- Styles -->
  <link rel="stylesheet" href="/assets/css/tokens.css?v=20251107" />
  <link rel="stylesheet" href="/assets/css/base.css?v=20251107" />
  <link rel="stylesheet" href="/admin/admin.css?v=20251107" />
  
  <!-- Auth meta -->
  <meta name="ce-auth" content="required" />
  <meta name="ce-admin" content="required" />
  
  <!-- Scripts -->
  <script type="module" src="/js/supabaseClient.js?v=20251107"></script>
  <script type="module" src="/js/toast.js?v=20251107"></script>
  <script src="/admin/universal-i18n-component.js?v=20250111"></script>
  <script src="/admin/poi-i18n-form.js?v=20250111"></script>
  <script src="/admin/recommendation-i18n-form.js?v=20251118"></script>
  <script type="module" src="/admin/admin.js?v=20260115_1"></script>
</head>
<body data-admin-panel="true">
  
  <!-- Admin Header -->
  <header class="admin-header">
    <div class="admin-header-content">
      <div class="admin-header-left">
        <button
          type="button"
          class="admin-menu-toggle"
          id="adminMenuToggle"
          aria-label="Toggle navigation menu"
          aria-controls="adminSidebar"
          aria-expanded="false"
        >
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="6" x2="21" y2="6" />
            <line x1="3" y1="12" x2="21" y2="12" />
            <line x1="3" y1="18" x2="21" y2="18" />
          </svg>
        </button>
        
        <h1 class="admin-title">
          <svg class="admin-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
          </svg>
          CyprusEye Admin
        </h1>
        <div class="admin-breadcrumb" id="breadcrumb">
          <span>Dashboard</span>
        </div>
      </div>
      <div class="admin-header-right">
        <div class="admin-user-info" id="adminUserInfo">
          <span class="admin-user-name" id="adminUserName">Loading...</span>
          <span class="admin-user-role">Super Admin</span>
        </div>
        <button class="btn-admin-logout" id="btnAdminLogout" title="Logout">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
            <polyline points="16 17 21 12 16 7"/>
            <line x1="21" y1="12" x2="9" y2="12"/>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <div class="admin-sidebar-overlay" id="adminSidebarOverlay" hidden></div>

  <!-- Access Denied Screen -->
  <div class="admin-access-denied" id="adminAccessDenied" hidden>
    <div class="access-denied-content">
      <svg class="access-denied-icon" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"/>
        <line x1="15" y1="9" x2="9" y2="15"/>
        <line x1="9" y1="9" x2="15" y2="15"/>
      </svg>
      <h2>Access Denied</h2>
      <p>You don't have permission to access this panel.</p>
      <p style="margin-top: 16px; color: var(--admin-text-muted); font-size: 14px;">
        Only <strong>lilkangoomedia@gmail.com</strong> has admin access.
      </p>
      <div style="display: flex; gap: 12px; margin-top: 24px; justify-content: center;">
        <button class="btn-secondary" onclick="window.location.reload()">Try Again</button>
        <a href="/" class="btn-primary">Go to Home</a>
      </div>
    </div>
  </div>

  <!-- Main Admin Panel -->
  <div class="admin-container" id="adminContainer">
    
    <!-- Sidebar Navigation -->
    <aside class="admin-sidebar" id="adminSidebar">
      <nav class="admin-nav">
        <button class="admin-nav-item active" data-view="dashboard">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7"/>
            <rect x="14" y="3" width="7" height="7"/>
            <rect x="14" y="14" width="7" height="7"/>
            <rect x="3" y="14" width="7" height="7"/>
          </svg>
          <span>Dashboard</span>
        </button>
        
        <button class="admin-nav-item" data-view="users">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
          </svg>
          <span>Users</span>
        </button>
        
        <button class="admin-nav-item" data-view="referrals">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
          </svg>
          <span>Referrals</span>
        </button>
        
        <button class="admin-nav-item" data-view="pois">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
            <circle cx="12" cy="10" r="3"/>
          </svg>
          <span>POIs</span>
        </button>
        
        <button class="admin-nav-item" data-view="quests">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 19l-3.5 2 1-4-3-3 4-.5L12 9l1.5 4.5 4 .5-3 3 1 4z"/>
          </svg>
          <span>Quests</span>
        </button>
        
        <button class="admin-nav-item" data-view="cars">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M5 17h14v2H5v-2zM3 11l2.5-5h13L21 11M3 11v6h18v-6M3 11h18"/>
            <circle cx="7.5" cy="15.5" r="1.5"/>
            <circle cx="16.5" cy="15.5" r="1.5"/>
          </svg>
          <span>Cars</span>
        </button>
        
        <button class="admin-nav-item" data-view="trips">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 11l9-9 9 9v9a2 2 0 0 1-2 2h-5v-7H10v7H5a2 2 0 0 1-2-2v-9z"/>
          </svg>
          <span>Trips</span>
        </button>
        
        <button class="admin-nav-item" data-view="hotels">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 21V8a2 2 0 0 1 2-2h3V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2h3a2 2 0 0 1 2 2v13"/>
            <path d="M6 21v-6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v6"/>
          </svg>
          <span>Hotels</span>
        </button>
        
        <button class="admin-nav-item" data-view="recommendations">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
          </svg>
          <span>Recommendations</span>
        </button>
        
        <button class="admin-nav-item" data-view="content">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
            <polyline points="10 9 9 9 8 9"/>
          </svg>
          <span>Content</span>
        </button>

        <button class="admin-nav-item" data-view="moderation">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M12 8v4l3 3"/>
          </svg>
          <span>Moderation</span>
        </button>
        
        <button class="admin-nav-item" data-view="analytics">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 3v18h18"/>
            <rect x="7" y="12" width="3" height="6"/>
            <rect x="12" y="9" width="3" height="9"/>
            <rect x="17" y="6" width="3" height="12"/>
          </svg>
          <span>Analytics</span>
        </button>
        
        <button class="admin-nav-item" data-view="diagnostics">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
          </svg>
          <span>Diagnostics</span>
        </button>
        
        <button class="admin-nav-item" data-view="xp-control">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
          </svg>
          <span>XP Control</span>
        </button>
        
        <button class="admin-nav-item" data-view="shop">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="9" cy="21" r="1"/>
            <circle cx="20" cy="21" r="1"/>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
          </svg>
          <span>Shop</span>
        </button>

        <button class="admin-nav-item" data-view="partners">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
            <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
          </svg>
          <span>Partners</span>
        </button>

        <button class="admin-nav-item" data-view="calendars">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
            <line x1="16" y1="2" x2="16" y2="6"/>
            <line x1="8" y1="2" x2="8" y2="6"/>
            <line x1="3" y1="10" x2="21" y2="10"/>
          </svg>
          <span>Calendars</span>
        </button>
        
        <button class="admin-nav-item" data-view="settings">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M12 1v6m0 6v6m0-18a11 11 0 0 1 0 22 11 11 0 0 1 0-22z"/>
            <path d="M19.07 4.93l-4.24 4.24m0 5.66l4.24 4.24M4.93 4.93l4.24 4.24m5.66 0l4.24-4.24"/>
          </svg>
          <span>Settings</span>
        </button>
      </nav>
    </aside>

    <!-- Main Content Area -->
    <main class="admin-main">
      
      <!-- Dashboard View -->
      <section class="admin-view active" id="viewDashboard">
        <header class="admin-view-header">
          <h2>Dashboard</h2>
          <p class="admin-view-subtitle">System overview and statistics</p>
        </header>

        <!-- Stats Cards -->
        <div class="admin-stats-grid">
          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-blue">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Total Users</p>
              <p class="stat-card-value" id="statTotalUsers">-</p>
              <p class="stat-card-change">Loading...</p>
            </div>
          </div>

          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-green">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                <circle cx="12" cy="10" r="3"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Total POIs</p>
              <p class="stat-card-value" id="statTotalPois">-</p>
              <p class="stat-card-change">Loading...</p>
            </div>
          </div>

          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-purple">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Total Comments</p>
              <p class="stat-card-value" id="statTotalComments">-</p>
              <p class="stat-card-change">Loading...</p>
            </div>
          </div>

          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-orange">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Active Users (7d)</p>
              <p class="stat-card-value" id="statActiveUsers7d">-</p>
              <p class="stat-card-change">Loading...</p>
            </div>
          </div>
        </div>

        <!-- Recent Activity -->
        <div class="admin-section">
          <h3>Recent Activity</h3>
          <div class="admin-table-container">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Type</th>
                  <th>User</th>
                  <th>Details</th>
                  <th>Time</th>
                </tr>
              </thead>
              <tbody id="recentActivityTable">
                <tr>
                  <td colspan="4" class="table-loading">Loading...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="admin-section" style="margin-top: 32px;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
            <div>
              <h3>Force Refresh</h3>
              <p class="admin-view-subtitle" style="margin: 6px 0 0;">Trigger a silent reload for users (on next check)</p>
            </div>
            <button class="btn-secondary" id="btnForceRefreshSite" type="button">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 4px;">
                <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
              </svg>
              Force Refresh Now
            </button>
          </div>
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 16px;">
            <div style="background: var(--admin-card-bg); border: 1px solid var(--admin-border); border-radius: 12px; padding: 16px;">
              <div style="font-size: 13px; color: var(--admin-text-muted); margin-bottom: 8px;">Current version</div>
              <div style="font-size: 22px; font-weight: 700;" id="forceRefreshVersion">-</div>
            </div>
            <div style="background: var(--admin-card-bg); border: 1px solid var(--admin-border); border-radius: 12px; padding: 16px;">
              <div style="font-size: 13px; color: var(--admin-text-muted); margin-bottom: 8px;">Last updated</div>
              <div style="font-size: 14px; font-weight: 600;" id="forceRefreshUpdatedAt">-</div>
            </div>
          </div>
        </div>

        <!-- All Orders Management Panel -->
        <div class="admin-section" style="margin-top: 32px;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
            <h3>All Orders</h3>
            <div style="display: flex; gap: 8px;">
              <button class="btn-secondary" id="btnRefreshAllOrders" type="button">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 4px;">
                  <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
                </svg>
                Refresh
              </button>
              <select id="orderCategoryFilter" style="padding: 8px 12px; border-radius: 8px; border: 1px solid var(--admin-border); background: var(--admin-card-bg); color: var(--admin-text); font-size: 14px;">
                <option value="all">All Categories</option>
                <option value="cars">Cars Only</option>
                <option value="trips">Trips Only</option>
                <option value="hotels">Hotels Only</option>
                <option value="shop">Shop Only</option>
              </select>
              <select id="orderStatusFilter" style="padding: 8px 12px; border-radius: 8px; border: 1px solid var(--admin-border); background: var(--admin-card-bg); color: var(--admin-text); font-size: 14px;">
                <option value="all">All Statuses</option>
                <option value="pending">Pending</option>
                <option value="confirmed">Confirmed</option>
                <option value="processing">Processing</option>
                <option value="shipped">Shipped</option>
                <option value="delivered">Delivered</option>
                <option value="completed">Completed</option>
                <option value="cancelled">Cancelled</option>
                <option value="refunded">Refunded</option>
                <option value="failed">Failed</option>
              </select>
            </div>
          </div>

          <!-- Orders Stats Mini Cards -->
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">
            <div style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); padding: 20px; border-radius: 12px; color: white;">
              <div style="font-size: 13px; opacity: 0.9; margin-bottom: 8px;">Cars Pending</div>
              <div style="font-size: 28px; font-weight: 700;" id="statCarsPending">-</div>
            </div>
            <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); padding: 20px; border-radius: 12px; color: white;">
              <div style="font-size: 13px; opacity: 0.9; margin-bottom: 8px;">Trips Pending</div>
              <div style="font-size: 28px; font-weight: 700;" id="statTripsPending">-</div>
            </div>
            <div style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); padding: 20px; border-radius: 12px; color: white;">
              <div style="font-size: 13px; opacity: 0.9; margin-bottom: 8px;">Hotels Pending</div>
              <div style="font-size: 28px; font-weight: 700;" id="statHotelsPending">-</div>
            </div>
            <div style="background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); padding: 20px; border-radius: 12px; color: white;">
              <div style="font-size: 13px; opacity: 0.9; margin-bottom: 8px;">Shop Pending</div>
              <div style="font-size: 28px; font-weight: 700;" id="statShopPending">-</div>
            </div>
            <div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); padding: 20px; border-radius: 12px; color: white;">
              <div style="font-size: 13px; opacity: 0.9; margin-bottom: 8px;">Total Orders</div>
              <div style="font-size: 28px; font-weight: 700;" id="statTotalOrders">-</div>
            </div>
          </div>

          <!-- Orders Table -->
          <div class="admin-table-container">
            <table class="admin-table">
              <thead>
                <tr>
                  <th style="width: 100px;">Category</th>
                  <th style="width: 140px;">Order ID</th>
                  <th>Customer</th>
                  <th>Details</th>
                  <th style="width: 110px;">Status</th>
                  <th style="width: 100px;">Amount</th>
                  <th style="width: 120px;">Created</th>
                  <th style="width: 100px;">Actions</th>
                </tr>
              </thead>
              <tbody id="allOrdersTableBody">
                <tr>
                  <td colspan="8" class="table-loading">Loading all orders...</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div id="allOrdersFooter" style="margin-top: 16px; text-align: center; color: var(--admin-text-muted); font-size: 13px;">
            <!-- Pagination or info will be displayed here -->
          </div>
        </div>
      </section>

      <!-- Hotels View -->
      <section class="admin-view" id="viewHotels" hidden>
        <header class="admin-view-header">
          <div>
            <h2>Hotels</h2>
            <p class="admin-view-subtitle">Manage hotels and accommodation bookings</p>
          </div>
          <div class="admin-view-actions">
            <button class="btn-secondary" type="button" id="btnRefreshHotels">Refresh</button>
            <button class="btn-primary" type="button" id="btnAddHotel" onclick="openNewHotelModal()">New Hotel</button>
          </div>
        </header>

        <!-- Sub-navigation for Hotels -->
        <div style="margin-bottom: 24px; border-bottom: 2px solid var(--admin-border); display: flex; gap: 8px;">
          <button class="hotels-tab-button active" data-tab="hotels" style="padding: 12px 24px; background: none; border: none; border-bottom: 2px solid transparent; cursor: pointer; font-weight: 500; color: var(--admin-text-muted); transition: all 0.2s;">
            Hotels
          </button>
          <button class="hotels-tab-button" data-tab="bookings" style="padding: 12px 24px; background: none; border: none; border-bottom: 2px solid transparent; cursor: pointer; font-weight: 500; color: var(--admin-text-muted); transition: all 0.2s;">
            Bookings
          </button>
        </div>

        <!-- Hotels Tab Content -->
        <div id="hotelsTabHotels" class="hotels-tab-content">
          <div class="admin-stats-grid">
            <div class="admin-stat-card">
              <div class="stat-card-content">
                <p class="stat-card-label">Total Hotels</p>
                <p class="stat-card-value" id="hotelsStatTotal">0</p>
                <p class="stat-card-change" id="hotelsStatSubtitle">Loading...</p>
              </div>
            </div>
            <div class="admin-stat-card">
              <div class="stat-card-content">
                <p class="stat-card-label">Published</p>
                <p class="stat-card-value" id="hotelsStatPublished">0</p>
                <p class="stat-card-change">Visible to customers</p>
              </div>
            </div>
          </div>

          <div class="admin-table-container">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Hotel</th>
                  <th>Order</th>
                  <th>Slug</th>
                  <th>City</th>
                  <th>Price</th>
                  <th>Published</th>
                  <th>Updated</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="hotelsTableBody">
                <tr>
                  <td colspan="8" class="table-loading">Loading hotels...</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div id="hotelsTableFooter" class="poi-table-footer"></div>
        </div>

        <!-- Bookings Tab Content -->
        <div id="hotelsTabBookings" class="hotels-tab-content" hidden>
          <!-- Hotel Bookings Stats -->
          <div class="admin-stats-grid">
            <div class="admin-stat-card">
              <div class="stat-card-icon stat-card-icon-blue">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                  <path d="M2 17l10 5 10-5M2 12l10 5 10-5"/>
                </svg>
              </div>
              <div class="stat-card-content">
                <p class="stat-card-label">Total Bookings</p>
                <p class="stat-card-value" id="statHotelBookingsTotal">-</p>
                <p class="stat-card-change">Loading...</p>
              </div>
            </div>

            <div class="admin-stat-card">
              <div class="stat-card-icon stat-card-icon-orange">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <polyline points="12 6 12 12 16 14"/>
                </svg>
              </div>
              <div class="stat-card-content">
                <p class="stat-card-label">Pending</p>
                <p class="stat-card-value" id="statHotelBookingsPending">-</p>
                <p class="stat-card-change">Awaiting confirmation</p>
              </div>
            </div>

            <div class="admin-stat-card">
              <div class="stat-card-icon stat-card-icon-green">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="20 6 9 17 4 12"/>
                </svg>
              </div>
              <div class="stat-card-content">
                <p class="stat-card-label">Confirmed</p>
                <p class="stat-card-value" id="statHotelBookingsConfirmed">-</p>
                <p class="stat-card-change">Active bookings</p>
              </div>
            </div>

            <div class="admin-stat-card">
              <div class="stat-card-icon stat-card-icon-purple">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="12" y1="1" x2="12" y2="23"/>
                  <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                </svg>
              </div>
              <div class="stat-card-content">
                <p class="stat-card-label">Revenue (Total)</p>
                <p class="stat-card-value" id="statHotelBookingsRevenue">-</p>
                <p class="stat-card-change">Paid bookings</p>
              </div>
            </div>
          </div>

          <!-- Hotel Bookings Table -->
          <div class="admin-table-container">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Booking ID</th>
                  <th>Customer</th>
                  <th>Dates & Details</th>
                  <th>Status</th>
                  <th>Amount</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="hotelBookingsTableBody">
                <tr>
                  <td colspan="6" class="table-loading">Loading hotel bookings...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- Hotel Booking Details Modal -->
      <div class="admin-modal" id="hotelBookingDetailsModal" hidden>
        <div class="admin-modal-dialog" style="max-width: 700px;">
          <header class="admin-modal-header">
            <h3>Hotel Booking Details</h3>
            <button type="button" class="admin-modal-close" onclick="document.getElementById('hotelBookingDetailsModal').hidden=true">‚úï</button>
          </header>
          <div class="admin-modal-content" id="hotelBookingDetailsContent">
            <div class="table-loading">Loading...</div>
          </div>
        </div>
      </div>

      <!-- Edit Hotel Modal -->
      <div class="admin-modal" id="editHotelModal" hidden>
        <div class="admin-modal-dialog" style="max-width: 800px;">
          <header class="admin-modal-header">
            <h3>Edit Hotel</h3>
            <button type="button" class="admin-modal-close" onclick="document.getElementById('editHotelModal').hidden=true">‚úï</button>
          </header>
          <div class="admin-modal-content">
            <form id="editHotelForm" novalidate>
              <input type="hidden" id="editHotelId" />
              <div class="admin-form-grid">
                <label class="admin-form-field">
                  <span>Slug (read-only)</span>
                  <input type="text" id="editHotelSlug" readonly style="background:#2a2f3a;cursor:not-allowed;" />
                </label>
                <div class="admin-form-field">
                  <span>City</span>
                  <div style="display: flex; gap: 8px; align-items: center;">
                    <select name="city" id="editHotelCity" required style="flex: 1;"></select>
                    <button type="button" class="btn-add-city" onclick="openAddCityModal()" title="Add new city">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
                      </svg>
                    </button>
                  </div>
                </div>
                <!-- Hotel Title (i18n) -->
                <div class="admin-form-field" style="grid-column:1/-1;">
                  <label>Title (Multilingual)</label>
                  <div id="editHotelTitleI18n"></div>
                </div>
                <!-- Cover Image Manager -->
                <div class="admin-form-field" style="grid-column:1/-1;">
                  <span style="font-weight:600;margin-bottom:8px;display:block;">üñºÔ∏è Cover Image (Zdjƒôcie g≈Ç√≥wne)</span>
                  <div class="cover-image-manager">
                    <div class="cover-preview-wrap">
                      <img id="editHotelCoverPreviewImg" src="" alt="Cover preview">
                      <div class="cover-actions">
                        <label class="btn-secondary btn-sm" style="cursor:pointer;">
                          üì§ Upload
                          <input type="file" id="editHotelCoverFile" accept="image/*" hidden>
                        </label>
                        <button type="button" class="btn-secondary btn-sm btn-danger" onclick="removeCoverImage('edit')">üóëÔ∏è Remove</button>
                      </div>
                    </div>
                    <div class="cover-url-fallback">
                      <label>Or paste URL:</label>
                      <input type="text" id="editHotelCoverUrl" name="cover_image_url" placeholder="https://...">
                    </div>
                  </div>
                </div>
                <!-- Gallery Photos Manager -->
                <div class="admin-form-field" style="grid-column:1/-1;">
                  <div class="photos-header">
                    <span>üì∑ Gallery Photos (<span id="editHotelPhotosCount">0</span>/10)</span>
                    <label class="btn-secondary btn-sm" style="cursor:pointer;">
                      ‚ûï Add Photos
                      <input type="file" id="editHotelPhotosAdd" accept="image/*" multiple hidden>
                    </label>
                  </div>
                  <div class="photos-manager-grid" id="editHotelPhotosManager"></div>
                </div>
                <!-- Hotel Description (i18n) -->
                <div class="admin-form-field" style="grid-column:1/-1;">
                  <label>Description (Multilingual)</label>
                  <div id="editHotelDescriptionI18n"></div>
                </div>
                <label class="admin-form-field">
                  <span>Pricing Model</span>
                  <select name="pricing_model" id="editHotelPricing">
                    <option value="per_person_per_night">Per person per night (standard)</option>
                    <option value="tiered_by_nights">Tiered by nights (rabaty za d≈Çu≈ºszy pobyt)</option>
                    <option value="flat_per_night">Flat per night (apartament/willa)</option>
                  </select>
                </label>
                <label class="admin-form-field">
                  <span>Max persons (limit)</span>
                  <input type="number" min="1" id="editHotelMaxPersons" placeholder="np. 6" />
                </label>
                <div class="admin-form-field" style="grid-column:1/-1;">
                  <span>Pricing Tiers (per night)</span>
                  <div>
                    <table class="admin-table">
                      <thead>
                        <tr>
                          <th>Persons</th>
                          <th>Price / night (‚Ç¨)</th>
                          <th>Min nights (optional)</th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody id="editHotelPricingTiersBody">
                        <tr><td colspan="4" class="table-loading">No tiers yet</td></tr>
                      </tbody>
                    </table>
                    <button type="button" class="btn-secondary" id="btnAddEditHotelTier" style="margin-top:8px;">Add tier</button>
                  </div>
                </div>
                <!-- Amenities Section -->
                <div class="admin-form-field" style="grid-column:1/-1;">
                  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                    <span style="font-weight: 600;">Amenities / Udogodnienia</span>
                    <button type="button" class="btn-secondary" onclick="openAddAmenityModal()" style="padding: 4px 12px; font-size: 12px;">+ Add New</button>
                  </div>
                  <div class="amenities-grid" id="editHotelAmenities">
                    <div class="table-loading">Loading amenities...</div>
                  </div>
                </div>
                <label class="admin-form-field" style="grid-column:1/-1;">
                  <span style="display:flex;align-items:center;gap:8px;">
                    <input type="checkbox" name="is_published" id="editHotelPublished" style="width:auto;" />
                    Published (visible to customers)
                  </span>
                </label>
              </div>
              <div class="admin-modal-actions">
                <button type="button" class="btn-secondary" onclick="document.getElementById('editHotelModal').hidden=true">Cancel</button>
                <button type="submit" class="btn-primary">Save Changes</button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- New Hotel Modal -->
      <div class="admin-modal" id="newHotelModal" hidden>
        <div class="admin-modal-dialog">
          <header class="admin-modal-header">
            <h3>Create New Hotel</h3>
            <button type="button" class="admin-modal-close" onclick="document.getElementById('newHotelModal').hidden=true">‚úï</button>
          </header>
          <div class="admin-modal-content">
            <form id="newHotelForm" novalidate>
              <div class="admin-form-grid">
                <div class="admin-form-field">
                  <span>City</span>
                  <div style="display: flex; gap: 8px; align-items: center;">
                    <select name="city" id="newHotelCity" required style="flex: 1;"></select>
                    <button type="button" class="btn-add-city" onclick="openAddCityModal()" title="Add new city">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
                      </svg>
                    </button>
                  </div>
                </div>
                <!-- Hotel Title (i18n) -->
                <div class="admin-form-field" style="grid-column:1/-1;">
                  <label>Title (Multilingual)</label>
                  <div id="newHotelTitleI18n"></div>
                </div>
                <!-- Cover Image Manager -->
                <div class="admin-form-field" style="grid-column:1/-1;">
                  <span style="font-weight:600;margin-bottom:8px;display:block;">üñºÔ∏è Cover Image (Zdjƒôcie g≈Ç√≥wne)</span>
                  <div class="cover-image-manager">
                    <div class="cover-preview-wrap">
                      <img id="newHotelCoverPreviewImg" src="" alt="Cover preview">
                      <div class="cover-actions">
                        <label class="btn-secondary btn-sm" style="cursor:pointer;">
                          üì§ Upload
                          <input type="file" id="newHotelCoverFile" accept="image/*" hidden>
                        </label>
                        <button type="button" class="btn-secondary btn-sm btn-danger" onclick="removeCoverImage('new')">üóëÔ∏è Remove</button>
                      </div>
                    </div>
                    <div class="cover-url-fallback">
                      <label>Or paste URL:</label>
                      <input type="text" id="newHotelCoverUrl" name="cover_image_url" placeholder="https://...">
                    </div>
                  </div>
                </div>
                <!-- Gallery Photos Manager -->
                <div class="admin-form-field" style="grid-column:1/-1;">
                  <div class="photos-header">
                    <span>üì∑ Gallery Photos (<span id="newHotelPhotosCount">0</span>/10)</span>
                    <label class="btn-secondary btn-sm" style="cursor:pointer;">
                      ‚ûï Add Photos
                      <input type="file" id="newHotelPhotosAdd" accept="image/*" multiple hidden>
                    </label>
                  </div>
                  <div class="photos-manager-grid" id="newHotelPhotosManager"></div>
                </div>
                <!-- Hotel Description (i18n) -->
                <div class="admin-form-field" style="grid-column:1/-1;">
                  <label>Description (Multilingual)</label>
                  <div id="newHotelDescriptionI18n"></div>
                </div>
                <label class="admin-form-field">
                  <span>Pricing Model</span>
                  <select name="pricing_model" id="newHotelPricing">
                    <option value="per_person_per_night">Per person per night (standard)</option>
                    <option value="tiered_by_nights">Tiered by nights (rabaty za d≈Çu≈ºszy pobyt)</option>
                    <option value="flat_per_night">Flat per night (apartament/willa)</option>
                  </select>
                </label>
                <label class="admin-form-field">
                  <span>Max persons (limit)</span>
                  <input type="number" min="1" id="newHotelMaxPersons" placeholder="np. 6" />
                </label>
                <div class="admin-form-field" style="grid-column:1/-1;">
                  <span>Pricing Tiers (per night)</span>
                  <div>
                    <table class="admin-table">
                      <thead>
                        <tr>
                          <th>Persons</th>
                          <th>Price / night (‚Ç¨)</th>
                          <th>Min nights (optional)</th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody id="newHotelPricingTiersBody">
                        <tr><td colspan="4" class="table-loading">No tiers yet</td></tr>
                      </tbody>
                    </table>
                    <button type="button" class="btn-secondary" id="btnAddNewHotelTier" style="margin-top:8px;">Add tier</button>
                  </div>
                </div>
                <!-- Amenities Section -->
                <div class="admin-form-field" style="grid-column:1/-1;">
                  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                    <span style="font-weight: 600;">Amenities / Udogodnienia</span>
                    <button type="button" class="btn-secondary" onclick="openAddAmenityModal()" style="padding: 4px 12px; font-size: 12px;">+ Add New</button>
                  </div>
                  <div class="amenities-grid" id="newHotelAmenities">
                    <div class="table-loading">Loading amenities...</div>
                  </div>
                </div>
              </div>
              <div class="admin-modal-actions">
                <button type="submit" class="btn-primary">Create</button>
                <button type="button" class="btn-secondary" onclick="document.getElementById('newHotelModal').hidden=true">Cancel</button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Add Amenity Modal -->
      <div class="admin-modal" id="addAmenityModal" hidden>
        <div class="admin-modal-dialog" style="max-width: 450px;">
          <header class="admin-modal-header">
            <h3>Add New Amenity</h3>
            <button type="button" class="admin-modal-close" onclick="document.getElementById('addAmenityModal').hidden=true">‚úï</button>
          </header>
          <div class="admin-modal-content">
            <form id="addAmenityForm" novalidate>
              <div class="admin-form-grid" style="gap: 16px;">
                <label class="admin-form-field">
                  <span>Code (unique) *</span>
                  <input type="text" id="newAmenityCode" required placeholder="e.g. heated_pool" pattern="[a-z_]+" title="Only lowercase letters and underscores">
                </label>
                <label class="admin-form-field">
                  <span>Category *</span>
                  <select id="newAmenityCategory" required>
                    <option value="general">General</option>
                    <option value="wellness">Wellness & Spa</option>
                    <option value="food">Food & Drink</option>
                    <option value="room">Room Features</option>
                    <option value="outdoor">Outdoor</option>
                    <option value="services">Services</option>
                  </select>
                </label>
                <label class="admin-form-field">
                  <span>Icon (emoji) *</span>
                  <input type="text" id="newAmenityIcon" required placeholder="e.g. üèä" maxlength="4">
                </label>
                <label class="admin-form-field">
                  <span>Name (English) *</span>
                  <input type="text" id="newAmenityNameEn" required placeholder="e.g. Heated pool">
                </label>
                <label class="admin-form-field">
                  <span>Name (Polish) *</span>
                  <input type="text" id="newAmenityNamePl" required placeholder="e.g. Podgrzewany basen">
                </label>
                <label class="admin-form-field" style="grid-column: 1/-1;">
                  <span style="display:flex;align-items:center;gap:8px;">
                    <input type="checkbox" id="newAmenityPopular" style="width:auto;">
                    Mark as popular (shown first)
                  </span>
                </label>
              </div>
              <div class="admin-modal-actions" style="margin-top: 20px;">
                <button type="submit" class="btn-primary">Add Amenity</button>
                <button type="button" class="btn-secondary" onclick="document.getElementById('addAmenityModal').hidden=true">Cancel</button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Add City Modal -->
      <div class="admin-modal" id="addCityModal" hidden>
        <div class="admin-modal-dialog" style="max-width: 400px;">
          <header class="admin-modal-header">
            <h3>Add New City</h3>
            <button type="button" class="admin-modal-close" onclick="document.getElementById('addCityModal').hidden=true">‚úï</button>
          </header>
          <div class="admin-modal-content">
            <form id="addCityForm" novalidate>
              <div class="admin-form-grid" style="gap: 16px;">
                <label class="admin-form-field">
                  <span>City Name (English) *</span>
                  <input type="text" id="newCityName" required placeholder="e.g. Kyrenia">
                </label>
                <label class="admin-form-field">
                  <span>City Name (Polish)</span>
                  <input type="text" id="newCityNamePl" placeholder="e.g. Kyrenia">
                </label>
              </div>
              <div class="admin-modal-actions" style="margin-top: 20px;">
                <button type="submit" class="btn-primary">Add City</button>
                <button type="button" class="btn-secondary" onclick="document.getElementById('addCityModal').hidden=true">Cancel</button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Trips View -->
      <section class="admin-view" id="viewTrips" hidden>
        <header class="admin-view-header">
          <div>
            <h2>Trips</h2>
            <p class="admin-view-subtitle">Manage trips and customer bookings</p>
          </div>
          <div class="admin-view-actions">
            <button class="btn-secondary" type="button" id="btnRefreshTrips">Refresh</button>
            <button class="btn-primary" type="button" id="btnAddTrip" onclick="openNewTripModal()">New Trip</button>
          </div>
        </header>

        <!-- Sub-navigation for Trips -->
        <div style="margin-bottom: 24px; border-bottom: 2px solid var(--admin-border); display: flex; gap: 8px;">
          <button class="trips-tab-button active" data-tab="trips" style="padding: 12px 24px; background: none; border: none; border-bottom: 2px solid transparent; cursor: pointer; font-weight: 500; color: var(--admin-text-muted); transition: all 0.2s;">
            Trips
          </button>
          <button class="trips-tab-button" data-tab="bookings" style="padding: 12px 24px; background: none; border: none; border-bottom: 2px solid transparent; cursor: pointer; font-weight: 500; color: var(--admin-text-muted); transition: all 0.2s;">
            Bookings
          </button>
        </div>

        <!-- Trips Tab Content -->
        <div id="tripsTabTrips" class="trips-tab-content">
        <div class="admin-stats-grid">
          <div class="admin-stat-card">
            <div class="stat-card-content">
              <p class="stat-card-label">Total Trips</p>
              <p class="stat-card-value" id="tripsStatTotal">0</p>
              <p class="stat-card-change" id="tripsStatSubtitle">Loading...</p>
            </div>
          </div>
          <div class="admin-stat-card">
            <div class="stat-card-content">
              <p class="stat-card-label">Published</p>
              <p class="stat-card-value" id="tripsStatPublished">0</p>
              <p class="stat-card-change">Visible to customers</p>
            </div>
          </div>
        </div>

        <div class="admin-table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Trip</th>
                <th>Order</th>
                <th>Slug</th>
                <th>City</th>
                <th>Published</th>
                <th>Updated</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="tripsTableBody">
              <tr>
                <td colspan="7" class="table-loading">Loading trips...</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div id="tripsTableFooter" class="poi-table-footer"></div>
        </div>

        <!-- Bookings Tab Content -->
        <div id="tripsTabBookings" class="trips-tab-content" hidden>
          <!-- Trip Bookings Stats -->
          <div class="admin-stats-grid">
            <div class="admin-stat-card">
              <div class="stat-card-icon stat-card-icon-blue">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                  <path d="M2 17l10 5 10-5M2 12l10 5 10-5"/>
                </svg>
              </div>
              <div class="stat-card-content">
                <p class="stat-card-label">Total Bookings</p>
                <p class="stat-card-value" id="statTripBookingsTotal">-</p>
                <p class="stat-card-change">Loading...</p>
              </div>
            </div>

            <div class="admin-stat-card">
              <div class="stat-card-icon stat-card-icon-orange">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <polyline points="12 6 12 12 16 14"/>
                </svg>
              </div>
              <div class="stat-card-content">
                <p class="stat-card-label">Pending</p>
                <p class="stat-card-value" id="statTripBookingsPending">-</p>
                <p class="stat-card-change">Awaiting confirmation</p>
              </div>
            </div>

            <div class="admin-stat-card">
              <div class="stat-card-icon stat-card-icon-green">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="20 6 9 17 4 12"/>
                </svg>
              </div>
              <div class="stat-card-content">
                <p class="stat-card-label">Confirmed</p>
                <p class="stat-card-value" id="statTripBookingsConfirmed">-</p>
                <p class="stat-card-change">Active bookings</p>
              </div>
            </div>

            <div class="admin-stat-card">
              <div class="stat-card-icon stat-card-icon-purple">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="12" y1="1" x2="12" y2="23"/>
                  <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                </svg>
              </div>
              <div class="stat-card-content">
                <p class="stat-card-label">Revenue (Total)</p>
                <p class="stat-card-value" id="statTripBookingsRevenue">-</p>
                <p class="stat-card-change">Paid bookings</p>
              </div>
            </div>
          </div>

          <!-- Trip Bookings Table -->
          <div class="admin-table-container">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Booking ID</th>
                  <th>Customer</th>
                  <th>Dates & Details</th>
                  <th>Status</th>
                  <th>Amount</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="tripBookingsTableBody">
                <tr>
                  <td colspan="6" class="table-loading">Loading trip bookings...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- Trip Booking Details Modal -->
      <div class="admin-modal" id="tripBookingDetailsModal" hidden>
        <div class="admin-modal-dialog" style="max-width: 700px;">
          <header class="admin-modal-header">
            <h3>Trip Booking Details</h3>
            <button type="button" class="admin-modal-close" onclick="document.getElementById('tripBookingDetailsModal').hidden=true">‚úï</button>
          </header>
          <div class="admin-modal-content" id="tripBookingDetailsContent">
            <div class="table-loading">Loading...</div>
          </div>
        </div>
      </div>

      <!-- Edit Trip Modal -->
      <div class="admin-modal" id="editTripModal" hidden>
        <div class="admin-modal-dialog" style="max-width: 800px;">
          <header class="admin-modal-header">
            <h3>Edit Trip</h3>
            <button type="button" class="admin-modal-close" onclick="document.getElementById('editTripModal').hidden=true">‚úï</button>
          </header>
          <div class="admin-modal-content">
            <form id="editTripForm" novalidate>
              <input type="hidden" id="editTripId" />
              <div class="admin-form-grid">
                <label class="admin-form-field">
                  <span>Slug (read-only)</span>
                  <input type="text" id="editTripSlug" readonly style="background:#2a2f3a;cursor:not-allowed;" />
                </label>
                <label class="admin-form-field">
                  <span>City</span>
                  <select name="start_city" id="editTripCity" required>
                    <option value="Larnaca">Larnaca</option>
                    <option value="Paphos">Paphos</option>
                    <option value="Limassol">Limassol</option>
                    <option value="Ayia Napa">Ayia Napa</option>
                    <option value="Nicosia">Nicosia</option>
                    <option value="All Cities">All Cities</option>
                  </select>
                </label>
                <!-- I18N Fields (hidden by default) -->
                <div id="tripI18nFields" style="display: none; grid-column:1/-1;">
                  <div id="tripTitleI18n"></div>
                  <div id="tripDescriptionI18n"></div>
                </div>

                <!-- Legacy Fields (visible by default) -->
                <div id="tripLegacyFields" style="display: contents;">
                  <label class="admin-form-field" style="grid-column:1/-1;">
                    <span>Title (PL)</span>
                    <input type="text" name="title_pl" id="editTripTitlePl" required />
                  </label>
                  <label class="admin-form-field" style="grid-column:1/-1;">
                    <span>Description (PL)</span>
                    <textarea name="description_pl" id="editTripDescPl" rows="4"></textarea>
                  </label>
                </div>

                <div class="admin-form-field" style="grid-column:1/-1;">
                  <span>Cover Image</span>
                  <div class="image-upload-section">
                    <div class="image-upload-row">
                      <input type="url" name="cover_image_url" id="editTripCoverUrl" placeholder="https://... or upload an image" />
                      <input type="file" id="editTripCoverFile" accept="image/*" style="display:none;" onchange="handleTripCoverUpload(this)" />
                      <button type="button" class="btn-upload-image" onclick="document.getElementById('editTripCoverFile').click()">
                        üì§ Upload
                      </button>
                    </div>
                    <div id="editTripCoverPreview" class="image-preview-container" style="display:none;">
                      <img alt="Cover preview" />
                      <button type="button" class="btn-remove-image" onclick="removeTripCoverImage()">‚úï Remove</button>
                    </div>
                    <small style="color: var(--admin-text-muted);">Upload an image or paste a URL. Recommended size: 1200x600px</small>
                  </div>
                </div>
                <label class="admin-form-field">
                  <span>Pricing Model</span>
                  <select name="pricing_model" id="editTripPricing">
                    <option value="per_person">per_person</option>
                    <option value="base_plus_extra">base_plus_extra</option>
                    <option value="per_hour">per_hour</option>
                    <option value="per_day">per_day</option>
                  </select>
                </label>
                <div id="editTripPriceFields" class="admin-form-inline"></div>
                <label class="admin-form-field" style="grid-column:1/-1;">
                  <span style="display:flex;align-items:center;gap:8px;">
                    <input type="checkbox" name="is_published" id="editTripPublished" style="width:auto;" />
                    Published (visible to customers)
                  </span>
                </label>
              </div>
              <div class="admin-modal-actions">
                <button type="button" class="btn-secondary" onclick="document.getElementById('editTripModal').hidden=true">Cancel</button>
                <button type="submit" class="btn-primary">Save Changes</button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- New Trip Modal -->
      <div class="admin-modal" id="newTripModal" hidden>
        <div class="admin-modal-dialog">
          <header class="admin-modal-header">
            <h3>Create New Trip</h3>
            <button type="button" class="admin-modal-close" onclick="document.getElementById('newTripModal').hidden=true">‚úï</button>
          </header>
          <div class="admin-modal-content">
            <form id="newTripForm" novalidate>
              <div class="admin-form-grid">
                <label class="admin-form-field">
                  <span>City</span>
                  <select name="start_city" id="newTripCity" required>
                    <option value="Larnaca">Larnaca</option>
                    <option value="Paphos">Paphos</option>
                    <option value="Limassol">Limassol</option>
                    <option value="Ayia Napa">Ayia Napa</option>
                    <option value="Nicosia">Nicosia</option>
                    <option value="All Cities">All Cities</option>
                  </select>
                </label>
                <!-- I18N Fields -->
                <div id="newTripI18nFields" style="grid-column:1/-1;">
                  <div id="newTripTitleI18n"></div>
                  <div id="newTripDescriptionI18n"></div>
                </div>
                
                <div class="admin-form-field" style="grid-column:1/-1;">
                  <span>Cover Image (upload) lub URL (opcjonalnie)</span>
                  <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
                    <input type="file" id="newTripCoverFile" accept="image/*" />
                    <input type="url" name="cover_image_url" id="newTripCoverUrl" placeholder="https://..." style="flex:1;min-width:240px;" />
                  </div>
                  <div id="newTripCoverPreview" style="margin-top:8px;display:none;">
                    <img alt="PodglƒÖd ok≈Çadki" style="width:100%;max-height:160px;object-fit:cover;border-radius:8px;" />
                  </div>
                </div>
                <label class="admin-form-field">
                  <span>Pricing Model</span>
                  <select name="pricing_model" id="newTripPricing">
                    <option value="per_person">per_person</option>
                    <option value="base_plus_extra">base_plus_extra</option>
                    <option value="per_hour">per_hour</option>
                    <option value="per_day">per_day</option>
                  </select>
                </label>
                <div id="newTripPriceFields" class="admin-form-inline"></div>
              </div>
              <div class="admin-modal-actions">
                <button type="submit" class="btn-primary">Create</button>
                <button type="button" class="btn-secondary" onclick="document.getElementById('newTripModal').hidden=true">Cancel</button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Trip Details Modal -->
      <div class="admin-modal" id="tripDetailsModal" hidden>
        <div class="admin-modal-dialog">
          <header class="admin-modal-header">
            <h3>Trip details</h3>
            <button type="button" class="admin-modal-close" onclick="document.getElementById('tripDetailsModal').hidden=true">‚úï</button>
          </header>
          <div class="admin-modal-content" id="tripDetailsContent">
            <p class="table-loading">Loading...</p>
          </div>
        </div>
      </div>

      <!-- Moderation View -->
      <section class="admin-view" id="viewModeration" hidden>
        <header class="admin-view-header">
          <h2>Moderation</h2>
          <p class="admin-view-subtitle">Review and resolve reported content</p>
        </header>

        <div class="admin-table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Type</th>
                <th>User</th>
                <th>POI</th>
                <th>Excerpt</th>
                <th>Reason</th>
                <th>Date</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="moderationTable">
              <tr>
                <td colspan="7" class="table-loading">Loading reports...</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="admin-pagination" id="moderationPagination">
          <button class="btn-pagination" disabled>Previous</button>
          <span class="pagination-info">Page 1</span>
          <button class="btn-pagination" disabled>Next</button>
        </div>
      </section>

      <!-- Analytics View -->
      <section class="admin-view" id="viewAnalytics" hidden>
        <header class="admin-view-header">
          <h2>Analytics</h2>
          <p class="admin-view-subtitle">Engagement and contributors overview</p>
        </header>
        <div id="analyticsContent">
          <div class="admin-stats-grid">
            <div class="admin-stat-card"><h4>Comments Today</h4><p style="font-size: 28px; font-weight: 700;">-</p></div>
            <div class="admin-stat-card"><h4>Comments This Week</h4><p style="font-size: 28px; font-weight: 700;">-</p></div>
            <div class="admin-stat-card"><h4>Active Users Today</h4><p style="font-size: 28px; font-weight: 700;">-</p></div>
            <div class="admin-stat-card"><h4>Average Rating</h4><p style="font-size: 28px; font-weight: 700;">-</p></div>
          </div>
        </div>
      </section>

      <!-- Quests View -->
      <section class="admin-view" id="viewQuests" hidden>
        <header class="admin-view-header">
          <div>
            <h2>Quests</h2>
            <p class="admin-view-subtitle">Manage quest tasks (category: "quest")</p>
          </div>
          <div class="admin-view-actions">
            <button class="btn-secondary" type="button" id="btnRefreshQuests">Refresh</button>
            <button class="btn-primary" type="button" id="btnAddQuest">New Quest</button>
          </div>
        </header>

        <div class="admin-table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>XP</th>
                <th>Active</th>
                <th>Sort</th>
                <th>Code</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="questsTableBody">
              <tr>
                <td colspan="6" class="table-loading">Loading quests...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Users View -->
      <section class="admin-view" id="viewUsers" hidden>
        <header class="admin-view-header">
          <h2>User Management</h2>
          <p class="admin-view-subtitle">Manage user accounts and profiles</p>
        </header>

        <!-- User Search -->
        <div class="admin-search-bar">
          <input 
            type="text" 
            id="userSearch" 
            placeholder="Search users by name, email, or username..."
            class="admin-search-input"
          />
          <button class="btn-admin-search" id="btnUserSearch">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"/>
              <path d="m21 21-4.35-4.35"/>
            </svg>
            Search
          </button>
        </div>

        <!-- Users Table -->
        <div class="admin-table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Username</th>
                <th>Email</th>
                <th>Level</th>
                <th>XP</th>
                <th>Joined</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="usersTable">
              <tr>
                <td colspan="7" class="table-loading">Loading users...</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Pagination -->
        <div class="admin-pagination" id="usersPagination">
          <button class="btn-pagination" id="btnUsersPrev">Previous</button>
          <span class="pagination-info" id="usersPaginationInfo">Page 1</span>
          <button class="btn-pagination" id="btnUsersNext">Next</button>
        </div>
      </section>

      <!-- Referrals View -->
      <section class="admin-view" id="viewReferrals" hidden>
        <header class="admin-view-header">
          <div>
            <h2>üîó Referral System</h2>
            <p class="admin-view-subtitle">Manage referrals, XP rewards, and view referral tree</p>
          </div>
        </header>

        <!-- Referral Tabs -->
        <div class="admin-tabs" id="referralTabs">
          <button class="admin-tab active" data-tab="referralSettings">‚öôÔ∏è Settings</button>
          <button class="admin-tab" data-tab="referralList">üìã All Referrals</button>
          <button class="admin-tab" data-tab="referralTree">üå≥ Tree View</button>
          <button class="admin-tab" data-tab="referralStats">üìä Statistics</button>
        </div>

        <!-- Tab: Settings -->
        <div class="admin-tab-content active" id="tabReferralSettings">
          <div class="admin-card" style="max-width: 500px;">
            <h3>XP Reward Settings</h3>
            <div class="form-group" style="margin-top: 16px;">
              <label for="referralXpAmount">XP za polecenie u≈ºytkownika:</label>
              <div style="display: flex; gap: 12px; align-items: center; margin-top: 8px;">
                <input type="number" id="referralXpAmount" class="form-control" min="0" max="10000" value="100" style="width: 120px;">
                <span>XP</span>
                <button class="btn-primary" id="btnSaveReferralXp">üíæ Save</button>
              </div>
            </div>
            <p class="text-muted" style="margin-top: 12px; font-size: 13px;">
              This amount will be awarded to the referrer when someone registers using their referral link.
            </p>
          </div>
        </div>

        <!-- Tab: All Referrals List -->
        <div class="admin-tab-content" id="tabReferralList" hidden>
          <div class="admin-search-bar">
            <input type="text" id="referralSearch" placeholder="Search by username or email..." class="admin-search-input" />
            <select id="referralStatusFilter" class="form-control" style="width: 150px;">
              <option value="">All statuses</option>
              <option value="pending">Pending</option>
              <option value="confirmed">Confirmed</option>
              <option value="rejected">Rejected</option>
            </select>
            <button class="btn-admin-search" id="btnRefreshReferrals">üîÑ Refresh</button>
          </div>

          <div class="admin-table-container">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Referrer</th>
                  <th>Referred User</th>
                  <th>Date</th>
                  <th>Status</th>
                  <th>XP Awarded</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="referralsTable">
                <tr>
                  <td colspan="6" class="table-loading">Loading referrals...</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="admin-pagination" id="referralsPagination">
            <button class="btn-pagination" id="btnReferralsPrev">Previous</button>
            <span class="pagination-info" id="referralsPaginationInfo">Page 1</span>
            <button class="btn-pagination" id="btnReferralsNext">Next</button>
          </div>
        </div>

        <!-- Tab: Tree View -->
        <div class="admin-tab-content" id="tabReferralTree" hidden>
          <div class="admin-search-bar">
            <input type="text" id="treeSearch" placeholder="Find user in tree..." class="admin-search-input" />
            <button class="btn-secondary" id="btnExpandAll">Expand All</button>
            <button class="btn-secondary" id="btnCollapseAll">Collapse All</button>
          </div>
          <div id="referralTreeContainer" class="referral-tree-container">
            <p class="text-muted">Loading referral tree...</p>
          </div>
        </div>

        <!-- Tab: Statistics -->
        <div class="admin-tab-content" id="tabReferralStats" hidden>
          <div class="admin-stats-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
            <div class="admin-stat-card">
              <div class="stat-value" id="statTotalReferrals">0</div>
              <div class="stat-label">Total Referrals</div>
            </div>
            <div class="admin-stat-card">
              <div class="stat-value" id="statConfirmedReferrals">0</div>
              <div class="stat-label">Confirmed</div>
            </div>
            <div class="admin-stat-card">
              <div class="stat-value" id="statPendingReferrals">0</div>
              <div class="stat-label">Pending</div>
            </div>
            <div class="admin-stat-card">
              <div class="stat-value" id="statTotalXpAwarded">0</div>
              <div class="stat-label">XP Awarded</div>
            </div>
            <div class="admin-stat-card">
              <div class="stat-value" id="statUniqueReferrers">0</div>
              <div class="stat-label">Active Referrers</div>
            </div>
          </div>

          <h3>üèÜ Top Referrers</h3>
          <div class="admin-table-container">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>User</th>
                  <th>Referrals</th>
                  <th>XP Earned</th>
                </tr>
              </thead>
              <tbody id="topReferrersTable">
                <tr>
                  <td colspan="4" class="table-loading">Loading...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- POIs View -->
      <section class="admin-view" id="viewPois" hidden>
        <header class="admin-view-header">
          <div>
            <h2>Points of Interest</h2>
            <p class="admin-view-subtitle">Manage POIs and locations</p>
          </div>
          <div class="admin-view-actions">
            <span class="poi-data-source" id="poiDataSourceBadge" hidden></span>
            <button class="btn-secondary" type="button" id="btnRefreshPois" title="Reload POIs">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="23 4 23 10 17 10"/>
                <polyline points="1 20 1 14 7 14"/>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10"/>
                <path d="M20.49 15a9 9 0 0 1-14.85 3.36L1 14"/>
              </svg>
              Refresh
            </button>
            <button class="btn-primary" type="button" id="btnAddPoi">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
              New POI
            </button>
          </div>
        </header>

        <!-- POI Stats -->
        <div class="admin-stats-grid poi-stats">
          <div class="admin-stat-card">
            <div class="stat-card-content">
              <p class="stat-card-label">Total POIs</p>
              <p class="stat-card-value" id="poiStatTotal">0</p>
              <p class="stat-card-change" id="poiStatLiveStatus">Awaiting data...</p>
            </div>
          </div>
          <div class="admin-stat-card">
            <div class="stat-card-content">
              <p class="stat-card-label">Published</p>
              <p class="stat-card-value" id="poiStatPublished">0</p>
              <p class="stat-card-change">Live on map</p>
            </div>
          </div>
          <div class="admin-stat-card">
            <div class="stat-card-content">
              <p class="stat-card-label">Draft / Hidden</p>
              <p class="stat-card-value" id="poiStatDrafts">0</p>
              <p class="stat-card-change">Needs review</p>
            </div>
          </div>
          <div class="admin-stat-card">
            <div class="stat-card-content">
              <p class="stat-card-label">Missing Location</p>
              <p class="stat-card-value" id="poiStatMissingLocation">0</p>
              <p class="stat-card-change">Require GPS coordinates</p>
            </div>
          </div>
        </div>

        <!-- POI i18n Form Container -->
        <div id="poiFormContainer" style="display: none; margin: 24px 0;"></div>

        <!-- Filters -->
        <div class="admin-card">
          <div class="admin-card-body">
            <div class="poi-filters">
              <label class="poi-filter">
                <span>Search</span>
                <input type="search" id="poiSearchInput" placeholder="Search POIs by name, slug or description..." />
              </label>
              <label class="poi-filter">
                <span>Category</span>
                <select id="poiCategoryFilter">
                  <option value="all">All categories</option>
                </select>
              </label>
              <label class="poi-filter">
                <span>Status</span>
                <select id="poiStatusFilter">
                  <option value="all">All statuses</option>
                  <option value="published">Published</option>
                  <option value="draft">Draft</option>
                  <option value="hidden">Hidden</option>
                </select>
              </label>
            </div>
            <p class="poi-filter-helper" id="poiFilterHelper">Use filters to quickly find and audit POIs.</p>
          </div>
        </div>

        <!-- POI Table -->
        <div class="admin-table-container">
          <table class="admin-table admin-poi-table">
            <thead>
              <tr>
                <th>POI</th>
                <th>Category</th>
                <th>Coordinates</th>
                <th>Radius</th>
                <th>Updated</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="poisTableBody">
              <tr>
                <td colspan="6" class="table-loading">Loading POIs...</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="poi-table-footer" id="poiTableFooter"></div>
      </section>

      <!-- Content View -->
      <section class="admin-view" id="viewContent" hidden>
        <header class="admin-view-header">
          <h2>Content Management</h2>
          <p class="admin-view-subtitle">Manage all comments, photos and user-generated content</p>
        </header>

        <!-- Content Stats -->
        <div class="admin-stats-grid" id="contentStats">
          <div class="admin-stat-card">
            <div class="stat-card-content">
              <p class="stat-card-label">Total Comments</p>
              <p class="stat-card-value">-</p>
              <p class="stat-card-change">Loading...</p>
            </div>
          </div>
          <div class="admin-stat-card">
            <div class="stat-card-content">
              <p class="stat-card-label">Total Photos</p>
              <p class="stat-card-value">-</p>
              <p class="stat-card-change">Loading...</p>
            </div>
          </div>
          <div class="admin-stat-card">
            <div class="stat-card-content">
              <p class="stat-card-label">Total Likes</p>
              <p class="stat-card-value">-</p>
              <p class="stat-card-change">Loading...</p>
            </div>
          </div>
          <div class="admin-stat-card">
            <div class="stat-card-content">
              <p class="stat-card-label">Active Users</p>
              <p class="stat-card-value">-</p>
              <p class="stat-card-change">Loading...</p>
            </div>
          </div>
        </div>

        <!-- Search Bar -->
        <div class="admin-search-bar">
          <input 
            type="search" 
            id="contentSearchInput" 
            placeholder="Search comments by user, POI, or content..."
            class="admin-search-input"
            onkeypress="if(event.key === 'Enter') searchComments();"
          />
          <button class="btn-admin-search" onclick="searchComments()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"/>
              <path d="m21 21-4.35-4.35"/>
            </svg>
            Search
          </button>
          <button class="btn-secondary" onclick="clearContentSearch()">
            Clear
          </button>
        </div>

        <!-- Content Table -->
        <div class="admin-table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>User</th>
                <th>POI & Comment</th>
                <th>Info</th>
                <th>Likes</th>
                <th>Date</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="contentTable">
              <tr>
                <td colspan="6" class="table-loading">Loading content...</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Pagination -->
        <div class="admin-pagination" id="contentPagination">
          <button class="btn-pagination" disabled>Previous</button>
          <span class="pagination-info">Page 1</span>
          <button class="btn-pagination" disabled>Next</button>
        </div>
      </section>

      <!-- Diagnostics View -->
      <section class="admin-view" id="viewDiagnostics" hidden>
        <header class="admin-view-header">
          <h2>System Diagnostics</h2>
          <p class="admin-view-subtitle">Monitor system health and performance</p>
        </header>

        <div class="admin-diagnostics-grid">
          <div class="diagnostic-card">
            <h4>Database Status</h4>
            <div class="diagnostic-status" id="dbStatus">
              <span class="status-indicator status-checking"></span>
              <span>Checking...</span>
            </div>
          </div>

          <div class="diagnostic-card">
            <h4>API Status</h4>
            <div class="diagnostic-status" id="apiStatus">
              <span class="status-indicator status-checking"></span>
              <span>Checking...</span>
            </div>
          </div>

          <div class="diagnostic-card">
            <h4>Storage Status</h4>
            <div class="diagnostic-status" id="storageStatus">
              <span class="status-indicator status-checking"></span>
              <span>Checking...</span>
            </div>
          </div>
        </div>

        <div class="admin-section">
          <div class="admin-view-header" style="margin-bottom: 16px; display: flex; align-items: center; justify-content: space-between; gap: 12px;">
            <div>
              <h3>Health Checks</h3>
              <p class="admin-view-subtitle">Wykrywanie problem√≥w z konfiguracjƒÖ i danymi. Mo≈ºesz uruchomiƒá pojedyncze testy lub wszystko naraz.</p>
            </div>
            <div class="admin-view-actions">
              <button class="btn-secondary" id="btnRunAllChecks">Run all</button>
            </div>
          </div>

          <!-- Diagnostics summary stats -->
          <div class="admin-stats-grid" style="margin-bottom: 16px;">
            <div class="admin-stat-card">
              <div class="stat-card-content">
                <p class="stat-card-label">Total checks</p>
                <p class="stat-card-value" id="diagStatTotal">0</p>
                <p class="stat-card-change">All defined diagnostics</p>
              </div>
            </div>
            <div class="admin-stat-card">
              <div class="stat-card-content">
                <p class="stat-card-label">Warnings</p>
                <p class="stat-card-value" id="diagStatWarnings">0</p>
                <p class="stat-card-change">Items to improve</p>
              </div>
            </div>
            <div class="admin-stat-card">
              <div class="stat-card-content">
                <p class="stat-card-label">Errors</p>
                <p class="stat-card-value" id="diagStatErrors">0</p>
                <p class="stat-card-change">Critical issues</p>
              </div>
            </div>
          </div>

          <!-- Diagnostics mini chart -->
          <div style="margin-bottom: 24px;">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;font-size:12px;color:var(--admin-text-muted);">
              <span>Checks status distribution</span>
            </div>
            <div style="height:10px;border-radius:999px;overflow:hidden;background:rgba(148,163,184,0.3);display:flex;">
              <div id="diagBarOk" style="height:100%;background:#16a34a;width:0;"></div>
              <div id="diagBarWarn" style="height:100%;background:#f59e0b;width:0;"></div>
              <div id="diagBarError" style="height:100%;background:#ef4444;width:0;"></div>
            </div>
          </div>

          <div class="admin-table-container">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Check</th>
                  <th>Status</th>
                  <th>Details</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="diagnosticChecksTable">
                <tr>
                  <td colspan="4" class="table-loading">Loading checks...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- System Metrics -->
        <div class="admin-section">
          <h3>System Metrics</h3>
          <div class="admin-table-container">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Metric</th>
                  <th>Value</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody id="systemMetricsTable">
                <tr>
                  <td colspan="3" class="table-loading">Loading metrics...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- Cars View -->
      <section class="admin-view" id="viewCars" hidden>
        <header class="admin-view-header">
          <div>
            <h2>Car Rentals</h2>
            <p class="admin-view-subtitle">Manage car rental bookings and vehicles</p>
          </div>
          <div class="admin-view-actions">
            <button class="btn-secondary" type="button" id="btnRefreshCars">Refresh</button>
            <button class="btn-primary" type="button" id="btnAddCar">New Booking</button>
          </div>
        </header>

        <!-- Sub-navigation for Cars -->
        <div style="margin-bottom: 24px; border-bottom: 2px solid var(--admin-border); display: flex; gap: 8px;">
          <button class="cars-tab-button active" data-tab="bookings" style="padding: 12px 24px; background: none; border: none; border-bottom: 2px solid transparent; cursor: pointer; font-weight: 500; color: var(--admin-text-muted); transition: all 0.2s;">
            Bookings
          </button>
          <button class="cars-tab-button" data-tab="fleet" style="padding: 12px 24px; background: none; border: none; border-bottom: 2px solid transparent; cursor: pointer; font-weight: 500; color: var(--admin-text-muted); transition: all 0.2s;">
            Fleet Management
          </button>
        </div>

        <!-- Car Stats -->
        <div class="admin-stats-grid">
          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-blue">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 17h14v2H5v-2zM3 11l2.5-5h13L21 11M3 11v6h18v-6M3 11h18"/>
                <circle cx="7.5" cy="15.5" r="1.5"/>
                <circle cx="16.5" cy="15.5" r="1.5"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Total Bookings</p>
              <p class="stat-card-value" id="statTotalBookings">-</p>
              <p class="stat-card-change">Loading...</p>
            </div>
          </div>

          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-green">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Active Rentals</p>
              <p class="stat-card-value" id="statActiveRentals">-</p>
              <p class="stat-card-change">Loading...</p>
            </div>
          </div>

          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-orange">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12 6 12 12 16 14"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Pending</p>
              <p class="stat-card-value" id="statPendingBookings">-</p>
              <p class="stat-card-change">Loading...</p>
            </div>
          </div>

          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-purple">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="1" x2="12" y2="23"/>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Revenue (Total)</p>
              <p class="stat-card-value" id="statTotalRevenue">-</p>
              <p class="stat-card-change">Loading...</p>
            </div>
          </div>
        </div>

        <!-- Bookings Tab Content -->
        <div id="carsTabBookings" class="cars-tab-content">
          <!-- Cars Table (Bookings) -->
          <div class="admin-table-container">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Booking ID</th>
                  <th>Customer</th>
                  <th>Car Type</th>
                  <th>Dates</th>
                  <th>Status</th>
                  <th>Amount</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="carsTableBody">
                <tr>
                  <td colspan="7" class="table-loading">Loading car bookings...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Fleet Tab Content -->
        <div id="carsTabFleet" class="cars-tab-content" hidden>
          <div style="margin-bottom: 16px; display: flex; justify-content: space-between; align-items: center;">
            <div style="display: flex; gap: 12px;">
              <select id="fleetLocationFilter" class="admin-form-field" style="padding: 8px 12px;">
                <option value="">All Locations</option>
                <option value="larnaca">Larnaca</option>
                <option value="paphos">Paphos</option>
              </select>
              <select id="fleetTypeFilter" class="admin-form-field" style="padding: 8px 12px;">
                <option value="">All Types</option>
                <option value="Economy">Economy</option>
                <option value="Compact">Compact</option>
                <option value="SUV">SUV</option>
                <option value="MPV">MPV</option>
                <option value="Luxury">Luxury</option>
              </select>
            </div>
            <button class="btn-primary" type="button" id="btnAddFleetCar">Add New Car</button>
          </div>

          <!-- Fleet Table -->
          <div class="admin-table-container">
            <table class="admin-table">
              <thead>
                <tr>
                  <th style="width: 80px;">Image</th>
                  <th>Location</th>
                  <th>Order</th>
                  <th>Car Model</th>
                  <th>Type</th>
                  <th>Price</th>
                  <th>Transmission</th>
                  <th>Fuel</th>
                  <th>Seats</th>
                  <th>Available</th>
                  <th style="width: 120px;">Actions</th>
                </tr>
              </thead>
              <tbody id="fleetTableBody">
                <tr>
                  <td colspan="11" class="table-loading">Loading fleet...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- Recommendations View -->
      <section class="admin-view" id="viewRecommendations" hidden>
        <header class="admin-view-header">
          <div>
            <h2>Recommendations</h2>
            <p class="admin-view-subtitle">Manage recommended places on Cyprus</p>
          </div>
          <div class="admin-view-actions">
            <button class="btn-secondary" type="button" id="btnRefreshRecommendations">Refresh</button>
            <button class="btn-primary" type="button" id="btnAddRecommendation">New Recommendation</button>
          </div>
        </header>

        <!-- Stats Cards -->
        <div class="admin-stats-grid">
          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-purple">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Total Recommendations</p>
              <p class="stat-card-value" id="statTotalRecommendations">-</p>
              <p class="stat-card-change">Loading...</p>
            </div>
          </div>

          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-green">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Active</p>
              <p class="stat-card-value" id="statActiveRecommendations">-</p>
              <p class="stat-card-change">Loading...</p>
            </div>
          </div>

          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-blue">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Total Views</p>
              <p class="stat-card-value" id="statTotalViews">-</p>
              <p class="stat-card-change">All time</p>
            </div>
          </div>

          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-orange">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Total Clicks</p>
              <p class="stat-card-value" id="statTotalClicks">-</p>
              <p class="stat-card-change">All time</p>
            </div>
          </div>
        </div>

        <!-- Filters -->
        <div style="margin: 24px 0; display: flex; gap: 12px; align-items: center; flex-wrap: wrap;">
          <input 
            type="text" 
            id="recommendationSearchInput" 
            class="admin-form-field" 
            placeholder="Search recommendations..." 
            style="flex: 1; min-width: 250px;"
          />
          <select id="recommendationCategoryFilter" class="admin-form-field" style="min-width: 180px;">
            <option value="">All Categories</option>
          </select>
          <select id="recommendationStatusFilter" class="admin-form-field" style="min-width: 150px;">
            <option value="">All Status</option>
            <option value="active">Active</option>
            <option value="inactive">Inactive</option>
            <option value="featured">Featured</option>
          </select>
        </div>

        <!-- Recommendations Table -->
        <div class="admin-table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th style="width: 80px;">Image</th>
                <th style="width: 50px;">Order</th>
                <th>Title</th>
                <th>Category</th>
                <th>Location</th>
                <th>Views</th>
                <th>Clicks</th>
                <th>Promo Code</th>
                <th>Status</th>
                <th style="width: 150px;">Actions</th>
              </tr>
            </thead>
            <tbody id="recommendationsTableBody">
              <tr>
                <td colspan="10" class="table-loading">Loading recommendations...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- XP Control View -->
      <section class="admin-view" id="viewXp-control" hidden>
        <header class="admin-view-header">
          <h2>XP Control</h2>
          <p class="admin-view-subtitle">Manage experience points system, level progression, and rewards</p>
        </header>

        <!-- XP Statistics Cards -->
        <div class="admin-stats-grid" id="xpStatsGrid">
          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-purple">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Total XP Awarded</p>
              <p class="stat-card-value" id="statTotalXp">-</p>
            </div>
          </div>

          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-blue">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Users with XP</p>
              <p class="stat-card-value" id="statUsersWithXp">-</p>
            </div>
          </div>

          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-green">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 20V10"/>
                <path d="M18 20V4"/>
                <path d="M6 20v-4"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Average XP</p>
              <p class="stat-card-value" id="statAvgXp">-</p>
            </div>
          </div>

          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-orange">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M8.21 13.89 7 23l5-3 5 3-1.21-9.12"/>
                <circle cx="12" cy="8" r="7"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Highest Level</p>
              <p class="stat-card-value" id="statMaxLevel">-</p>
            </div>
          </div>
        </div>

        <!-- XP Control Tabs -->
        <div class="admin-tabs" style="margin-top: 24px;">
          <button class="admin-tab active" data-xp-tab="rewards">‚≠ê XP Rewards</button>
          <button class="admin-tab" data-xp-tab="config">‚öôÔ∏è Configuration</button>
          <button class="admin-tab" data-xp-tab="users">üë• User XP</button>
          <button class="admin-tab" data-xp-tab="history">üìú History</button>
        </div>

        <!-- Tab: XP Rewards (xp_rules) -->
        <div class="admin-tab-content active" id="xpTabRewards">
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header" style="display: flex; justify-content: space-between; align-items: center;">
              <h3>XP Reward Rules</h3>
              <button class="btn-primary" id="btnAddXpRule">+ Add Rule</button>
            </div>
            <div class="admin-card-body">
              <p style="color: var(--admin-text-muted); margin-bottom: 16px;">
                Define how much XP users earn for different actions.
              </p>
              <table class="admin-table" id="xpRulesTable">
                <thead>
                  <tr>
                    <th>Event Key</th>
                    <th>XP Amount</th>
                    <th>Category</th>
                    <th>Description</th>
                    <th>Active</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="xpRulesTableBody">
                  <tr>
                    <td colspan="6" style="text-align: center; padding: 24px;">Loading...</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Tab: Configuration -->
        <div class="admin-tab-content" id="xpTabConfig" hidden>
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header">
              <h3>Level Progression Settings</h3>
            </div>
            <div class="admin-card-body">
              <p style="color: var(--admin-text-muted); margin-bottom: 16px;">
                Configure how levels are calculated from XP. Current formula: <strong>Level = XP √∑ 1000</strong>
              </p>
              
              <div class="admin-form-grid" style="max-width: 600px;">
                <label class="admin-form-field">
                  <span>Level Formula Type</span>
                  <select id="xpFormulaType" class="form-control">
                    <option value="simple" selected>Simple (XP √∑ divisor)</option>
                    <option value="linear">Linear (base + level √ó increment)</option>
                    <option value="exponential">Exponential (base √ó multiplier^level)</option>
                  </select>
                </label>
                
                <label class="admin-form-field">
                  <span>Divisor (for Simple formula)</span>
                  <input type="number" id="xpDivisor" class="form-control" value="1000" min="100" step="100">
                </label>
                
                <label class="admin-form-field">
                  <span>Maximum Level</span>
                  <input type="number" id="xpMaxLevel" class="form-control" value="100" min="1" max="1000">
                </label>
                
                <label class="admin-form-field">
                  <span>Global XP Multiplier</span>
                  <input type="number" id="xpMultiplier" class="form-control" value="1.0" min="0.1" max="10" step="0.1">
                  <small style="color: var(--admin-text-muted);">Use for double XP events (2.0 = 2x XP)</small>
                </label>
              </div>
              
              <div style="margin-top: 24px;">
                <button class="btn-primary" id="btnSaveXpConfig">üíæ Save Configuration</button>
              </div>
              
              <!-- Level Preview Table -->
              <div style="margin-top: 32px;">
                <h4 style="margin-bottom: 12px;">Level Preview (first 20 levels)</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 8px;" id="levelPreviewGrid">
                  <!-- Generated dynamically -->
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Tab: User XP -->
        <div class="admin-tab-content" id="xpTabUsers" hidden>
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header">
              <h3>User XP Management</h3>
            </div>
            <div class="admin-card-body">
              <p style="color: var(--admin-text-muted); margin-bottom: 16px;">
                Search and modify user XP directly.
              </p>
              
              <div style="display: flex; gap: 12px; margin-bottom: 16px;">
                <input type="text" id="xpUserSearch" class="form-control" placeholder="Search by email or name..." style="flex: 1; max-width: 400px;">
                <button class="btn-secondary" id="btnSearchXpUser">üîç Search</button>
              </div>
              
              <table class="admin-table" id="xpUsersTable">
                <thead>
                  <tr>
                    <th>User</th>
                    <th>Email</th>
                    <th>XP</th>
                    <th>Level</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="xpUsersTableBody">
                  <tr>
                    <td colspan="5" style="text-align: center; padding: 24px; color: var(--admin-text-muted);">
                      Enter a search term to find users
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Tab: History -->
        <div class="admin-tab-content" id="xpTabHistory" hidden>
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header">
              <h3>XP Transaction History</h3>
            </div>
            <div class="admin-card-body">
              <p style="color: var(--admin-text-muted); margin-bottom: 16px;">
                Recent XP awards and adjustments from <strong>user_xp_events</strong> table.
              </p>
              
              <div style="display: flex; gap: 12px; margin-bottom: 16px;">
                <select id="xpHistoryFilter" class="form-control" style="width: 200px;">
                  <option value="all">All Events</option>
                  <option value="poi">POI Visits</option>
                  <option value="task">Tasks</option>
                  <option value="admin">Admin Adjustments</option>
                </select>
                <button class="btn-secondary" id="btnRefreshXpHistory">üîÑ Refresh</button>
              </div>
              
              <table class="admin-table" id="xpHistoryTable">
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>User</th>
                    <th>XP</th>
                    <th>Reason</th>
                  </tr>
                </thead>
                <tbody id="xpHistoryTableBody">
                  <tr>
                    <td colspan="4" style="text-align: center; padding: 24px;">Loading...</td>
                  </tr>
                </tbody>
              </table>
              
              <div style="margin-top: 16px; text-align: center;">
                <button class="btn-secondary" id="btnLoadMoreXpHistory">Load More</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Shop View -->
      <section class="admin-view" id="viewShop" hidden>
        <header class="admin-view-header">
          <h2>Shop Management</h2>
          <p class="admin-view-subtitle">Manage products, orders, vendors, and shop settings</p>
        </header>

        <!-- Shop Stats Cards -->
        <div class="admin-stats-grid" id="shopStatsGrid">
          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-green">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Total Revenue</p>
              <p class="stat-card-value" id="shopStatRevenue">‚Ç¨0</p>
            </div>
          </div>
          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-blue">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Total Orders</p>
              <p class="stat-card-value" id="shopStatOrders">0</p>
            </div>
          </div>
          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-purple">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Active Products</p>
              <p class="stat-card-value" id="shopStatProducts">0</p>
            </div>
          </div>
          <div class="admin-stat-card">
            <div class="stat-card-icon stat-card-icon-orange">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
              </svg>
            </div>
            <div class="stat-card-content">
              <p class="stat-card-label">Pending Orders</p>
              <p class="stat-card-value" id="shopStatPending">0</p>
            </div>
          </div>
        </div>

        <!-- Shop Tabs -->
        <div class="admin-tabs" style="margin-top: 24px;">
          <button class="admin-tab active" data-shop-tab="orders">üì¶ Orders</button>
          <button class="admin-tab" data-shop-tab="products">üè∑Ô∏è Products</button>
          <button class="admin-tab" data-shop-tab="categories">üìÅ Categories</button>
          <button class="admin-tab" data-shop-tab="vendors">üè™ Vendors</button>
          <button class="admin-tab" data-shop-tab="discounts">üéüÔ∏è Discounts</button>
          <button class="admin-tab" data-shop-tab="shipping">üöö Shipping</button>
          <button class="admin-tab" data-shop-tab="settings">‚öôÔ∏è Settings</button>
        </div>

        <!-- Tab: Orders -->
        <div class="admin-tab-content active" id="shopTabOrders">
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header" style="display: flex; justify-content: space-between; align-items: center;">
              <h3>Orders</h3>
              <div style="display: flex; gap: 8px;">
                <select id="shopOrderStatusFilter" class="form-control" style="width: 150px;">
                  <option value="">All Statuses</option>
                  <option value="pending">Pending</option>
                  <option value="confirmed">Confirmed</option>
                  <option value="processing">Processing</option>
                  <option value="shipped">Shipped</option>
                  <option value="delivered">Delivered</option>
                  <option value="completed">Completed</option>
                  <option value="cancelled">Cancelled</option>
                  <option value="refunded">Refunded</option>
                </select>
                <button class="btn-secondary" id="btnRefreshShopOrders">üîÑ Refresh</button>
              </div>
            </div>
            <div class="admin-card-body">
              <div class="admin-table-container">
                <table class="admin-table" id="shopOrdersTable">
                  <thead>
                    <tr>
                      <th>Order #</th>
                      <th>Customer</th>
                      <th>Items</th>
                      <th>Total</th>
                      <th>Status</th>
                      <th>Payment</th>
                      <th>Partner</th>
                      <th>Date</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody id="shopOrdersTableBody">
                    <tr><td colspan="9" style="text-align: center; padding: 24px;">Loading orders...</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- Tab: Products -->
        <div class="admin-tab-content" id="shopTabProducts" hidden>
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header" style="display: flex; justify-content: space-between; align-items: center;">
              <h3>Products</h3>
              <button class="btn-primary" id="btnAddShopProduct">+ Add Product</button>
            </div>
            <div class="admin-card-body">
              <div style="display: flex; gap: 12px; margin-bottom: 16px;">
                <input type="text" id="shopProductSearch" placeholder="Search products..." class="form-control" style="flex: 1;">
                <select id="shopProductStatusFilter" class="form-control" style="width: 150px;">
                  <option value="">All Status</option>
                  <option value="active">Active</option>
                  <option value="draft">Draft</option>
                  <option value="archived">Archived</option>
                </select>
                <select id="shopProductCategoryFilter" class="form-control" style="width: 150px;">
                  <option value="">All Categories</option>
                </select>
              </div>
              <div class="admin-table-container">
                <table class="admin-table" id="shopProductsTable">
                  <thead>
                    <tr>
                      <th style="width: 60px;">Image</th>
                      <th>Name</th>
                      <th>SKU</th>
                      <th>Price</th>
                      <th>Stock</th>
                      <th>Category</th>
                      <th>Status</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody id="shopProductsTableBody">
                    <tr><td colspan="8" style="text-align: center; padding: 24px;">Loading products...</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- Tab: Categories -->
        <div class="admin-tab-content" id="shopTabCategories" hidden>
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header" style="display: flex; justify-content: space-between; align-items: center;">
              <div>
                <h3>üìÅ Kategorie produkt√≥w</h3>
                <p style="color: var(--admin-text-muted); font-size: 13px; margin-top: 4px;">Organizuj produkty w kategoriach i podkategoriach</p>
              </div>
              <button class="btn-primary" id="btnAddShopCategory">‚ûï Nowa kategoria</button>
            </div>
            <div class="admin-card-body">
              <div style="display: flex; gap: 12px; margin-bottom: 16px;">
                <input type="text" id="shopCategorySearch" placeholder="Szukaj kategorii..." class="form-control" style="flex: 1;" oninput="renderShopCategories()">
                <select id="shopCategoryStatusFilter" class="form-control" style="width: 150px;" onchange="renderShopCategories()">
                  <option value="all">Wszystkie</option>
                  <option value="active">Aktywne</option>
                  <option value="inactive">Nieaktywne</option>
                </select>
                <select id="shopCategoryParentFilter" class="form-control" style="width: 180px;" onchange="renderShopCategories()">
                  <option value="all">Wszystkie poziomy</option>
                  <option value="root">Tylko g≈Ç√≥wne</option>
                  <option value="child">Tylko podkategorie</option>
                </select>
              </div>
              <div class="admin-table-container">
                <table class="admin-table" id="shopCategoriesTable">
                  <thead>
                    <tr>
                      <th style="width: 50px;">Obraz</th>
                      <th>Nazwa</th>
                      <th>Slug</th>
                      <th>Kategoria nadrzƒôdna</th>
                      <th style="width: 80px;">Produkty</th>
                      <th style="width: 80px;">Kolejno≈õƒá</th>
                      <th style="width: 80px;">Status</th>
                      <th style="width: 100px;">Akcje</th>
                    </tr>
                  </thead>
                  <tbody id="shopCategoriesTableBody">
                    <tr><td colspan="8" style="text-align: center; padding: 24px;">≈Åadowanie kategorii...</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- Tab: Vendors -->
        <div class="admin-tab-content" id="shopTabVendors" hidden>
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header" style="display: flex; justify-content: space-between; align-items: center;">
              <div>
                <h3>üè™ Dostawcy / Marki</h3>
                <p style="color: var(--admin-text-muted); font-size: 13px; margin-top: 4px;">ZarzƒÖdzaj dostawcami i markami produkt√≥w. Wyp≈Çaty obs≈Çugujesz rƒôcznie.</p>
              </div>
              <button class="btn-primary" id="btnAddShopVendor">‚ûï Nowy dostawca</button>
            </div>
            <div class="admin-card-body">
              <div style="display: flex; gap: 12px; margin-bottom: 16px;">
                <input type="text" id="shopVendorSearch" placeholder="Szukaj dostawcy..." class="form-control" style="flex: 1;" oninput="renderShopVendors()">
                <select id="shopVendorStatusFilter" class="form-control" style="width: 150px;" onchange="renderShopVendors()">
                  <option value="all">Wszystkie</option>
                  <option value="active">Aktywni</option>
                  <option value="inactive">Nieaktywni</option>
                </select>
              </div>
              <div class="admin-table-container">
                <table class="admin-table" id="shopVendorsTable">
                  <thead>
                    <tr>
                      <th style="width: 50px;">Logo</th>
                      <th>Nazwa</th>
                      <th>Email</th>
                      <th style="width: 80px;">Produkty</th>
                      <th style="width: 100px;">Sprzeda≈º</th>
                      <th style="width: 100px;">Przych√≥d</th>
                      <th style="width: 90px;">Prowizja</th>
                      <th style="width: 80px;">Status</th>
                      <th style="width: 100px;">Akcje</th>
                    </tr>
                  </thead>
                  <tbody id="shopVendorsTableBody">
                    <tr><td colspan="9" style="text-align: center; padding: 24px;">≈Åadowanie dostawc√≥w...</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- Tab: Discounts -->
        <div class="admin-tab-content" id="shopTabDiscounts" hidden>
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header" style="display: flex; justify-content: space-between; align-items: center;">
              <div>
                <h3>üéüÔ∏è Kody rabatowe</h3>
                <p style="color: var(--admin-text-muted); font-size: 13px; margin-top: 4px;">Tw√≥rz kody promocyjne dla klient√≥w. Rabaty procentowe lub kwotowe.</p>
              </div>
              <button class="btn-primary" id="btnAddShopDiscount">‚ûï Nowy kod</button>
            </div>
            <div class="admin-card-body">
              <div style="display: flex; gap: 12px; margin-bottom: 16px;">
                <input type="text" id="shopDiscountSearch" placeholder="Szukaj kodu..." class="form-control" style="flex: 1;" oninput="renderShopDiscounts()">
                <select id="shopDiscountTypeFilter" class="form-control" style="width: 150px;" onchange="renderShopDiscounts()">
                  <option value="all">Wszystkie typy</option>
                  <option value="percentage">Procentowe</option>
                  <option value="fixed">Kwotowe</option>
                  <option value="free_shipping">Darmowa wysy≈Çka</option>
                </select>
                <select id="shopDiscountStatusFilter" class="form-control" style="width: 150px;" onchange="renderShopDiscounts()">
                  <option value="all">Wszystkie</option>
                  <option value="active">Aktywne</option>
                  <option value="expired">Wygas≈Çe</option>
                  <option value="inactive">Nieaktywne</option>
                </select>
              </div>
              <div class="admin-table-container">
                <table class="admin-table" id="shopDiscountsTable">
                  <thead>
                    <tr>
                      <th>Kod</th>
                      <th>Nazwa</th>
                      <th>Typ</th>
                      <th style="width: 100px;">Warto≈õƒá</th>
                      <th style="width: 100px;">U≈ºycia</th>
                      <th style="width: 100px;">Min. kwota</th>
                      <th style="width: 120px;">Wa≈ºno≈õƒá</th>
                      <th style="width: 80px;">Status</th>
                      <th style="width: 100px;">Akcje</th>
                    </tr>
                  </thead>
                  <tbody id="shopDiscountsTableBody">
                    <tr><td colspan="9" style="text-align: center; padding: 24px;">≈Åadowanie kod√≥w...</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- Tab: Shipping -->
        <div class="admin-tab-content" id="shopTabShipping" hidden>
          <!-- Shipping Zones -->
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header" style="display: flex; justify-content: space-between; align-items: center;">
              <h3>üåç Strefy wysy≈Çki</h3>
              <button class="btn-primary" onclick="showShippingZoneForm()">‚ûï Nowa strefa</button>
            </div>
            <div class="admin-card-body">
              <p style="font-size: 12px; color: var(--admin-text-muted); margin-bottom: 16px;">Strefy okre≈õlajƒÖ kraje/regiony i dostƒôpne metody dostawy. Ka≈ºda strefa mo≈ºe mieƒá wiele metod dostawy.</p>
              <div id="shopShippingZonesContainer">
                <p style="text-align: center; padding: 24px;">Loading shipping zones...</p>
              </div>
            </div>
          </div>

          <!-- Shipping Classes -->
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header" style="display: flex; justify-content: space-between; align-items: center;">
              <h3>üì¶ Klasy wysy≈Çkowe</h3>
              <button class="btn-secondary" onclick="showShippingClassForm()">‚ûï Nowa klasa</button>
            </div>
            <div class="admin-card-body">
              <p style="font-size: 12px; color: var(--admin-text-muted); margin-bottom: 16px;">Klasy wysy≈Çkowe pozwalajƒÖ na dodatkowe op≈Çaty dla specjalnych produkt√≥w (ciƒô≈ºkie, kruche, itp.).</p>
              <table class="admin-table">
                <thead>
                  <tr>
                    <th>Nazwa</th>
                    <th>Dodatkowy koszt</th>
                    <th>Koszt/kg</th>
                    <th>Handling</th>
                    <th>Opcje</th>
                    <th style="width: 100px;">Akcje</th>
                  </tr>
                </thead>
                <tbody id="shopShippingClassesTableBody">
                  <tr><td colspan="6" style="text-align: center;">Loading...</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Tax Classes -->
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header" style="display: flex; justify-content: space-between; align-items: center;">
              <h3>üíµ Klasy podatkowe (VAT)</h3>
              <button class="btn-secondary" onclick="showTaxClassForm()">‚ûï Nowa klasa</button>
            </div>
            <div class="admin-card-body">
              <p style="font-size: 12px; color: var(--admin-text-muted); margin-bottom: 16px;">Klasy podatkowe okre≈õlajƒÖ stawki VAT dla r√≥≈ºnych typ√≥w produkt√≥w.</p>
              <table class="admin-table">
                <thead>
                  <tr>
                    <th>Nazwa</th>
                    <th>Opis</th>
                    <th>Domy≈õlna</th>
                    <th>Aktywna</th>
                    <th style="width: 100px;">Akcje</th>
                  </tr>
                </thead>
                <tbody id="shopTaxClassesTableBody">
                  <tr><td colspan="5" style="text-align: center;">Loading...</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Customer Groups -->
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header" style="display: flex; justify-content: space-between; align-items: center;">
              <h3>üë• Grupy klient√≥w</h3>
              <button class="btn-secondary" onclick="showCustomerGroupForm()">‚ûï Nowa grupa</button>
            </div>
            <div class="admin-card-body">
              <p style="font-size: 12px; color: var(--admin-text-muted); margin-bottom: 16px;">Grupy klient√≥w pozwalajƒÖ na r√≥≈ºne rabaty dla VIP, hurtownik√≥w, itp.</p>
              <table class="admin-table">
                <thead>
                  <tr>
                    <th>Nazwa</th>
                    <th>Rabat</th>
                    <th>Min. zam√≥wie≈Ñ</th>
                    <th>Domy≈õlna</th>
                    <th>Aktywna</th>
                    <th style="width: 100px;">Akcje</th>
                  </tr>
                </thead>
                <tbody id="shopCustomerGroupsTableBody">
                  <tr><td colspan="6" style="text-align: center;">Loading...</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Product Attributes -->
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header" style="display: flex; justify-content: space-between; align-items: center;">
              <h3>üé® Atrybuty produkt√≥w</h3>
              <button class="btn-secondary" onclick="showAttributeForm()">‚ûï Nowy atrybut</button>
            </div>
            <div class="admin-card-body">
              <p style="font-size: 12px; color: var(--admin-text-muted); margin-bottom: 16px;">Atrybuty u≈ºywane do tworzenia wariant√≥w produkt√≥w (rozmiar, kolor, materia≈Ç).</p>
              <table class="admin-table">
                <thead>
                  <tr>
                    <th>Nazwa</th>
                    <th>Typ</th>
                    <th>Warto≈õci</th>
                    <th>Filtrowalny</th>
                    <th>Do wariant√≥w</th>
                    <th style="width: 100px;">Akcje</th>
                  </tr>
                </thead>
                <tbody id="shopAttributesTableBody">
                  <tr><td colspan="6" style="text-align: center;">Loading...</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Tab: Settings -->
        <div class="admin-tab-content" id="shopTabSettings" hidden>
          <!-- General Settings -->
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header">
              <h3>‚öôÔ∏è Ustawienia og√≥lne</h3>
              <p style="color: var(--admin-text-muted); font-size: 13px; margin-top: 4px;">Podstawowa konfiguracja sklepu</p>
            </div>
            <div class="admin-card-body">
              <form id="shopSettingsForm">
                <div class="admin-form-grid" style="grid-template-columns: repeat(2, 1fr); gap: 16px;">
                  <label class="admin-form-field">
                    <span>Nazwa sklepu</span>
                    <input type="text" id="shopSettingName" placeholder="WakacjeCypr Shop">
                    <small style="color: var(--admin-text-muted);">Wy≈õwietlana w emailach i na fakturach</small>
                  </label>
                  <label class="admin-form-field">
                    <span>Email administratora</span>
                    <input type="email" id="shopSettingEmail" placeholder="shop@wakacjecypr.com">
                    <small style="color: var(--admin-text-muted);">Powiadomienia o zam√≥wieniach</small>
                  </label>
                  <label class="admin-form-field">
                    <span>Prefiks numeru zam√≥wienia</span>
                    <input type="text" id="shopSettingOrderPrefix" placeholder="WC" maxlength="10">
                    <small style="color: var(--admin-text-muted);">Np. WC-00001</small>
                  </label>
                  <label class="admin-form-field">
                    <span>Waluta</span>
                    <select id="shopSettingCurrency" class="form-control">
                      <option value="EUR">EUR (‚Ç¨)</option>
                      <option value="PLN">PLN (z≈Ç)</option>
                      <option value="USD">USD ($)</option>
                      <option value="GBP">GBP (¬£)</option>
                    </select>
                  </label>
                </div>
                <div style="margin-top: 24px;">
                  <button type="submit" class="btn-primary">üíæ Zapisz ustawienia</button>
                </div>
              </form>
            </div>
          </div>

          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header">
              <h3>üßæ VAT</h3>
              <p style="color: var(--admin-text-muted); font-size: 13px; margin-top: 4px;">Ustawienia podatku VAT per kraj i per produkt</p>
            </div>
            <div class="admin-card-body">
              <div style="display: flex; flex-direction: column; gap: 12px;">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                  <input type="checkbox" id="shopSettingTaxEnabled" style="width: 18px; height: 18px;">
                  <div>
                    <span style="font-weight: 500;">W≈ÇƒÖcz VAT</span>
                    <small style="display: block; color: var(--admin-text-muted);">Je≈õli wy≈ÇƒÖczone, VAT nie bƒôdzie naliczany i nie bƒôdzie pokazywany w checkout</small>
                  </div>
                </label>
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                  <input type="checkbox" id="shopSettingTaxIncludedInPrice" style="width: 18px; height: 18px;" checked>
                  <div>
                    <span style="font-weight: 500;">Ceny zawierajƒÖ VAT (domy≈õlnie)</span>
                    <small style="display: block; color: var(--admin-text-muted);">Per produkt mo≈ºna nadpisaƒá (net/gross)</small>
                  </div>
                </label>
                <label class="admin-form-field" style="max-width: 320px;">
                  <span>VAT liczony na podstawie</span>
                  <select id="shopSettingTaxBasedOn" class="form-control">
                    <option value="shipping">Adres dostawy</option>
                    <option value="billing">Adres p≈Çatnika</option>
                  </select>
                </label>
              </div>
            </div>
          </div>

          <!-- XP & Gamification -->
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header">
              <h3>üéÆ XP i Gamifikacja</h3>
              <p style="color: var(--admin-text-muted); font-size: 13px; margin-top: 4px;">Nagradzaj klient√≥w punktami do≈õwiadczenia</p>
            </div>
            <div class="admin-card-body">
              <div class="admin-form-grid" style="grid-template-columns: repeat(2, 1fr); gap: 16px;">
                <label class="admin-form-field">
                  <span>XP za ka≈ºde Euro</span>
                  <input type="number" id="shopSettingXpPerEuro" min="0" value="1">
                  <small style="color: var(--admin-text-muted);">Ile XP za 1‚Ç¨ zakup√≥w</small>
                </label>
                <label class="admin-form-field">
                  <span>XP za recenzjƒô</span>
                  <input type="number" id="shopSettingXpPerReview" min="0" value="50">
                  <small style="color: var(--admin-text-muted);">Bonus za napisanie recenzji</small>
                </label>
              </div>
              <div style="margin-top: 16px; display: flex; flex-direction: column; gap: 12px;">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                  <input type="checkbox" id="shopSettingXpEnabled" checked style="width: 18px; height: 18px;">
                  <div>
                    <span style="font-weight: 500;">W≈ÇƒÖcz system XP</span>
                    <small style="display: block; color: var(--admin-text-muted);">Klienci zdobywajƒÖ XP za zakupy</small>
                  </div>
                </label>
              </div>
            </div>
          </div>

          <!-- Reviews & Social -->
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header">
              <h3>‚≠ê Recenzje i spo≈Çeczno≈õƒá</h3>
              <p style="color: var(--admin-text-muted); font-size: 13px; margin-top: 4px;">ZarzƒÖdzaj opiniami klient√≥w</p>
            </div>
            <div class="admin-card-body">
              <div style="display: flex; flex-direction: column; gap: 12px;">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                  <input type="checkbox" id="shopSettingReviewsEnabled" checked style="width: 18px; height: 18px;">
                  <div>
                    <span style="font-weight: 500;">W≈ÇƒÖcz recenzje produkt√≥w</span>
                    <small style="display: block; color: var(--admin-text-muted);">Klienci mogƒÖ oceniaƒá produkty</small>
                  </div>
                </label>
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                  <input type="checkbox" id="shopSettingReviewsModeration" style="width: 18px; height: 18px;">
                  <div>
                    <span style="font-weight: 500;">Moderacja recenzji</span>
                    <small style="display: block; color: var(--admin-text-muted);">Recenzje wymagajƒÖ zatwierdzenia</small>
                  </div>
                </label>
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                  <input type="checkbox" id="shopSettingReviewsVerifiedOnly" style="width: 18px; height: 18px;">
                  <div>
                    <span style="font-weight: 500;">Tylko zweryfikowani kupujƒÖcy</span>
                    <small style="display: block; color: var(--admin-text-muted);">Tylko klienci kt√≥rzy kupili produkt</small>
                  </div>
                </label>
              </div>
            </div>
          </div>

          <!-- Notifications -->
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header">
              <h3>üìß Powiadomienia</h3>
              <p style="color: var(--admin-text-muted); font-size: 13px; margin-top: 4px;">Automatyczne emaile do klient√≥w</p>
            </div>
            <div class="admin-card-body">
              <div style="display: flex; flex-direction: column; gap: 12px;">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                  <input type="checkbox" id="shopSettingAbandonedCart" checked style="width: 18px; height: 18px;">
                  <div>
                    <span style="font-weight: 500;">Przypomnienia o porzuconym koszyku</span>
                    <small style="display: block; color: var(--admin-text-muted);">Email po 24h od porzucenia koszyka</small>
                  </div>
                </label>
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                  <input type="checkbox" id="shopSettingOrderConfirmation" checked style="width: 18px; height: 18px;">
                  <div>
                    <span style="font-weight: 500;">Potwierdzenie zam√≥wienia</span>
                    <small style="display: block; color: var(--admin-text-muted);">Email po z≈Ço≈ºeniu zam√≥wienia</small>
                  </div>
                </label>
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                  <input type="checkbox" id="shopSettingShippingNotification" checked style="width: 18px; height: 18px;">
                  <div>
                    <span style="font-weight: 500;">Powiadomienie o wysy≈Çce</span>
                    <small style="display: block; color: var(--admin-text-muted);">Email gdy zam√≥wienie wys≈Çane</small>
                  </div>
                </label>
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                  <input type="checkbox" id="shopSettingReviewReminder" style="width: 18px; height: 18px;">
                  <div>
                    <span style="font-weight: 500;">Pro≈õba o recenzjƒô</span>
                    <small style="display: block; color: var(--admin-text-muted);">Email 7 dni po dostarczeniu</small>
                  </div>
                </label>
              </div>
            </div>
          </div>

          <!-- Inventory -->
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header">
              <h3>üì¶ Magazyn</h3>
              <p style="color: var(--admin-text-muted); font-size: 13px; margin-top: 4px;">Ustawienia zarzƒÖdzania stanem magazynowym</p>
            </div>
            <div class="admin-card-body">
              <div class="admin-form-grid" style="grid-template-columns: repeat(2, 1fr); gap: 16px;">
                <label class="admin-form-field">
                  <span>Pr√≥g niskiego stanu</span>
                  <input type="number" id="shopSettingLowStockThreshold" min="0" value="5">
                  <small style="color: var(--admin-text-muted);">Alert gdy mniej ni≈º X sztuk</small>
                </label>
                <label class="admin-form-field">
                  <span>Rezerwacja koszyka (min)</span>
                  <input type="number" id="shopSettingCartReservation" min="0" value="15">
                  <small style="color: var(--admin-text-muted);">Jak d≈Çugo rezerwowaƒá produkty w koszyku</small>
                </label>
              </div>
              <div style="margin-top: 16px; display: flex; flex-direction: column; gap: 12px;">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                  <input type="checkbox" id="shopSettingHideOutOfStock" style="width: 18px; height: 18px;">
                  <div>
                    <span style="font-weight: 500;">Ukryj niedostƒôpne produkty</span>
                    <small style="display: block; color: var(--admin-text-muted);">Nie pokazuj produkt√≥w z zerowym stanem</small>
                  </div>
                </label>
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                  <input type="checkbox" id="shopSettingBackorders" style="width: 18px; height: 18px;">
                  <div>
                    <span style="font-weight: 500;">Pozw√≥l na backorder</span>
                    <small style="display: block; color: var(--admin-text-muted);">Zam√≥wienia na produkty niedostƒôpne</small>
                  </div>
                </label>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Partners View -->
      <section class="admin-view" id="viewPartners" hidden>
        <header class="admin-view-header">
          <div>
            <h2>Partners</h2>
            <p class="admin-view-subtitle">Manage partner accounts and monitor fulfillments</p>
          </div>
        </header>

        <div class="admin-tabs" style="margin-top: 24px;">
          <button class="admin-tab active" data-partners-tab="list">üë• Partners</button>
          <button class="admin-tab" data-partners-tab="emails">üìß Emails</button>
        </div>

        <div class="admin-tab-content active" id="partnersTabList">

          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header" style="display: flex; justify-content: space-between; align-items: center;">
              <h3>Partner list</h3>
              <div style="display: flex; gap: 8px;">
                <button class="btn btn-primary" id="btnAddPartner">+ Add partner</button>
                <input id="partnersSearch" class="form-control" type="text" placeholder="Search partners..." style="width: 240px;" />
                <select id="partnersStatusFilter" class="form-control" style="width: 160px;">
                  <option value="">All statuses</option>
                  <option value="active">Active</option>
                  <option value="suspended">Suspended</option>
                </select>
                <button class="btn-secondary" id="btnRefreshPartners">üîÑ Refresh</button>
              </div>
            </div>
            <div class="admin-card-body">
              <div class="admin-table-container" aria-label="Partner list">
                <table class="admin-table">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Slug</th>
                      <th>Status</th>
                      <th>Vendor</th>
                      <th>Users</th>
                      <th>Pending</th>
                      <th>Rejected</th>
                      <th>Accepted</th>
                      <th style="text-align: right;">Actions</th>
                    </tr>
                  </thead>
                  <tbody id="partnersTableBody">
                    <tr><td colspan="9" style="text-align:center; padding: 24px;">Loading partners...</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <div class="admin-tab-content" id="partnersTabEmails" hidden>
          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header" style="display: flex; justify-content: space-between; align-items: center;">
              <div>
                <h3>Deposit settings</h3>
                <p style="color: var(--admin-text-muted); font-size: 13px; margin-top: 4px;">Control whether deposits are required and configure deposit rules</p>
              </div>
              <button class="btn-secondary" id="btnRefreshDepositSettings">üîÑ Refresh</button>
            </div>
            <div class="admin-card-body">
              <div style="display: flex; flex-direction: column; gap: 12px;">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                  <input type="checkbox" id="depositEnabledToggle" style="width: 18px; height: 18px;">
                  <div>
                    <span style="font-weight: 500;">Require deposit before revealing customer contact</span>
                    <small style="display: block; color: var(--admin-text-muted);">If disabled, partner acceptance immediately reveals contact and sets fulfillment to accepted</small>
                  </div>
                </label>
                <div style="display: flex; justify-content: flex-end;">
                  <button class="btn btn-primary" id="btnSaveDepositSettings">üíæ Save</button>
                </div>
              </div>
            </div>
          </div>

          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header" style="display: flex; justify-content: space-between; align-items: center;">
              <div>
                <h3>Default deposit rules</h3>
                <p style="color: var(--admin-text-muted); font-size: 13px; margin-top: 4px;">Default rules used when no override is set for a specific resource</p>
              </div>
              <button class="btn btn-primary" id="btnSaveDepositRules">üíæ Save rules</button>
            </div>
            <div class="admin-card-body">
              <div class="admin-form-grid" style="grid-template-columns: 140px 1fr 140px 140px 160px 120px; gap: 10px; align-items: end;">
                <div style="font-size: 12px; color: var(--admin-text-muted);">Type</div>
                <div style="font-size: 12px; color: var(--admin-text-muted);">Mode</div>
                <div style="font-size: 12px; color: var(--admin-text-muted);">Amount</div>
                <div style="font-size: 12px; color: var(--admin-text-muted);">Currency</div>
                <div style="font-size: 12px; color: var(--admin-text-muted);">Include children</div>
                <div style="font-size: 12px; color: var(--admin-text-muted);">Enabled</div>

                <div style="font-weight: 600;">Cars</div>
                <select id="depositRuleModeCars" class="form-control">
                  <option value="per_day">Per day</option>
                  <option value="per_person">Per person</option>
                  <option value="flat">Flat</option>
                  <option value="percent_total">Percent of total</option>
                </select>
                <input id="depositRuleAmountCars" type="number" step="0.01" min="0" class="form-control" />
                <input id="depositRuleCurrencyCars" type="text" class="form-control" value="EUR" />
                <label style="display:flex; align-items:center; gap: 8px;">
                  <input id="depositRuleIncludeChildrenCars" type="checkbox" style="width: 18px; height: 18px;" />
                  <span style="font-size: 13px;">Include</span>
                </label>
                <label style="display:flex; align-items:center; gap: 8px;">
                  <input id="depositRuleEnabledCars" type="checkbox" style="width: 18px; height: 18px;" />
                  <span style="font-size: 13px;">Enabled</span>
                </label>

                <div style="font-weight: 600;">Trips</div>
                <select id="depositRuleModeTrips" class="form-control">
                  <option value="per_day">Per day</option>
                  <option value="per_person">Per person</option>
                  <option value="flat">Flat</option>
                  <option value="percent_total">Percent of total</option>
                </select>
                <input id="depositRuleAmountTrips" type="number" step="0.01" min="0" class="form-control" />
                <input id="depositRuleCurrencyTrips" type="text" class="form-control" value="EUR" />
                <label style="display:flex; align-items:center; gap: 8px;">
                  <input id="depositRuleIncludeChildrenTrips" type="checkbox" style="width: 18px; height: 18px;" />
                  <span style="font-size: 13px;">Include</span>
                </label>
                <label style="display:flex; align-items:center; gap: 8px;">
                  <input id="depositRuleEnabledTrips" type="checkbox" style="width: 18px; height: 18px;" />
                  <span style="font-size: 13px;">Enabled</span>
                </label>

                <div style="font-weight: 600;">Hotels</div>
                <select id="depositRuleModeHotels" class="form-control">
                  <option value="per_day">Per day</option>
                  <option value="per_person">Per person</option>
                  <option value="flat">Flat</option>
                  <option value="percent_total">Percent of total</option>
                </select>
                <input id="depositRuleAmountHotels" type="number" step="0.01" min="0" class="form-control" />
                <input id="depositRuleCurrencyHotels" type="text" class="form-control" value="EUR" />
                <label style="display:flex; align-items:center; gap: 8px;">
                  <input id="depositRuleIncludeChildrenHotels" type="checkbox" style="width: 18px; height: 18px;" />
                  <span style="font-size: 13px;">Include</span>
                </label>
                <label style="display:flex; align-items:center; gap: 8px;">
                  <input id="depositRuleEnabledHotels" type="checkbox" style="width: 18px; height: 18px;" />
                  <span style="font-size: 13px;">Enabled</span>
                </label>
              </div>
            </div>
          </div>

          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header" style="display: flex; justify-content: space-between; align-items: center;">
              <div>
                <h3>Deposit overrides</h3>
                <p style="color: var(--admin-text-muted); font-size: 13px; margin-top: 4px;">Override deposit rule for a specific car offer / trip / hotel</p>
              </div>
              <button class="btn-secondary" id="btnRefreshDepositOverrides">üîÑ Refresh</button>
            </div>
            <div class="admin-card-body">
              <div class="admin-form-grid" style="grid-template-columns: 160px 1fr 260px; gap: 10px; align-items: end;">
                <label class="admin-form-field" style="margin: 0;">
                  <span>Type</span>
                  <select id="depositOverrideType" class="form-control">
                    <option value="cars">Cars</option>
                    <option value="trips">Trips</option>
                    <option value="hotels">Hotels</option>
                  </select>
                </label>
                <label class="admin-form-field" style="margin: 0;">
                  <span>Search resource</span>
                  <input id="depositOverrideSearch" type="text" placeholder="e.g. boat, ayia napa" class="form-control" />
                </label>
                <label class="admin-form-field" style="margin: 0;">
                  <span>Resource</span>
                  <select id="depositOverrideResourceSelect" class="form-control"></select>
                </label>
              </div>

              <div class="admin-form-grid" style="grid-template-columns: 1fr 140px 140px 160px 120px 140px; gap: 10px; align-items: end; margin-top: 12px;">
                <label class="admin-form-field" style="margin: 0;">
                  <span>Mode</span>
                  <select id="depositOverrideMode" class="form-control">
                    <option value="per_day">Per day</option>
                    <option value="per_person">Per person</option>
                    <option value="flat">Flat</option>
                    <option value="percent_total">Percent of total</option>
                  </select>
                </label>
                <label class="admin-form-field" style="margin: 0;">
                  <span>Amount</span>
                  <input id="depositOverrideAmount" type="number" step="0.01" min="0" class="form-control" />
                </label>
                <label class="admin-form-field" style="margin: 0;">
                  <span>Currency</span>
                  <input id="depositOverrideCurrency" type="text" class="form-control" value="EUR" />
                </label>
                <label style="display:flex; align-items:center; gap: 8px;">
                  <input id="depositOverrideIncludeChildren" type="checkbox" style="width: 18px; height: 18px;" />
                  <span style="font-size: 13px;">Include children</span>
                </label>
                <label style="display:flex; align-items:center; gap: 8px;">
                  <input id="depositOverrideEnabled" type="checkbox" style="width: 18px; height: 18px;" checked />
                  <span style="font-size: 13px;">Enabled</span>
                </label>
                <button class="btn btn-primary" id="btnSaveDepositOverride" type="button">üíæ Save override</button>
              </div>

              <div class="admin-table-container" style="margin-top: 16px;">
                <table class="admin-table">
                  <thead>
                    <tr>
                      <th>Type</th>
                      <th>Resource</th>
                      <th>Mode</th>
                      <th style="text-align: right;">Amount</th>
                      <th>Currency</th>
                      <th>Enabled</th>
                      <th style="text-align: right;">Actions</th>
                    </tr>
                  </thead>
                  <tbody id="depositOverridesTableBody">
                    <tr><td colspan="7" style="text-align:center; padding: 24px; color: var(--admin-text-muted);">‚Äî</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="admin-card" style="margin-top: 16px;">
            <div class="admin-card-header" style="display: flex; justify-content: space-between; align-items: center;">
              <div>
                <h3>Deposit requests</h3>
                <p style="color: var(--admin-text-muted); font-size: 13px; margin-top: 4px;">Review created payment links and paid/pending statuses</p>
              </div>
              <button class="btn-secondary" id="btnRefreshDepositRequests">üîÑ Refresh</button>
            </div>
            <div class="admin-card-body">
              <div style="display:flex; gap: 12px; flex-wrap: wrap; align-items: end; margin-bottom: 12px;">
                <label class="admin-form-field" style="margin: 0;">
                  <span>Status</span>
                  <select id="depositRequestsStatus" class="form-control" style="min-width: 180px;">
                    <option value="">All</option>
                    <option value="pending">Pending</option>
                    <option value="paid">Paid</option>
                    <option value="expired">Expired</option>
                    <option value="cancelled">Cancelled</option>
                  </select>
                </label>
                <label class="admin-form-field" style="margin: 0; flex: 1; min-width: 260px;">
                  <span>Search</span>
                  <input id="depositRequestsSearch" class="form-control" type="text" placeholder="booking id, session id, email" />
                </label>
              </div>

              <div class="admin-table-container">
                <table class="admin-table">
                  <thead>
                    <tr>
                      <th>Created</th>
                      <th>Type</th>
                      <th>Reference</th>
                      <th>Customer</th>
                      <th style="text-align: right;">Amount</th>
                      <th>Status</th>
                      <th>Paid at</th>
                      <th>Stripe session</th>
                      <th style="text-align: right;">Actions</th>
                    </tr>
                  </thead>
                  <tbody id="depositRequestsTableBody">
                    <tr><td colspan="9" style="text-align:center; padding: 24px; color: var(--admin-text-muted);">‚Äî</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Calendars View -->
      <section class="admin-view" id="viewCalendars" hidden>
        <header class="admin-view-header">
          <div>
            <h2>Calendars</h2>
            <p class="admin-view-subtitle">Admin view of partner availability blocks</p>
          </div>
        </header>

        <div class="admin-card" style="margin-top: 16px;">
          <div class="admin-card-header" style="display: flex; justify-content: space-between; align-items: center;">
            <h3>Availability blocks</h3>
            <div style="display: flex; gap: 8px;">
              <select id="calendarsPartnerFilter" class="form-control" style="width: 220px;">
                <option value="">All partners</option>
              </select>
              <select id="calendarsResourceTypeFilter" class="form-control" style="width: 180px;" hidden>
                <option value="">All resource types</option>
                <option value="shop">Shop</option>
                <option value="cars">Cars</option>
                <option value="trips">Trips</option>
                <option value="hotels">Hotels</option>
              </select>
              <button class="btn-secondary" id="btnRefreshCalendars">üîÑ Refresh</button>
            </div>
          </div>
          <div class="admin-card-body">
            <div style="display:flex; gap: 10px; flex-wrap: wrap; align-items: center; margin-bottom: 12px;">
              <div style="min-width: 220px;">
                <div style="font-size: 12px; color: var(--admin-text-muted); margin-bottom: 6px;">Resource type</div>
                <div id="adminCalendarsResourceTypePanels" style="display:flex; gap: 8px; flex-wrap: wrap;"></div>
              </div>
              <div style="flex: 1 1 340px; min-width: 260px;">
                <div style="font-size: 12px; color: var(--admin-text-muted); margin-bottom: 6px;">Resource</div>
                <div id="adminCalendarsResourcePanels" style="display:flex; gap: 8px; flex-wrap: wrap;"></div>
              </div>
            </div>

            <div class="admin-card" style="padding: 12px; margin: 0 0 16px;">
              <div style="display:flex; align-items:center; justify-content:space-between; gap: 10px; flex-wrap: wrap;">
                <label style="display:flex; gap: 10px; align-items:center; font-weight: 700;">
                  <input id="adminCalendarsBulkMode" type="checkbox" />
                  <span>Bulk apply</span>
                </label>
              </div>
              <div style="display:flex; gap: 8px; flex-wrap: wrap; align-items:center; margin-top: 10px;">
                <button id="btnAdminCalendarsSelectAllType" class="btn-secondary" type="button">Select all (type)</button>
                <button id="btnAdminCalendarsClearAll" class="btn-secondary" type="button">Clear all</button>
              </div>
              <div id="adminCalendarsSelectionSummary" style="margin-top: 8px; color: var(--admin-text-muted); font-size: 12px;"></div>
            </div>

            <form id="calendarsCreateBlockForm" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; align-items: end; margin-bottom: 16px;">
              <label class="admin-form-field" style="margin: 0;" hidden>
                <span>Partner</span>
                <select id="calendarsCreatePartner" class="form-control" required>
                  <option value="">Select partner</option>
                </select>
              </label>
              <label class="admin-form-field" style="margin: 0;" hidden>
                <span>Type</span>
                <select id="calendarsCreateType" class="form-control" required>
                  <option value="">Select type</option>
                  <option value="shop">Shop</option>
                  <option value="cars">Cars</option>
                  <option value="trips">Trips</option>
                  <option value="hotels">Hotels</option>
                </select>
              </label>
              <label class="admin-form-field" style="margin: 0;" hidden>
                <span>Resource</span>
                <select id="calendarsCreateResource" class="form-control" required>
                  <option value="">Select resource</option>
                </select>
              </label>
              <label class="admin-form-field" style="margin: 0;">
                <span>Start</span>
                <input id="calendarsCreateStart" class="form-control" type="date" required />
              </label>
              <label class="admin-form-field" style="margin: 0;">
                <span>End</span>
                <input id="calendarsCreateEnd" class="form-control" type="date" required />
              </label>
              <label class="admin-form-field" style="grid-column: 1 / -2; margin: 0;">
                <span>Note</span>
                <input id="calendarsCreateNote" class="form-control" type="text" placeholder="Optional" />
              </label>
              <button class="btn btn-primary" type="submit" style="height: 42px;">Add block</button>
            </form>

            <div class="admin-table-container">
              <table class="admin-table">
                <thead>
                  <tr>
                    <th>Partner</th>
                    <th>Resource type</th>
                    <th>Resource ID</th>
                    <th>Start</th>
                    <th>End</th>
                    <th>Note</th>
                    <th style="text-align: right;">Actions</th>
                  </tr>
                </thead>
                <tbody id="calendarsTableBody">
                  <tr><td colspan="7" style="text-align:center; padding: 24px;">Loading availability...</td></tr>
                </tbody>
              </table>
            </div>

            <div style="margin-top: 18px; padding-top: 16px; border-top: 1px solid rgba(255,255,255,0.08);">
              <div style="display: flex; gap: 8px; flex-wrap: wrap; align-items: center; margin-bottom: 12px;">
                <select id="calendarsResourceIdFilter" class="form-control" style="min-width: 280px;">
                  <option value="">Select resource</option>
                </select>
                <button class="btn-secondary" id="btnCalendarsPrevMonth" type="button">‚óÄ</button>
                <input id="calendarsMonthInput" class="form-control" type="month" style="width: 170px;" />
                <button class="btn-secondary" id="btnCalendarsNextMonth" type="button">‚ñ∂</button>
              </div>
              <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px; color: var(--admin-text-muted); font-size: 12px;">
                <span style="display: inline-flex; align-items: center; gap: 6px;"><span style="display:inline-block;width:12px;height:12px;border-radius:3px;background:#22c55e;"></span>Free</span>
                <span style="display: inline-flex; align-items: center; gap: 6px;"><span style="display:inline-block;width:12px;height:12px;border-radius:3px;background:#6b7280;"></span>Busy</span>
              </div>
              <div id="calendarsMonthGrid" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px;"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Settings View -->
      <section class="admin-view" id="viewSettings" hidden>
        <header class="admin-view-header">
          <h2>Settings</h2>
          <p class="admin-view-subtitle">Configure admin panel settings</p>
        </header>
        <div class="admin-card" style="max-width: 720px;">
          <div class="admin-card-header">
            <h3>üîî Powiadomienia e-mail</h3>
            <p style="color: var(--admin-text-muted); font-size: 13px; margin-top: 4px;">Email admina do powiadomie≈Ñ o nowych rezerwacjach (auta/hotele/wycieczki) oraz op≈Çaconych zam√≥wieniach w sklepie</p>
          </div>
          <div class="admin-card-body">
            <form id="adminNotificationSettingsForm">
              <label class="admin-form-field">
                <span>Email(e) administratora</span>
                <input type="text" id="adminNotificationEmail" placeholder="admin@twojadomena.com">
                <small style="color: var(--admin-text-muted);">Mo≈ºesz podaƒá kilka adres√≥w, rozdzielajƒÖc je przecinkami.</small>
              </label>
              <div style="display: flex; justify-content: flex-end; margin-top: 16px;">
                <button type="submit" class="btn btn-primary">Zapisz</button>
              </div>
            </form>
          </div>
        </div>
      </section>

    </main>
  </div>

  <!-- POI Detail Modal -->
  <div class="admin-modal" id="poiDetailModal" hidden>
    <div class="admin-modal-overlay" id="poiDetailModalOverlay"></div>
    <div class="admin-modal-content">
      <header class="admin-modal-header">
        <h3 id="poiDetailTitle">POI Details</h3>
        <button class="btn-modal-close" id="btnClosePoiDetail">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <div class="admin-modal-body" id="poiDetailContent">
        <p>Loading POI details...</p>
      </div>
    </div>
  </div>

  <!-- POI Form Modal -->
  <div class="admin-modal" id="poiFormModal" hidden>
    <div class="admin-modal-overlay" id="poiFormModalOverlay"></div>
    <div class="admin-modal-content">
      <header class="admin-modal-header">
        <h3 id="poiFormTitle">New POI</h3>
        <button class="btn-modal-close" id="btnClosePoiForm">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <div class="admin-modal-body">
        <form id="poiForm" class="poi-form" novalidate>
          <div class="poi-form-warning" id="poiFormWarning" hidden>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
              <line x1="12" y1="9" x2="12" y2="13"/>
              <line x1="12" y1="17" x2="12" y2="17"/>
            </svg>
            <span id="poiFormWarningText"></span>
          </div>
          <!-- I18N Fields Container (rendered dynamically for Name/Description/Badge) -->
          <div id="poiI18nFieldsContainer" style="display: none; margin-bottom: 24px;">
            <div id="poiNameI18n"></div>
            <div id="poiDescriptionI18n"></div>
            <div id="poiBadgeI18n"></div>
          </div>

          <!-- Legacy Name/Description (fallback when not using i18n) -->
          <div id="poiLegacyNameDesc">
            <div class="admin-form-grid">
              <label class="admin-form-field">
                <span>Name *</span>
                <input type="text" id="poiName" name="name" placeholder="e.g. Kato Paphos Archaeological Park" />
              </label>
            </div>
            <label class="admin-form-field">
              <span>Description</span>
              <textarea id="poiDescription" name="description" rows="4" placeholder="Detailed description shown to players"></textarea>
            </label>
          </div>

          <!-- Technical Fields (ALWAYS VISIBLE) -->
          <div class="admin-form-grid">
            <label class="admin-form-field">
              <span>Slug</span>
              <input type="text" id="poiSlug" name="slug" placeholder="auto-generated if empty" />
            </label>
            <label class="admin-form-field">
              <span>Category</span>
              <input type="text" id="poiCategory" name="category" placeholder="e.g. heritage" />
            </label>
            <label class="admin-form-field">
              <span>Status</span>
              <select id="poiStatus" name="status">
                <option value="published">Published</option>
                <option value="draft">Draft</option>
                <option value="hidden">Hidden</option>
              </select>
            </label>
            <label class="admin-form-field">
              <span>Latitude *</span>
              <input type="number" step="0.000001" id="poiLatitude" name="latitude" placeholder="34.755670" required />
            </label>
            <label class="admin-form-field">
              <span>Longitude *</span>
              <input type="number" step="0.000001" id="poiLongitude" name="longitude" placeholder="32.404170" required />
            </label>
            <label class="admin-form-field">
              <span>Radius (m)</span>
              <input type="number" min="50" max="500" step="10" id="poiRadius" name="radius" placeholder="150" />
            </label>
            <label class="admin-form-field">
              <span>XP Reward</span>
              <input type="number" min="0" max="1000" step="5" id="poiXP" name="xp" placeholder="100" />
            </label>
            <label class="admin-form-field">
              <span>Google Link</span>
              <input type="url" id="poiGoogleUrl" name="google_url" placeholder="https://maps.app.goo.gl/..." />
            </label>
            <label class="admin-form-field">
              <span>Tags</span>
              <input type="text" id="poiTags" name="tags" placeholder="Comma separated" />
            </label>
          </div>
          
          <div class="poi-form-error" id="poiFormError" hidden></div>
          <div class="poi-form-actions">
            <button type="button" class="btn-secondary" id="poiFormCancel">Cancel</button>
            <button type="submit" class="btn-primary" id="poiFormSubmit">Save POI</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- User Detail Modal -->
  <div class="admin-modal" id="userDetailModal" hidden>
    <div class="admin-modal-overlay" id="userDetailModalOverlay"></div>
    <div class="admin-modal-content">
      <header class="admin-modal-header">
        <h3>User Details</h3>
        <button class="btn-modal-close" id="btnCloseUserModal">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <div class="admin-modal-body" id="userDetailContent">
        <p>Loading user details...</p>
      </div>
    </div>
  </div>

  <div class="admin-modal" id="partnerFormModal" hidden>
    <div class="admin-modal-overlay" id="partnerFormModalOverlay"></div>
    <div class="admin-modal-content" style="max-width: 760px;">
      <header class="admin-modal-header">
        <h3 id="partnerFormTitle">Partner</h3>
        <button class="btn-modal-close" id="btnClosePartnerForm">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <div class="admin-modal-body">
        <form id="partnerForm" class="admin-form" novalidate>
          <input type="hidden" id="partnerFormId" />
          <div class="admin-form-grid" style="grid-template-columns: repeat(2, 1fr); gap: 16px;">
            <label class="admin-form-field">
              <span>Name</span>
              <input type="text" id="partnerFormName" required />
            </label>
            <label class="admin-form-field">
              <span>Slug</span>
              <input type="text" id="partnerFormSlug" required />
              <small style="color: var(--admin-text-muted);">Unique. Auto-generated from name if empty.</small>
            </label>
            <label class="admin-form-field">
              <span>Status</span>
              <select id="partnerFormStatus">
                <option value="active">Active</option>
                <option value="suspended">Suspended</option>
              </select>
            </label>
            <label class="admin-form-field">
              <span>Shop vendor</span>
              <select id="partnerFormVendor">
                <option value="">‚Äî</option>
              </select>
            </label>
          </div>

          <div style="margin-top: 16px;">
            <h4 style="margin: 0 0 10px; font-size: 13px; color: var(--admin-text-muted);">Permissions</h4>
            <div class="admin-form-grid" style="grid-template-columns: repeat(2, 1fr); gap: 12px;">
              <label class="admin-checkbox"><input type="checkbox" id="partnerFormCanManageShop" /><span>Can manage shop</span></label>
              <label class="admin-checkbox"><input type="checkbox" id="partnerFormCanManageCars" /><span>Can manage cars</span></label>
              <label class="admin-checkbox"><input type="checkbox" id="partnerFormCanManageTrips" /><span>Can manage trips</span></label>
              <label class="admin-checkbox"><input type="checkbox" id="partnerFormCanManageHotels" /><span>Can manage hotels</span></label>
              <label class="admin-checkbox"><input type="checkbox" id="partnerFormCanCreateOffers" /><span>Can create offers</span></label>
              <label class="admin-checkbox"><input type="checkbox" id="partnerFormCanViewStats" /><span>Can view stats</span></label>
              <label class="admin-checkbox"><input type="checkbox" id="partnerFormCanViewPayouts" /><span>Can view payouts</span></label>
            </div>
          </div>

          <div style="margin-top: 16px;">
            <h4 style="margin: 0 0 10px; font-size: 13px; color: var(--admin-text-muted);">Cars locations</h4>
            <div class="admin-form-grid" style="grid-template-columns: repeat(2, 1fr); gap: 12px;">
              <label class="admin-checkbox"><input type="checkbox" id="partnerFormCarsLocPaphos" /><span>Paphos</span></label>
              <label class="admin-checkbox"><input type="checkbox" id="partnerFormCarsLocLarnaca" /><span>Larnaca</span></label>
            </div>
            <small style="color: var(--admin-text-muted);">Select 1 or 2 locations. Used to show car offers in Partner Portal.</small>
          </div>

          <div style="margin-top: 18px; padding-top: 16px; border-top: 1px solid rgba(255,255,255,0.08);">
            <h4 style="margin: 0 0 8px; font-size: 13px; color: var(--admin-text-muted);">Assigned resources</h4>
            <div id="partnerAssignmentsHint" style="color: var(--admin-text-muted); font-size: 12px; margin-bottom: 10px;"></div>
            <div id="partnerAssignTabButtons" style="display:flex; gap: 8px; flex-wrap: wrap; margin-bottom: 12px;">
              <button type="button" class="btn-small btn-secondary" data-partner-assign-tab="cars">Cars</button>
              <button type="button" class="btn-small btn-secondary" data-partner-assign-tab="trips">Trips</button>
              <button type="button" class="btn-small btn-secondary" data-partner-assign-tab="hotels">Hotels</button>
              <button type="button" class="btn-small btn-secondary" data-partner-assign-tab="shop">Shop products</button>
            </div>

            <div id="partnerAssignPanels">
              <div data-partner-assign-panel="cars" style="display:none;">
                <div class="admin-form-grid" style="grid-template-columns: 1fr 240px 120px; gap: 10px; align-items: end;">
                  <label class="admin-form-field" style="margin: 0;">
                    <span>Search</span>
                    <input id="partnerAssignSearchCars" type="text" placeholder="e.g. Kia, Paphos" />
                  </label>
                  <label class="admin-form-field" style="margin: 0;">
                    <span>Result</span>
                    <select id="partnerAssignSelectCars" class="form-control"></select>
                  </label>
                  <button type="button" class="btn btn-primary" id="btnPartnerAssignAddCars">Add</button>
                </div>
                <div class="admin-table-container" style="margin-top: 12px;">
                  <table class="admin-table" style="margin:0;">
                    <thead>
                      <tr>
                        <th>Car offer</th>
                        <th style="width: 180px;">Location</th>
                        <th style="width: 120px; text-align: right;">Actions</th>
                      </tr>
                    </thead>
                    <tbody id="partnerAssignListCars">
                      <tr><td colspan="3" style="text-align:center; padding: 18px; color: var(--admin-text-muted);">‚Äî</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <div data-partner-assign-panel="trips" style="display:none;">
                <div class="admin-form-grid" style="grid-template-columns: 1fr 240px 120px; gap: 10px; align-items: end;">
                  <label class="admin-form-field" style="margin: 0;">
                    <span>Search</span>
                    <input id="partnerAssignSearchTrips" type="text" placeholder="e.g. boat, ayia napa" />
                  </label>
                  <label class="admin-form-field" style="margin: 0;">
                    <span>Result</span>
                    <select id="partnerAssignSelectTrips" class="form-control"></select>
                  </label>
                  <button type="button" class="btn btn-primary" id="btnPartnerAssignAddTrips">Add</button>
                </div>
                <div class="admin-table-container" style="margin-top: 12px;">
                  <table class="admin-table" style="margin:0;">
                    <thead>
                      <tr>
                        <th>Trip</th>
                        <th style="width: 220px;">Start city</th>
                        <th style="width: 120px; text-align: right;">Actions</th>
                      </tr>
                    </thead>
                    <tbody id="partnerAssignListTrips">
                      <tr><td colspan="3" style="text-align:center; padding: 18px; color: var(--admin-text-muted);">‚Äî</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <div data-partner-assign-panel="hotels" style="display:none;">
                <div class="admin-form-grid" style="grid-template-columns: 1fr 240px 120px; gap: 10px; align-items: end;">
                  <label class="admin-form-field" style="margin: 0;">
                    <span>Search</span>
                    <input id="partnerAssignSearchHotels" type="text" placeholder="e.g. limassol, resort" />
                  </label>
                  <label class="admin-form-field" style="margin: 0;">
                    <span>Result</span>
                    <select id="partnerAssignSelectHotels" class="form-control"></select>
                  </label>
                  <button type="button" class="btn btn-primary" id="btnPartnerAssignAddHotels">Add</button>
                </div>
                <div class="admin-table-container" style="margin-top: 12px;">
                  <table class="admin-table" style="margin:0;">
                    <thead>
                      <tr>
                        <th>Hotel</th>
                        <th style="width: 220px;">City</th>
                        <th style="width: 120px; text-align: right;">Actions</th>
                      </tr>
                    </thead>
                    <tbody id="partnerAssignListHotels">
                      <tr><td colspan="3" style="text-align:center; padding: 18px; color: var(--admin-text-muted);">‚Äî</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <div data-partner-assign-panel="shop" style="display:none;">
                <div id="partnerAssignShopMode" style="color: var(--admin-text-muted); font-size: 12px; margin-bottom: 10px;"></div>
                <div class="admin-form-grid" id="partnerAssignShopControls" style="grid-template-columns: 1fr 240px 120px; gap: 10px; align-items: end;">
                  <label class="admin-form-field" style="margin: 0;">
                    <span>Search</span>
                    <input id="partnerAssignSearchShop" type="text" placeholder="e.g. t-shirt" />
                  </label>
                  <label class="admin-form-field" style="margin: 0;">
                    <span>Result</span>
                    <select id="partnerAssignSelectShop" class="form-control"></select>
                  </label>
                  <button type="button" class="btn btn-primary" id="btnPartnerAssignAddShop">Add</button>
                </div>
                <div class="admin-table-container" style="margin-top: 12px;">
                  <table class="admin-table" style="margin:0;">
                    <thead>
                      <tr>
                        <th>Product</th>
                        <th style="width: 160px;">Status</th>
                        <th style="width: 120px; text-align: right;">Actions</th>
                      </tr>
                    </thead>
                    <tbody id="partnerAssignListShop">
                      <tr><td colspan="3" style="text-align:center; padding: 18px; color: var(--admin-text-muted);">‚Äî</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 18px;">
            <button type="button" class="btn btn-secondary" id="btnCancelPartnerForm">Cancel</button>
            <button type="submit" class="btn btn-primary" id="btnSavePartner">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div class="admin-modal" id="partnerUsersModal" hidden>
    <div class="admin-modal-overlay" id="partnerUsersModalOverlay"></div>
    <div class="admin-modal-content" style="max-width: 760px;">
      <header class="admin-modal-header">
        <h3 id="partnerUsersTitle">Partner users</h3>
        <button class="btn-modal-close" id="btnClosePartnerUsers">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <div class="admin-modal-body">
        <input type="hidden" id="partnerUsersPartnerId" />

        <div class="admin-form-grid" style="grid-template-columns: 1fr 160px 140px; gap: 10px; align-items: end;">
          <label class="admin-form-field" style="margin: 0;">
            <span>User ID</span>
            <input type="text" id="partnerUsersUserId" placeholder="UUID" />
          </label>
          <label class="admin-form-field" style="margin: 0;">
            <span>Role</span>
            <select id="partnerUsersRole">
              <option value="staff">Staff</option>
              <option value="owner">Owner</option>
            </select>
          </label>
          <button class="btn btn-primary" type="button" id="btnAddPartnerUser">Add user</button>
        </div>

        <div class="admin-table-container" style="margin-top: 16px;">
          <table class="admin-table">
            <thead>
              <tr>
                <th>User</th>
                <th>Role</th>
                <th style="text-align: right;">Actions</th>
              </tr>
            </thead>
            <tbody id="partnerUsersTableBody">
              <tr><td colspan="3" style="text-align:center; padding: 24px;">Loading...</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Comment Detail Modal -->
  <div class="admin-modal" id="commentDetailModal" hidden>
    <div class="admin-modal-overlay" id="commentDetailModalOverlay"></div>
    <div class="admin-modal-content admin-modal-content-large">
      <header class="admin-modal-header">
        <h3 id="commentDetailTitle">Comment Details</h3>
        <button class="btn-modal-close" id="btnCloseCommentDetail">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <div class="admin-modal-body" id="commentDetailContent">
        <p>Loading comment details...</p>
      </div>
    </div>
  </div>

  <!-- Comment Edit Modal -->
  <div class="admin-modal" id="commentEditModal" hidden>
    <div class="admin-modal-overlay" id="commentEditModalOverlay"></div>
    <div class="admin-modal-content">
      <header class="admin-modal-header">
        <h3 id="commentEditTitle">Edit Comment</h3>
        <button class="btn-modal-close" id="btnCloseCommentEdit">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <div class="admin-modal-body">
        <form id="commentEditForm" onsubmit="handleCommentEditSubmit(event); return false;">
          <div class="admin-form-field">
            <span>Comment Content *</span>
            <textarea 
              id="commentEditContent" 
              name="content" 
              rows="8" 
              required 
              placeholder="Enter comment content..."
              style="min-height: 150px;"
            ></textarea>
          </div>
          <div class="comment-edit-error" id="commentEditError" hidden></div>
          <div class="poi-form-actions">
            <button type="button" class="btn-secondary" id="commentEditCancel">Cancel</button>
            <button type="submit" class="btn-primary" id="commentEditSubmit">Save Changes</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Diagnostics Auto-Fix Modal -->
  <div class="admin-modal" id="diagnosticFixModal" hidden>
    <div class="admin-modal-overlay" id="diagnosticFixModalOverlay"></div>
    <div class="admin-modal-content">
      <header class="admin-modal-header">
        <h3 id="diagnosticFixTitle">Auto-Fix</h3>
        <button class="btn-modal-close" id="btnCloseDiagnosticFix">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <div class="admin-modal-body">
        <div style="display: grid; gap: 12px;">
          <p id="diagnosticFixDescription" style="color: var(--admin-text-muted);"></p>
          <label class="admin-form-field">
            <span>SQL to run in Supabase</span>
            <textarea id="diagnosticFixSql" rows="12" readonly style="font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;"></textarea>
          </label>
          <div class="poi-form-actions">
            <button type="button" class="btn-secondary" id="btnCopyDiagnosticSql">Copy SQL</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Fleet Car Add/Edit Modal -->
  <div class="admin-modal" id="fleetCarModal" hidden>
    <div class="admin-modal-overlay" id="fleetCarModalOverlay"></div>
    <div class="admin-modal-content" style="max-width: 900px;">
      <header class="admin-modal-header">
        <h3 id="fleetCarModalTitle">Add New Car</h3>
        <button class="btn-modal-close" id="btnCloseFleetCarModal">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <div class="admin-modal-body">
        <form id="fleetCarForm" novalidate onsubmit="handleFleetCarSubmit(event); return false;">
          <input type="hidden" id="fleetCarId" name="id">
          
          <!-- Basic Info -->
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
            <label class="admin-form-field">
              <span>Location *</span>
              <select id="fleetCarLocation" name="location" required onchange="handleLocationChange(this.value)">
                <option value="">Select location</option>
                <option value="larnaca">Larnaca</option>
                <option value="paphos">Paphos</option>
              </select>
            </label>

            <label class="admin-form-field">
              <span>Car Type *</span>
              <select id="fleetCarType" name="car_type" required>
                <option value="">Select type</option>
                <option value="Economy">Economy</option>
                <option value="Compact">Compact</option>
                <option value="Hybrid Economy">Hybrid Economy</option>
                <option value="Standard Sedan">Standard Sedan</option>
                <option value="SUV">SUV</option>
                <option value="MPV">MPV / Minivan</option>
                <option value="Luxury">Luxury</option>
                <option value="Premium">Premium</option>
              </select>
            </label>
          </div>

          <!-- I18N Fields Container (hidden by default) -->
          <div id="carI18nFields" style="display: none; margin-bottom: 16px;">
            <!-- Car Model - will be rendered dynamically -->
            <div id="carModelI18n"></div>
            
            <!-- Description - will be rendered dynamically -->
            <div id="carDescriptionI18n"></div>
          </div>

          <!-- Legacy Fields (visible by default) -->
          <div id="carLegacyFields" style="margin-bottom: 16px;">
            <label class="admin-form-field">
              <span>Car Model *</span>
              <input type="text" id="fleetCarModel" name="car_model" required placeholder="e.g., Toyota Yaris (2023)">
            </label>
            
            <label class="admin-form-field">
              <span>Description</span>
              <textarea id="fleetCarDescription" name="description" rows="3" placeholder="Short description of the car"></textarea>
            </label>
          </div>

          <!-- Pricing Section -->
          <div style="background: var(--admin-card-bg); border: 1px solid var(--admin-border); border-radius: 8px; padding: 16px; margin-bottom: 16px;">
            <h4 style="margin: 0 0 12px; font-size: 14px; font-weight: 600;">Pricing</h4>
            
            <!-- Larnaca Pricing (Single rate) -->
            <div id="larnacaPricing" hidden>
              <label class="admin-form-field">
                <span>Price per day (‚Ç¨) *</span>
                <input type="number" id="fleetCarPricePerDay" name="price_per_day" step="0.01" min="0" placeholder="e.g. 35.00">
              </label>
            </div>

            <!-- Paphos Pricing (Tiered) -->
            <div id="paphosPricing" hidden>
              <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px;">
                <label class="admin-form-field">
                  <span>3 days (‚Ç¨) *</span>
                  <input type="number" id="fleetCarPrice3Days" name="price_3days" step="0.01" min="0" placeholder="130.00">
                </label>
                <label class="admin-form-field">
                  <span>4-6 days/day (‚Ç¨)</span>
                  <input type="number" id="fleetCarPrice4_6Days" name="price_4_6days" step="0.01" min="0" placeholder="34.00">
                </label>
                <label class="admin-form-field">
                  <span>7-10 days/day (‚Ç¨)</span>
                  <input type="number" id="fleetCarPrice7_10Days" name="price_7_10days" step="0.01" min="0" placeholder="32.00">
                </label>
                <label class="admin-form-field">
                  <span>10+ days/day (‚Ç¨)</span>
                  <input type="number" id="fleetCarPrice10PlusDays" name="price_10plus_days" step="0.01" min="0" placeholder="30.00">
                </label>
              </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 12px;">
              <label class="admin-form-field">
                <span>Deposit Amount (‚Ç¨)</span>
                <input type="number" id="fleetCarDeposit" name="deposit_amount" step="0.01" min="0" value="200" placeholder="200.00">
              </label>
              <label class="admin-form-field">
                <span>Insurance per day (‚Ç¨)</span>
                <input type="number" id="fleetCarInsurance" name="insurance_per_day" step="0.01" min="0" value="17" placeholder="17.00">
              </label>
            </div>
          </div>

          <!-- Specifications -->
          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 16px;">
            <label class="admin-form-field">
              <span>Transmission *</span>
              <select id="fleetCarTransmission" name="transmission" required>
                <option value="manual">Manual</option>
                <option value="automatic">Automatic</option>
              </select>
            </label>

            <label class="admin-form-field">
              <span>Fuel Type *</span>
              <select id="fleetCarFuelType" name="fuel_type" required>
                <option value="petrol">Petrol</option>
                <option value="diesel">Diesel</option>
                <option value="hybrid">Hybrid</option>
                <option value="electric">Electric</option>
              </select>
            </label>

            <label class="admin-form-field">
              <span>Currency</span>
              <select id="fleetCarCurrency" name="currency">
                <option value="EUR">EUR (‚Ç¨)</option>
                <option value="USD">USD ($)</option>
                <option value="GBP">GBP (¬£)</option>
              </select>
            </label>
          </div>

          <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 16px;">
            <label class="admin-form-field">
              <span>Max Passengers *</span>
              <input type="number" id="fleetCarMaxPassengers" name="max_passengers" min="1" max="12" value="5" required>
            </label>

            <label class="admin-form-field">
              <span>Max Luggage</span>
              <input type="number" id="fleetCarMaxLuggage" name="max_luggage" min="0" max="10" value="2">
            </label>

            <label class="admin-form-field">
              <span>Stock Count</span>
              <input type="number" id="fleetCarStockCount" name="stock_count" min="0" max="50" value="1">
            </label>

            <label class="admin-form-field">
              <span>Sort Order</span>
              <input type="number" id="fleetCarSortOrder" name="sort_order" min="1" value="1000">
            </label>
          </div>

          <!-- Image Upload and Preview -->
          <div style="background: var(--admin-card-bg); border: 1px solid var(--admin-border); border-radius: 8px; padding: 16px; margin-bottom: 16px;">
            <h4 style="margin: 0 0 12px; font-size: 14px; font-weight: 600;">Car Image</h4>
            
            <!-- Hidden field for image URL -->
            <input type="hidden" id="fleetCarImageUrl" name="image_url">
            
            <!-- Current image preview -->
            <div id="fleetCarImagePreview" style="margin-bottom: 12px;" hidden>
              <div style="position: relative; display: inline-block;">
                <img id="fleetCarImagePreviewImg" src="" alt="Car preview" style="max-width: 300px; max-height: 200px; border-radius: 8px; border: 2px solid var(--admin-border);">
                <button type="button" id="btnRemoveCarImage" class="btn-secondary" style="position: absolute; top: 8px; right: 8px; padding: 4px 8px; font-size: 12px; background: rgba(239, 68, 68, 0.9); color: white; border: none;">
                  Remove
                </button>
              </div>
            </div>
            
            <!-- Upload new image -->
            <div id="fleetCarImageUploadArea">
              <label class="admin-form-field" style="cursor: pointer;">
                <span>Upload Car Image</span>
                <input type="file" id="fleetCarImageFile" name="image_file" accept="image/jpeg,image/jpg,image/png,image/webp" style="display: block; padding: 8px; cursor: pointer;">
                <small style="color: var(--admin-text-muted); font-size: 11px; margin-top: 4px;">
                  Upload from your device (JPG, PNG, WebP - max 5MB)
                </small>
              </label>
              
              <!-- Upload progress -->
              <div id="fleetCarImageUploadProgress" hidden style="margin-top: 8px;">
                <div style="background: var(--admin-border); height: 4px; border-radius: 2px; overflow: hidden;">
                  <div id="fleetCarImageUploadProgressBar" style="background: var(--admin-primary); height: 100%; width: 0%; transition: width 0.3s;"></div>
                </div>
                <small id="fleetCarImageUploadStatus" style="color: var(--admin-text-muted); font-size: 11px; margin-top: 4px; display: block;"></small>
              </div>
            </div>

            <!-- Alternative: URL input (optional) -->
            <details style="margin-top: 12px;">
              <summary style="cursor: pointer; color: var(--admin-text-muted); font-size: 12px;">Or paste image URL</summary>
              <div style="margin-top: 8px;">
                <input type="url" id="fleetCarImageUrlInput" placeholder="https://example.com/car-image.jpg" style="width: 100%; padding: 8px; border: 1px solid var(--admin-border); border-radius: 4px;">
                <button type="button" id="btnUseImageUrl" class="btn-secondary" style="margin-top: 4px; padding: 4px 12px; font-size: 12px;">Use this URL</button>
              </div>
            </details>
          </div>

          <!-- Availability -->
          <div style="margin-bottom: 16px;">
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="checkbox" id="fleetCarIsAvailable" name="is_available" checked style="width: 18px; height: 18px;">
              <span style="font-weight: 500;">Car is available for rent</span>
            </label>
          </div>

          <!-- Features (i18n JSONB array) -->
          <div style="margin-bottom: 16px;">
            <label class="admin-form-field">
              <span>Features</span>
              <div id="featuresI18n" style="margin-top: 8px;">
                <!-- i18n tabs will be rendered here by JS -->
              </div>
              <small style="color: var(--admin-text-muted); font-size: 11px; margin-top: 4px;">Enter each feature on a new line</small>
            </label>
          </div>

          <!-- Error Display -->
          <div id="fleetCarFormError" class="admin-error-message" hidden style="margin-bottom: 16px;"></div>

          <!-- Actions -->
          <div class="poi-form-actions">
            <button type="button" class="btn-secondary" id="fleetCarFormCancel">Cancel</button>
            <button type="submit" class="btn-primary" id="fleetCarFormSubmit">Save Car</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Car Booking Details Modal -->
  <div class="admin-modal" id="bookingDetailsModal" hidden>
    <div class="admin-modal-overlay" id="bookingDetailsModalOverlay"></div>
    <div class="admin-modal-content" style="max-width: 800px;">
      <header class="admin-modal-header">
        <h3>Booking Details</h3>
        <button class="btn-modal-close" id="btnCloseBookingDetails">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <div class="admin-modal-body" id="bookingDetailsContent">
        <!-- Content will be dynamically filled -->
        <div style="text-align: center; padding: 40px; color: var(--admin-text-muted);">
          Loading booking details...
        </div>
      </div>
      <footer class="admin-modal-footer" style="display: flex; gap: 12px; justify-content: flex-end;">
        <button type="button" class="btn-secondary" id="btnEditBooking">Edit Booking</button>
        <button type="button" class="btn-primary" id="btnConfirmBooking">Confirm Booking</button>
        <button type="button" class="btn-secondary user-detail-danger" id="btnCancelBooking">Cancel Booking</button>
        <button type="button" class="btn-danger" id="btnDeleteBooking">üóëÔ∏è Delete Booking</button>
      </footer>
    </div>
  </div>

  <!-- Edit Booking Modal -->
  <div class="admin-modal" id="editBookingModal" hidden>
    <div class="admin-modal-overlay" id="editBookingModalOverlay"></div>
    <div class="admin-modal-content" style="max-width: 900px;">
      <header class="admin-modal-header">
        <h3>Edit Booking</h3>
        <button class="btn-modal-close" id="btnCloseEditBooking">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <div class="admin-modal-body">
        <form id="editBookingForm">
          <input type="hidden" id="editBookingId">
          
          <div style="display: grid; gap: 24px;">
            <!-- Customer Info -->
            <div>
              <h4 style="margin: 0 0 12px; font-size: 14px; font-weight: 600; color: var(--admin-text-muted);">Customer Information</h4>
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                <label class="admin-form-field">
                  <span>Full Name *</span>
                  <input type="text" id="editFullName" required>
                </label>
                <label class="admin-form-field">
                  <span>Email *</span>
                  <input type="email" id="editEmail" required>
                </label>
                <label class="admin-form-field">
                  <span>Phone *</span>
                  <input type="tel" id="editPhone" required>
                </label>
                <label class="admin-form-field">
                  <span>Country</span>
                  <input type="text" id="editCountry">
                </label>
              </div>
            </div>

            <!-- Rental Details -->
            <div>
              <h4 style="margin: 0 0 12px; font-size: 14px; font-weight: 600; color: var(--admin-text-muted);">Rental Details</h4>
              <div style="display: grid; gap: 12px;">
                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 12px;">
                  <label class="admin-form-field">
                    <span>Car Model *</span>
                    <input type="text" id="editCarModel" required>
                  </label>
                  <label class="admin-form-field">
                    <span>Location *</span>
                    <select id="editLocation" required>
                      <option value="paphos">Paphos</option>
                      <option value="larnaca">Larnaca</option>
                    </select>
                  </label>
                </div>

                <div style="display: grid; grid-template-columns: 2fr 1fr 2fr; gap: 12px;">
                  <label class="admin-form-field">
                    <span>Pickup Date *</span>
                    <input type="date" id="editPickupDate" required>
                  </label>
                  <label class="admin-form-field">
                    <span>Time</span>
                    <input type="time" id="editPickupTime" value="10:00">
                  </label>
                  <label class="admin-form-field">
                    <span>Pickup Location *</span>
                    <select id="editPickupLocation" required>
                      <option value="airport_pfo">Airport PFO</option>
                      <option value="airport_lca">Airport LCA</option>
                      <option value="hotel">Hotel</option>
                      <option value="city_center">City Center</option>
                      <option value="other">Other</option>
                    </select>
                  </label>
                </div>

                <label class="admin-form-field">
                  <span>Pickup Address (if Hotel/Other)</span>
                  <input type="text" id="editPickupAddress" placeholder="Hotel name or address">
                </label>

                <div style="display: grid; grid-template-columns: 2fr 1fr 2fr; gap: 12px;">
                  <label class="admin-form-field">
                    <span>Return Date *</span>
                    <input type="date" id="editReturnDate" required>
                  </label>
                  <label class="admin-form-field">
                    <span>Time</span>
                    <input type="time" id="editReturnTime" value="10:00">
                  </label>
                  <label class="admin-form-field">
                    <span>Return Location *</span>
                    <select id="editReturnLocation" required>
                      <option value="airport_pfo">Airport PFO</option>
                      <option value="airport_lca">Airport LCA</option>
                      <option value="hotel">Hotel</option>
                      <option value="city_center">City Center</option>
                      <option value="other">Other</option>
                    </select>
                  </label>
                </div>

                <label class="admin-form-field">
                  <span>Return Address (if Hotel/Other)</span>
                  <input type="text" id="editReturnAddress" placeholder="Hotel name or address">
                </label>
              </div>
            </div>

            <!-- Additional Options -->
            <div>
              <h4 style="margin: 0 0 12px; font-size: 14px; font-weight: 600; color: var(--admin-text-muted);">Additional Options</h4>
              <div style="display: grid; grid-template-columns: 1fr 1fr 2fr; gap: 12px;">
                <label class="admin-form-field">
                  <span>Passengers</span>
                  <input type="number" id="editNumPassengers" min="1" max="8" value="2">
                </label>
                <label class="admin-form-field">
                  <span>Child Seats</span>
                  <input type="number" id="editChildSeats" min="0" max="3" value="0">
                </label>
                <label class="admin-form-field">
                  <span>Flight Number</span>
                  <input type="text" id="editFlightNumber" placeholder="W1234">
                </label>
              </div>
              <label class="admin-form-field" style="margin-top: 12px;">
                <input type="checkbox" id="editFullInsurance" style="width: auto; margin-right: 8px;">
                <span>Full Insurance (+17‚Ç¨/day)</span>
              </label>
              <label class="admin-form-field" style="margin-top: 12px;">
                <span>Special Requests</span>
                <textarea id="editSpecialRequests" rows="3"></textarea>
              </label>
            </div>

            <!-- Status -->
            <div>
              <h4 style="margin: 0 0 12px; font-size: 14px; font-weight: 600; color: var(--admin-text-muted);">Booking Status</h4>
              <label class="admin-form-field">
                <span>Status</span>
                <select id="editStatus">
                  <option value="pending">Pending</option>
                  <option value="confirmed">Confirmed</option>
                  <option value="completed">Completed</option>
                  <option value="cancelled">Cancelled</option>
                </select>
              </label>
            </div>
          </div>

          <div id="editBookingError" class="admin-error-message" hidden style="margin-top: 16px;"></div>

          <div class="poi-form-actions" style="margin-top: 24px;">
            <button type="button" class="btn-secondary" id="editBookingCancel">Cancel</button>
            <button type="submit" class="btn-primary" id="editBookingSubmit">Save Changes</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Quest Form Modal -->
  <div class="admin-modal" id="questFormModal" hidden>
    <div class="admin-modal-overlay" id="questFormModalOverlay"></div>
    <div class="admin-modal-content" style="max-width: 800px;">
      <header class="admin-modal-header">
        <h3 id="questFormTitle">New Quest</h3>
        <button class="btn-modal-close" id="btnCloseQuestForm">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <div class="admin-modal-body">
        <form id="questForm">
          <!-- Basic Info -->
          <div class="admin-form-grid">
            <label class="admin-form-field">
              <span>ID *</span>
              <input type="text" id="questId" name="id" required placeholder="sunrise-challenge" />
            </label>
            <label class="admin-form-field">
              <span>XP</span>
              <input type="number" id="questXp" name="xp" min="0" step="1" value="0" />
            </label>
            <label class="admin-form-field">
              <span>Sort</span>
              <input type="number" id="questSort" name="sort_order" min="0" step="1" value="1000" />
            </label>
            <label class="admin-form-field">
              <span>Active</span>
              <select id="questActive" name="is_active">
                <option value="true" selected>Yes</option>
                <option value="false">No</option>
              </select>
            </label>
          </div>

          <!-- Title & Description i18n -->
          <div id="questTitleI18nContainer" style="margin-bottom: 16px;"></div>
          <div id="questDescriptionI18nContainer" style="margin-bottom: 16px;"></div>

          <!-- Verification Section -->
          <div style="border-top: 1px solid var(--admin-border); padding-top: 16px; margin-top: 16px;">
            <h4 style="margin: 0 0 12px 0; color: var(--admin-text);">üîê Verification Settings</h4>
            
            <div class="admin-form-grid">
              <label class="admin-form-field">
                <span>Verification Type</span>
                <select id="questVerificationType" name="verification_type">
                  <option value="none">None (manual completion)</option>
                  <option value="code">Code only</option>
                  <option value="location">Location only (GPS)</option>
                  <option value="both">Code + Location</option>
                </select>
              </label>
              <label class="admin-form-field">
                <span>Link to Recommendation</span>
                <select id="questRecommendationId" name="recommendation_id">
                  <option value="">-- None --</option>
                  <!-- Options will be loaded dynamically -->
                </select>
              </label>
            </div>

            <!-- Code verification fields -->
            <div id="questCodeFields" style="display: none; margin-top: 12px;">
              <label class="admin-form-field">
                <span>üîë Unlock Code (given to partners/vendors)</span>
                <input type="text" id="questUnlockCode" name="unlock_code" placeholder="e.g. CYPRUS2024" style="font-family: monospace; text-transform: uppercase;" />
                <small style="color: var(--admin-text-muted);">Users will enter this code to complete the quest</small>
              </label>
            </div>

            <!-- Location verification fields -->
            <div id="questLocationFields" style="display: none; margin-top: 12px;">
              <div class="admin-form-grid">
                <label class="admin-form-field">
                  <span>üìç Latitude</span>
                  <input type="number" id="questLatitude" name="latitude" step="0.000001" placeholder="34.755670" />
                </label>
                <label class="admin-form-field">
                  <span>üìç Longitude</span>
                  <input type="number" id="questLongitude" name="longitude" step="0.000001" placeholder="32.404170" />
                </label>
                <label class="admin-form-field">
                  <span>üìè Radius (meters)</span>
                  <input type="number" id="questLocationRadius" name="location_radius" min="50" max="1000" step="10" value="100" />
                </label>
              </div>
              <div id="questLocationNameI18nContainer" style="margin-top: 12px;"></div>
            </div>
          </div>

          <div class="poi-form-actions" style="margin-top: 20px;">
            <button type="button" class="btn-secondary" id="questFormCancel">Cancel</button>
            <button type="submit" class="btn-primary" id="questFormSubmit">Save Quest</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Recommendation Form Modal -->
  <div class="admin-modal" id="recommendationFormModal" hidden>
    <div class="admin-modal-overlay" id="recommendationFormModalOverlay"></div>
    <div class="admin-modal-content" style="max-width: 900px; max-height: 90vh; overflow-y: auto;">
      <header class="admin-modal-header">
        <h3 id="recommendationFormTitle">New Recommendation</h3>
        <button class="btn-modal-close" id="btnCloseRecommendationForm">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <div class="admin-modal-body" id="recommendationFormContent">
        <!-- Form will be dynamically rendered here by recommendation-i18n-form.js -->
      </div>
    </div>
  </div>

  <!-- Shop Product Form Modal -->
  <div class="admin-modal" id="shopProductModal" hidden>
    <div class="admin-modal-overlay" id="shopProductModalOverlay"></div>
    <div class="admin-modal-content" style="max-width: 850px; max-height: 90vh; overflow-y: auto;">
      <header class="admin-modal-header">
        <h3 id="shopProductModalTitle">Nowy produkt</h3>
        <button class="btn-modal-close" id="btnCloseShopProductModal">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <div class="admin-modal-body">
        <form id="shopProductForm" novalidate>
          <input type="hidden" id="shopProductId">
          
          <!-- SECTION: Basic Info -->
          <div style="margin-bottom: 20px; padding: 16px; background: var(--admin-bg); border-radius: 8px; border-left: 4px solid #3b82f6;">
            <h4 style="margin: 0 0 12px; font-size: 14px; color: #3b82f6;">üìù Podstawowe informacje</h4>
            
            <!-- Language Tabs -->
            <div class="lang-tabs" style="display: flex; gap: 8px; margin-bottom: 12px; border-bottom: 1px solid var(--admin-border);">
              <button type="button" class="lang-tab active" data-lang="pl" onclick="switchProductLang('pl')">üáµüá± Polski</button>
              <button type="button" class="lang-tab" data-lang="en" onclick="switchProductLang('en')">üá¨üáß English</button>
            </div>

            <!-- Polish Content -->
            <div id="productLangPL" class="lang-content active">
              <label class="admin-form-field">
                <span>Nazwa produktu (PL) * <small style="color: var(--admin-text-muted);">- wy≈õwietlana klientom</small></span>
                <input type="text" id="shopProductName" required placeholder="np. Oliwa z oliwek cypryjska">
              </label>
              <label class="admin-form-field">
                <span>Opis (PL) <small style="color: var(--admin-text-muted);">- pe≈Çny opis na stronie produktu</small></span>
                <textarea id="shopProductDescription" rows="3" placeholder="Szczeg√≥≈Çowy opis produktu..."></textarea>
              </label>
              <label class="admin-form-field">
                <span>Kr√≥tki opis (PL) <small style="color: var(--admin-text-muted);">- widoczny na li≈õcie produkt√≥w</small></span>
                <input type="text" id="shopProductShortDesc" placeholder="1-2 zdania podsumowujƒÖce produkt">
              </label>
            </div>

            <!-- English Content -->
            <div id="productLangEN" class="lang-content">
              <label class="admin-form-field">
                <span>Product Name (EN) * <small style="color: var(--admin-text-muted);">- shown to customers</small></span>
                <input type="text" id="shopProductNameEn" placeholder="e.g. Cyprus Olive Oil">
              </label>
              <label class="admin-form-field">
                <span>Description (EN) <small style="color: var(--admin-text-muted);">- full product page description</small></span>
                <textarea id="shopProductDescriptionEn" rows="3" placeholder="Detailed product description..."></textarea>
              </label>
              <label class="admin-form-field">
                <span>Short Description (EN) <small style="color: var(--admin-text-muted);">- shown in product listings</small></span>
                <input type="text" id="shopProductShortDescEn" placeholder="1-2 sentences summarizing the product">
              </label>
            </div>
          </div>

          <!-- SECTION: Organization -->
          <div style="margin-bottom: 20px; padding: 16px; background: var(--admin-bg); border-radius: 8px; border-left: 4px solid #8b5cf6;">
            <h4 style="margin: 0 0 12px; font-size: 14px; color: #8b5cf6;">üè∑Ô∏è Organizacja i typ produktu</h4>
            <p style="font-size: 12px; color: var(--admin-text-muted); margin: 0 0 12px;">Przypisz produkt do kategorii i vendora. Typ produktu okre≈õla jego zachowanie.</p>
            
            <div class="admin-form-grid">
              <label class="admin-form-field">
                <span>Kategoria <small style="color: var(--admin-text-muted);">- do filtrowania</small></span>
                <select id="shopProductCategory">
                  <option value="">-- Brak kategorii --</option>
                </select>
              </label>
              <label class="admin-form-field">
                <span>Vendor <small style="color: var(--admin-text-muted);">- sprzedawca/producent</small></span>
                <select id="shopProductVendor">
                  <option value="">-- Brak vendora --</option>
                </select>
              </label>
            </div>

            <div class="admin-form-grid">
              <label class="admin-form-field">
                <span>Typ produktu * <small style="color: var(--admin-text-muted);">- okre≈õla funkcjonalno≈õƒá</small></span>
                <div style="display: flex; gap: 8px; align-items: center;">
                  <select id="shopProductType" onchange="updateProductFormSections(this.value)" style="flex: 1;">
                    <option value="simple">üõí Simple - zwyk≈Çy produkt fizyczny</option>
                    <option value="variable">üîÄ Variable - z wariantami (rozmiar, kolor)</option>
                    <option value="bundle">üì¶ Bundle - zestaw produkt√≥w</option>
                    <option value="grouped">üë• Grouped - produkty powiƒÖzane</option>
                    <option value="digital">üíæ Digital - do pobrania (ebook, plik)</option>
                    <option value="subscription">üîÑ Subscription - subskrypcja cykliczna</option>
                  </select>
                  <button type="button" class="btn-secondary" onclick="addProductVariant()" style="white-space: nowrap; font-size: 12px; padding: 4px 10px;">‚ûï Wariant</button>
                </div>
              </label>
              <label class="admin-form-field">
                <span>Status <small style="color: var(--admin-text-muted);">- widoczno≈õƒá w sklepie</small></span>
                <select id="shopProductStatus">
                  <option value="draft">üìù Draft - szkic, niewidoczny</option>
                  <option value="active">‚úÖ Active - aktywny, widoczny</option>
                  <option value="archived">üìÅ Archived - zarchiwizowany</option>
                </select>
              </label>
            </div>

            <div class="admin-form-grid">
              <label class="admin-form-field">
                <span>SKU <small style="color: var(--admin-text-muted);">- unikalny kod produktu</small></span>
                <input type="text" id="shopProductSku" placeholder="np. OLIVE-001">
              </label>
              <label class="admin-form-field">
                <span>Slug (URL) <small style="color: var(--admin-text-muted);">- auto-generowany je≈õli pusty</small></span>
                <input type="text" id="shopProductSlug" placeholder="np. cyprus-olive-oil">
              </label>
            </div>
          </div>

          <!-- SECTION: Pricing -->
          <div style="margin-bottom: 20px; padding: 16px; background: var(--admin-bg); border-radius: 8px; border-left: 4px solid #22c55e;">
            <h4 style="margin: 0 0 12px; font-size: 14px; color: #22c55e;">üí∞ Ceny</h4>
            <p style="font-size: 12px; color: var(--admin-text-muted); margin: 0 0 12px;">Cena regularna to g≈Ç√≥wna cena. Cena por√≥wnawcza pokazuje "by≈Ço X‚Ç¨". Cena promocyjna z datami w≈ÇƒÖcza automatycznƒÖ wyprzeda≈º.</p>
            
            <div class="admin-form-grid">
              <label class="admin-form-field">
                <span>Cena regularna (‚Ç¨) * <small style="color: var(--admin-text-muted);">- g≈Ç√≥wna cena</small></span>
                <input type="number" id="shopProductPrice" step="0.01" min="0" required placeholder="29.99">
              </label>
              <label class="admin-form-field">
                <span>Cena por√≥wnawcza (‚Ç¨) <small style="color: var(--admin-text-muted);">- "by≈Ço X‚Ç¨"</small></span>
                <input type="number" id="shopProductComparePrice" step="0.01" min="0" placeholder="39.99">
              </label>
              <label class="admin-form-field">
                <span>Koszt zakupu (‚Ç¨) <small style="color: var(--admin-text-muted);">- do raport√≥w mar≈ºy</small></span>
                <input type="number" id="shopProductCost" step="0.01" min="0" placeholder="15.00">
              </label>
            </div>
            
            <div class="admin-form-grid">
              <label class="admin-form-field">
                <span>Cena promocyjna (‚Ç¨) <small style="color: var(--admin-text-muted);">- wyprzeda≈º</small></span>
                <input type="number" id="shopProductSalePrice" step="0.01" min="0" placeholder="">
              </label>
              <label class="admin-form-field">
                <span>Promocja od <small style="color: var(--admin-text-muted);">- data startu</small></span>
                <input type="datetime-local" id="shopProductSaleStart">
              </label>
              <label class="admin-form-field">
                <span>Promocja do <small style="color: var(--admin-text-muted);">- data ko≈Ñca</small></span>
                <input type="datetime-local" id="shopProductSaleEnd">
              </label>
            </div>

            <div class="admin-form-grid">
              <label class="admin-form-field">
                <span>Klasa podatkowa <small style="color: var(--admin-text-muted);">- stawka VAT</small></span>
                <select id="shopProductTaxClass">
                  <option value="">-- Domy≈õlna --</option>
                </select>
              </label>
              <label class="admin-form-field">
                <span>Tryb ceny VAT <small style="color: var(--admin-text-muted);">- net/gross</small></span>
                <select id="shopProductTaxPriceMode" class="form-control">
                  <option value="inherit">Domy≈õlnie (z ustawie≈Ñ VAT)</option>
                  <option value="gross">Cena brutto (z VAT)</option>
                  <option value="net">Cena netto (bez VAT)</option>
                </select>
              </label>
            </div>
          </div>

          <!-- SECTION: Inventory -->
          <div id="shopProductInventorySection" style="margin-bottom: 20px; padding: 16px; background: var(--admin-bg); border-radius: 8px; border-left: 4px solid #f59e0b;">
            <h4 style="margin: 0 0 12px; font-size: 14px; color: #f59e0b;">üì¶ Stan magazynowy</h4>
            <p style="font-size: 12px; color: var(--admin-text-muted); margin: 0 0 12px;">ZarzƒÖdzaj ilo≈õciƒÖ produktu. W≈ÇƒÖcz ≈õledzenie, aby automatycznie zmniejszaƒá stan po sprzeda≈ºy.</p>
            
            <div style="display: flex; gap: 16px; flex-wrap: wrap; margin-bottom: 12px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" id="shopProductTrackInventory">
                <span>üìä ≈öled≈∫ stan magazynowy</span>
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" id="shopProductAllowBackorder">
                <span>‚è≥ Pozw√≥l na zam√≥wienia przy braku</span>
              </label>
            </div>
            
            <div class="admin-form-grid">
              <label class="admin-form-field">
                <span>Ilo≈õƒá na stanie <small style="color: var(--admin-text-muted);">- aktualna ilo≈õƒá</small></span>
                <input type="number" id="shopProductStock" min="0" value="0">
              </label>
              <label class="admin-form-field">
                <span>Pr√≥g niskiego stanu <small style="color: var(--admin-text-muted);">- alert</small></span>
                <input type="number" id="shopProductLowStock" min="0" value="5">
              </label>
            </div>
            
            <div class="admin-form-grid" style="margin-top: 8px;">
              <label class="admin-form-field">
                <span>Min. ilo≈õƒá zam√≥wienia <small style="color: var(--admin-text-muted);">- minimalna do kupienia</small></span>
                <input type="number" id="shopProductMinQty" min="1" value="1">
              </label>
              <label class="admin-form-field">
                <span>Max. ilo≈õƒá zam√≥wienia <small style="color: var(--admin-text-muted);">- limit na zam√≥wienie</small></span>
                <input type="number" id="shopProductMaxQty" min="1" placeholder="bez limitu">
              </label>
            </div>
          </div>

          <!-- SECTION: Shipping -->
          <div id="shopProductShippingSection" style="margin-bottom: 20px; padding: 16px; background: var(--admin-bg); border-radius: 8px; border-left: 4px solid #06b6d4;">
            <h4 style="margin: 0 0 12px; font-size: 14px; color: #06b6d4;">üöö Wysy≈Çka i wymiary</h4>
            <p style="font-size: 12px; color: var(--admin-text-muted); margin: 0 0 12px;">Waga i wymiary sƒÖ u≈ºywane do obliczania koszt√≥w wysy≈Çki.</p>
            
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; margin-bottom: 12px;">
              <input type="checkbox" id="shopProductRequiresShipping" checked>
              <span>üì¨ Wymaga wysy≈Çki (odznacz dla produkt√≥w cyfrowych/us≈Çug)</span>
            </label>

            <div class="admin-form-grid">
              <label class="admin-form-field">
                <span>Waga (kg) <small style="color: var(--admin-text-muted);">- do wyceny</small></span>
                <input type="number" id="shopProductWeight" step="0.01" min="0" placeholder="0.5">
              </label>
              <label class="admin-form-field">
                <span>Klasa wysy≈Çkowa <small style="color: var(--admin-text-muted);">- specjalne stawki</small></span>
                <select id="shopProductShippingClass">
                  <option value="">-- Standardowa --</option>
                </select>
              </label>
            </div>

            <div class="admin-form-grid" style="margin-top: 8px;">
              <label class="admin-form-field">
                <span>D≈Çugo≈õƒá (cm)</span>
                <input type="number" id="shopProductLength" step="0.1" min="0" placeholder="">
              </label>
              <label class="admin-form-field">
                <span>Szeroko≈õƒá (cm)</span>
                <input type="number" id="shopProductWidth" step="0.1" min="0" placeholder="">
              </label>
              <label class="admin-form-field">
                <span>Wysoko≈õƒá (cm)</span>
                <input type="number" id="shopProductHeight" step="0.1" min="0" placeholder="">
              </label>
            </div>
          </div>

          <!-- SECTION: Visibility & Flags -->
          <div style="margin-bottom: 20px; padding: 16px; background: var(--admin-bg); border-radius: 8px; border-left: 4px solid #ec4899;">
            <h4 style="margin: 0 0 12px; font-size: 14px; color: #ec4899;">‚≠ê Wyr√≥≈ºnienia i flagi</h4>
            <p style="font-size: 12px; color: var(--admin-text-muted); margin: 0 0 12px;">Oznacz produkt specjalnymi flagami do wy≈õwietlania w sekcjach wyr√≥≈ºnionych.</p>
            
            <div style="display: flex; gap: 16px; flex-wrap: wrap;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" id="shopProductFeatured">
                <span>‚≠ê Wyr√≥≈ºniony</span>
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" id="shopProductBestseller">
                <span>üèÜ Bestseller</span>
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" id="shopProductNew">
                <span>üÜï Nowo≈õƒá</span>
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" id="shopProductOnSale">
                <span>üî• Na wyprzeda≈ºy</span>
              </label>
            </div>
          </div>

          <!-- Product Images Section -->
          <div style="margin-bottom: 20px; padding: 16px; background: var(--admin-bg); border-radius: 8px; border-left: 4px solid #14b8a6;">
            <h4 style="margin: 0 0 12px; font-size: 14px; color: #14b8a6;">üñºÔ∏è Zdjƒôcia produktu</h4>
            <p style="font-size: 12px; color: var(--admin-text-muted); margin: 0 0 12px;">Dodaj zdjƒôcia przez upload lub wklej URL. G≈Ç√≥wne zdjƒôcie wy≈õwietla siƒô na li≈õcie produkt√≥w.</p>
            
            <!-- Thumbnail -->
            <div class="admin-form-field">
              <span>G≈Ç√≥wne zdjƒôcie (thumbnail) <small style="color: var(--admin-text-muted);">- widoczne na li≈õcie</small></span>
              <div style="display: flex; gap: 8px; align-items: center; margin-top: 4px;">
                <input type="file" id="shopProductThumbnailFile" accept="image/*" style="display: none;">
                <button type="button" class="btn-secondary" onclick="document.getElementById('shopProductThumbnailFile').click()" style="white-space: nowrap;">
                  üì§ Upload
                </button>
                <input type="url" id="shopProductThumbnail" placeholder="lub wklej URL..." style="flex: 1;">
              </div>
              <div id="shopProductThumbnailPreview" style="margin-top: 8px;"></div>
            </div>
            
            <!-- Gallery Images -->
            <div class="admin-form-field" style="margin-top: 16px;">
              <span>Galeria zdjƒôƒá <small style="color: var(--admin-text-muted);">- dodatkowe zdjƒôcia produktu</small></span>
              <div style="display: flex; gap: 8px; align-items: center; margin-top: 4px;">
                <input type="file" id="shopProductGalleryFiles" accept="image/*" multiple style="display: none;">
                <button type="button" class="btn-secondary" onclick="document.getElementById('shopProductGalleryFiles').click()" style="white-space: nowrap;">
                  üì§ Upload wielu
                </button>
                <span style="color: var(--admin-text-muted); font-size: 12px;">lub dodaj URLe poni≈ºej</span>
              </div>
              <div id="shopProductGalleryPreview" style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px;"></div>
              <textarea id="shopProductImages" rows="2" placeholder="URLe zdjƒôƒá (jeden na liniƒô)" style="margin-top: 8px;"></textarea>
            </div>
            
            <!-- Video URL -->
            <label class="admin-form-field" style="margin-top: 12px;">
              <span>Video URL <small style="color: var(--admin-text-muted);">- YouTube/Vimeo</small></span>
              <input type="url" id="shopProductVideo" placeholder="https://youtube.com/watch?v=...">
            </label>
          </div>
          
          <!-- Digital Product Section (hidden by default) -->
          <div id="shopProductDigitalSection" style="margin-bottom: 20px; padding: 16px; background: var(--admin-bg); border-radius: 8px; border-left: 4px solid #a855f7; display: none;">
            <h4 style="margin: 0 0 12px; font-size: 14px; color: #a855f7;">üíæ Produkt cyfrowy</h4>
            <p style="font-size: 12px; color: var(--admin-text-muted); margin: 0 0 12px;">Skonfiguruj plik do pobrania po zakupie. Klient otrzyma link po op≈Çaceniu.</p>
            
            <label class="admin-form-field">
              <span>URL pliku do pobrania * <small style="color: var(--admin-text-muted);">- link do pliku</small></span>
              <input type="url" id="shopProductDigitalUrl" placeholder="https://storage.example.com/files/ebook.pdf">
            </label>
            <label class="admin-form-field" style="margin-top: 8px;">
              <span>Nazwa pliku <small style="color: var(--admin-text-muted);">- wy≈õwietlana klientowi</small></span>
              <input type="text" id="shopProductDigitalFileName" placeholder="ebook.pdf">
            </label>
            <div class="admin-form-grid" style="margin-top: 8px;">
              <label class="admin-form-field">
                <span>Limit pobra≈Ñ <small style="color: var(--admin-text-muted);">- puste = bez limitu</small></span>
                <input type="number" id="shopProductDownloadLimit" min="0" placeholder="np. 5">
              </label>
              <label class="admin-form-field">
                <span>Wa≈ºno≈õƒá linku (dni) <small style="color: var(--admin-text-muted);">- puste = zawsze</small></span>
                <input type="number" id="shopProductDownloadExpiry" min="0" placeholder="np. 30">
              </label>
            </div>
          </div>
          
          <!-- Subscription Section (hidden by default) -->
          <div id="shopProductSubscriptionSection" style="margin-bottom: 20px; padding: 16px; background: var(--admin-bg); border-radius: 8px; border-left: 4px solid #f97316; display: none;">
            <h4 style="margin: 0 0 12px; font-size: 14px; color: #f97316;">üîÑ Subskrypcja</h4>
            <p style="font-size: 12px; color: var(--admin-text-muted); margin: 0 0 12px;">Konfiguracja cyklicznych p≈Çatno≈õci. Cena produktu to cena za okres.</p>
            
            <div class="admin-form-grid">
              <label class="admin-form-field">
                <span>Okres rozliczeniowy <small style="color: var(--admin-text-muted);">- jak czƒôsto pobierana p≈Çatno≈õƒá</small></span>
                <select id="shopProductSubInterval">
                  <option value="day">Dziennie</option>
                  <option value="week">Tygodniowo</option>
                  <option value="month" selected>Miesiƒôcznie</option>
                  <option value="year">Rocznie</option>
                </select>
              </label>
              <label class="admin-form-field">
                <span>Co ile okres√≥w <small style="color: var(--admin-text-muted);">- np. 3 = co 3 miesiƒÖce</small></span>
                <input type="number" id="shopProductSubIntervalCount" min="1" value="1">
              </label>
            </div>
            <div class="admin-form-grid" style="margin-top: 8px;">
              <label class="admin-form-field">
                <span>Dni pr√≥bne <small style="color: var(--admin-text-muted);">- darmowy trial</small></span>
                <input type="number" id="shopProductSubTrialDays" min="0" value="0">
              </label>
              <label class="admin-form-field">
                <span>Op≈Çata poczƒÖtkowa (‚Ç¨) <small style="color: var(--admin-text-muted);">- jednorazowa</small></span>
                <input type="number" id="shopProductSubSignupFee" step="0.01" min="0" value="0">
              </label>
            </div>
          </div>

          <!-- Variants Section (for Variable products) -->
          <div id="shopProductVariantsSection" style="margin-bottom: 20px; padding: 16px; background: var(--admin-bg); border-radius: 8px; border-left: 4px solid #f59e0b; display: none;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
              <h4 style="margin: 0; font-size: 14px; color: #f59e0b;">üîÄ Warianty produktu</h4>
              <button type="button" class="btn-secondary" onclick="addProductVariant()" style="font-size: 12px; padding: 4px 10px;">‚ûï Dodaj wariant</button>
            </div>
            <p style="font-size: 12px; color: var(--admin-text-muted); margin: 0 0 12px;">Ka≈ºdy wariant mo≈ºe mieƒá w≈ÇasnƒÖ cenƒô, SKU i stan magazynowy.</p>
            <div id="shopProductVariantsList"></div>
          </div>

          <!-- Bundle Section (hidden by default) -->
          <div id="shopProductBundleSection" style="margin-bottom: 20px; padding: 16px; background: var(--admin-bg); border-radius: 8px; border-left: 4px solid #84cc16; display: none;">
            <h4 style="margin: 0 0 12px; font-size: 14px; color: #84cc16;">üì¶ Sk≈Çad zestawu (Bundle)</h4>
            <p style="font-size: 12px; color: var(--admin-text-muted); margin: 0 0 12px;">Dodaj produkty wchodzƒÖce w sk≈Çad zestawu. ZarzƒÖdzanie sk≈Çadem dostƒôpne po zapisaniu produktu.</p>
            <div id="shopProductBundleItems" style="margin-top: 12px;">
              <p style="color: var(--admin-text-muted); text-align: center; padding: 20px;">Zapisz produkt, aby zarzƒÖdzaƒá sk≈Çadem zestawu.</p>
            </div>
          </div>

          <!-- Upsell/Cross-sell Section -->
          <div id="shopProductRelatedSection" style="margin-bottom: 20px; padding: 16px; background: var(--admin-bg); border-radius: 8px; border-left: 4px solid #8b5cf6; display: none;">
            <h4 style="margin: 0 0 12px; font-size: 14px; color: #8b5cf6;">üîó Produkty powiƒÖzane</h4>
            <label class="admin-form-field">
              <span>Upsell <small style="color: var(--admin-text-muted);">- polecane dro≈ºsze alternatywy</small></span>
              <select id="shopProductUpsell" multiple style="height: 80px;"></select>
            </label>
            <label class="admin-form-field" style="margin-top: 12px;">
              <span>Cross-sell <small style="color: var(--admin-text-muted);">- produkty komplementarne</small></span>
              <select id="shopProductCrossSell" multiple style="height: 80px;"></select>
            </label>
          </div>

          <!-- SECTION: Tags & SEO -->
          <div style="margin-bottom: 20px; padding: 16px; background: var(--admin-bg); border-radius: 8px; border-left: 4px solid #64748b;">
            <h4 style="margin: 0 0 12px; font-size: 14px; color: #64748b;">üè∑Ô∏è Tagi</h4>
            <label class="admin-form-field">
              <span>Tagi <small style="color: var(--admin-text-muted);">- oddzielone przecinkami, do wyszukiwania</small></span>
              <input type="text" id="shopProductTags" placeholder="np. oliwa, cypr, prezent, local">
            </label>
          </div>

          <div id="shopProductFormError" class="admin-error-message" hidden></div>

          <div class="poi-form-actions" style="margin-top: 20px; display: flex; justify-content: space-between;">
            <button type="button" class="btn-secondary" id="shopProductFormCancel">Anuluj</button>
            <button type="submit" class="btn-primary">üíæ Zapisz produkt</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Shop Category Form Modal -->
  <div class="admin-modal" id="shopCategoryModal" hidden>
    <div class="admin-modal-overlay" id="shopCategoryModalOverlay"></div>
    <div class="admin-modal-content" style="max-width: 550px;">
      <header class="admin-modal-header">
        <h3 id="shopCategoryModalTitle">Nowa kategoria</h3>
        <button class="btn-modal-close" id="btnCloseShopCategoryModal">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <div class="admin-modal-body">
        <form id="shopCategoryForm" novalidate>
          <input type="hidden" id="shopCategoryId">
          
          <!-- Language Tabs -->
          <div class="lang-tabs" style="display: flex; gap: 8px; margin-bottom: 16px; border-bottom: 1px solid var(--admin-border);">
            <button type="button" class="lang-tab active" data-lang="pl" onclick="switchCategoryLang('pl')">üáµüá± Polski</button>
            <button type="button" class="lang-tab" data-lang="en" onclick="switchCategoryLang('en')">üá¨üáß English</button>
          </div>

          <!-- Polish Content -->
          <div id="categoryLangPL" class="lang-content active">
            <label class="admin-form-field">
              <span>Nazwa kategorii (PL) *</span>
              <input type="text" id="shopCategoryName" required placeholder="np. Lokalne produkty">
            </label>
            <label class="admin-form-field">
              <span>Opis (PL)</span>
              <textarea id="shopCategoryDescription" rows="2" placeholder="Opis kategorii po polsku"></textarea>
            </label>
          </div>

          <!-- English Content -->
          <div id="categoryLangEN" class="lang-content">
            <label class="admin-form-field">
              <span>Category Name (EN)</span>
              <input type="text" id="shopCategoryNameEn" placeholder="e.g. Local Products">
            </label>
            <label class="admin-form-field">
              <span>Description (EN)</span>
              <textarea id="shopCategoryDescriptionEn" rows="2" placeholder="Category description in English"></textarea>
            </label>
          </div>

          <hr style="margin: 16px 0; border: none; border-top: 1px solid var(--admin-border);">

          <label class="admin-form-field">
            <span>Slug (URL)</span>
            <input type="text" id="shopCategorySlug" placeholder="local-products">
            <small style="color: var(--admin-text-muted);">Zostaw puste, aby wygenerowaƒá automatycznie</small>
          </label>

          <label class="admin-form-field">
            <span>Kategoria nadrzƒôdna</span>
            <select id="shopCategoryParent">
              <option value="">Brak (g≈Ç√≥wna)</option>
            </select>
          </label>

          <label class="admin-form-field">
            <span>Kolejno≈õƒá sortowania</span>
            <input type="number" id="shopCategorySortOrder" min="0" value="0">
          </label>

          <!-- Category Image -->
          <div class="admin-form-field">
            <span>Obraz kategorii</span>
            <div style="display: flex; gap: 8px; align-items: center; margin-top: 4px;">
              <input type="file" id="shopCategoryImageFile" accept="image/*" style="display: none;">
              <button type="button" class="btn-secondary" onclick="document.getElementById('shopCategoryImageFile').click()" style="white-space: nowrap;">
                üì§ Upload
              </button>
              <input type="url" id="shopCategoryImage" placeholder="lub wklej URL..." style="flex: 1;">
              <button type="button" class="btn-icon" onclick="clearCategoryImage()" title="Usu≈Ñ obraz" style="color: #ef4444;">üóëÔ∏è</button>
            </div>
            <div id="shopCategoryImagePreview" style="margin-top: 8px;"></div>
          </div>

          <!-- Icon -->
          <label class="admin-form-field">
            <span>Ikona (emoji)</span>
            <input type="text" id="shopCategoryIcon" placeholder="np. üõçÔ∏è lub üèñÔ∏è" maxlength="4">
            <small style="color: var(--admin-text-muted);">Emoji wy≈õwietlane przy nazwie kategorii</small>
          </label>

          <!-- Visibility Options -->
          <div style="margin-top: 16px; display: flex; flex-direction: column; gap: 10px;">
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="checkbox" id="shopCategoryActive" checked>
              <span>Aktywna</span>
            </label>
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="checkbox" id="shopCategoryFeatured">
              <span>‚≠ê Wyr√≥≈ºniona na stronie g≈Ç√≥wnej</span>
            </label>
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="checkbox" id="shopCategoryShowInMenu" checked>
              <span>üìã Pokazuj w menu</span>
            </label>
          </div>

          <!-- SEO Section -->
          <div style="margin-top: 16px; padding: 12px; background: var(--admin-bg); border-radius: 8px;">
            <h4 style="margin: 0 0 12px; font-size: 13px; color: var(--admin-text-muted);">üîç SEO (opcjonalnie)</h4>
            <label class="admin-form-field">
              <span>Meta title</span>
              <input type="text" id="shopCategoryMetaTitle" placeholder="Tytu≈Ç dla wyszukiwarek">
            </label>
            <label class="admin-form-field" style="margin-top: 8px;">
              <span>Meta description</span>
              <textarea id="shopCategoryMetaDesc" rows="2" placeholder="Opis dla wyszukiwarek (max 160 znak√≥w)"></textarea>
            </label>
          </div>

          <div id="shopCategoryFormError" class="admin-error-message" hidden></div>

          <div class="poi-form-actions" style="margin-top: 20px;">
            <button type="button" class="btn-secondary" id="shopCategoryFormCancel">Anuluj</button>
            <button type="submit" class="btn-primary">üíæ Zapisz kategoriƒô</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Shop Vendor Form Modal -->
  <div class="admin-modal" id="shopVendorModal" hidden>
    <div class="admin-modal-overlay" id="shopVendorModalOverlay"></div>
    <div class="admin-modal-content" style="max-width: 600px;">
      <header class="admin-modal-header">
        <h3 id="shopVendorModalTitle">Nowy dostawca</h3>
        <button class="btn-modal-close" id="btnCloseShopVendorModal">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <div class="admin-modal-body">
        <form id="shopVendorForm" novalidate>
          <input type="hidden" id="shopVendorId">
          
          <!-- Language Tabs -->
          <div class="lang-tabs" style="display: flex; gap: 8px; margin-bottom: 16px; border-bottom: 1px solid var(--admin-border);">
            <button type="button" class="lang-tab active" data-lang="pl" onclick="switchVendorLang('pl')">üáµüá± Polski</button>
            <button type="button" class="lang-tab" data-lang="en" onclick="switchVendorLang('en')">üá¨üáß English</button>
          </div>

          <!-- Polish Content -->
          <div id="vendorLangPL" class="lang-content active">
            <label class="admin-form-field">
              <span>Nazwa vendora (PL) *</span>
              <input type="text" id="shopVendorName" required placeholder="np. Cypryjskie Smaki">
            </label>
            <label class="admin-form-field">
              <span>Opis (PL)</span>
              <textarea id="shopVendorDescription" rows="2" placeholder="Opis vendora po polsku"></textarea>
            </label>
          </div>

          <!-- English Content -->
          <div id="vendorLangEN" class="lang-content">
            <label class="admin-form-field">
              <span>Vendor Name (EN)</span>
              <input type="text" id="shopVendorNameEn" placeholder="e.g. Cyprus Delights">
            </label>
            <label class="admin-form-field">
              <span>Description (EN)</span>
              <textarea id="shopVendorDescriptionEn" rows="2" placeholder="Vendor description in English"></textarea>
            </label>
          </div>

          <hr style="margin: 16px 0; border: none; border-top: 1px solid var(--admin-border);">

          <label class="admin-form-field">
            <span>Slug (URL)</span>
            <input type="text" id="shopVendorSlug" placeholder="cyprus-delights">
            <small style="color: var(--admin-text-muted);">Zostaw puste, aby wygenerowaƒá automatycznie</small>
          </label>

          <div class="admin-form-grid">
            <label class="admin-form-field">
              <span>Email kontaktowy</span>
              <input type="email" id="shopVendorEmail" placeholder="vendor@example.com">
            </label>
            <label class="admin-form-field">
              <span>Telefon</span>
              <input type="tel" id="shopVendorPhone" placeholder="+48 123 456 789">
            </label>
          </div>

          <div class="admin-form-grid">
            <label class="admin-form-field">
              <span>Prowizja (%)</span>
              <input type="number" id="shopVendorCommission" min="0" max="100" step="0.1" value="0">
              <small style="color: var(--admin-text-muted);">Twoja prowizja od sprzeda≈ºy</small>
            </label>
            <label class="admin-form-field">
              <span>Strona WWW</span>
              <input type="url" id="shopVendorWebsite" placeholder="https://...">
            </label>
          </div>

          <!-- Logo -->
          <div class="admin-form-field">
            <span>Logo dostawcy</span>
            <div style="display: flex; gap: 8px; align-items: center; margin-top: 4px;">
              <input type="file" id="shopVendorLogoFile" accept="image/*" style="display: none;">
              <button type="button" class="btn-secondary" onclick="document.getElementById('shopVendorLogoFile').click()" style="white-space: nowrap;">
                üì§ Upload
              </button>
              <input type="url" id="shopVendorLogo" placeholder="lub wklej URL..." style="flex: 1;">
              <button type="button" class="btn-icon" onclick="clearVendorLogo()" title="Usu≈Ñ logo" style="color: #ef4444;">üóëÔ∏è</button>
            </div>
            <div id="shopVendorLogoPreview" style="margin-top: 8px;"></div>
          </div>

          <!-- Banner -->
          <div class="admin-form-field">
            <span>Banner dostawcy</span>
            <div style="display: flex; gap: 8px; align-items: center; margin-top: 4px;">
              <input type="file" id="shopVendorBannerFile" accept="image/*" style="display: none;">
              <button type="button" class="btn-secondary" onclick="document.getElementById('shopVendorBannerFile').click()" style="white-space: nowrap;">
                üì§ Upload
              </button>
              <input type="url" id="shopVendorBanner" placeholder="lub wklej URL..." style="flex: 1;">
              <button type="button" class="btn-icon" onclick="clearVendorBanner()" title="Usu≈Ñ banner" style="color: #ef4444;">üóëÔ∏è</button>
            </div>
            <div id="shopVendorBannerPreview" style="margin-top: 8px;"></div>
            <small style="color: var(--admin-text-muted);">Szeroki baner wy≈õwietlany na stronie vendora (zalecane 1200x300px)</small>
          </div>

          <!-- Address Section -->
          <div style="margin-top: 16px; padding: 12px; background: var(--admin-bg); border-radius: 8px;">
            <h4 style="margin: 0 0 12px; font-size: 13px; color: var(--admin-text-muted);">üìç Adres (opcjonalnie)</h4>
            <label class="admin-form-field">
              <span>Osoba kontaktowa</span>
              <input type="text" id="shopVendorContactName" placeholder="Jan Kowalski">
            </label>
            <div class="admin-form-grid" style="margin-top: 8px;">
              <label class="admin-form-field">
                <span>Miasto</span>
                <input type="text" id="shopVendorCity" placeholder="Pafos">
              </label>
              <label class="admin-form-field">
                <span>Adres</span>
                <input type="text" id="shopVendorAddress" placeholder="ul. Przyk≈Çadowa 123">
              </label>
            </div>
          </div>

          <!-- Bank Info Section -->
          <div style="margin-top: 16px; padding: 12px; background: var(--admin-bg); border-radius: 8px;">
            <h4 style="margin: 0 0 12px; font-size: 13px; color: var(--admin-text-muted);">üè¶ Dane bankowe (do wyp≈Çat)</h4>
            <label class="admin-form-field">
              <span>Nazwa banku</span>
              <input type="text" id="shopVendorBankName" placeholder="Bank of Cyprus">
            </label>
            <div class="admin-form-grid" style="margin-top: 8px;">
              <label class="admin-form-field">
                <span>IBAN</span>
                <input type="text" id="shopVendorIban" placeholder="CY...">
              </label>
              <label class="admin-form-field">
                <span>SWIFT/BIC</span>
                <input type="text" id="shopVendorSwift" placeholder="BCYPCY2N">
              </label>
            </div>
          </div>

          <!-- Visibility Options -->
          <div style="margin-top: 16px; display: flex; flex-direction: column; gap: 10px;">
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="checkbox" id="shopVendorActive" checked>
              <span>Aktywny</span>
            </label>
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="checkbox" id="shopVendorFeatured">
              <span>‚≠ê Wyr√≥≈ºniony na stronie g≈Ç√≥wnej</span>
            </label>
          </div>

          <div id="shopVendorFormError" class="admin-error-message" hidden></div>

          <div class="poi-form-actions" style="margin-top: 20px;">
            <button type="button" class="btn-secondary" id="shopVendorFormCancel">Anuluj</button>
            <button type="submit" class="btn-primary">üíæ Zapisz dostawcƒô</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Shop Discount Form Modal -->
  <div class="admin-modal" id="shopDiscountModal" hidden>
    <div class="admin-modal-overlay" id="shopDiscountModalOverlay"></div>
    <div class="admin-modal-content" style="max-width: 600px;">
      <header class="admin-modal-header">
        <h3 id="shopDiscountModalTitle">Nowy kod rabatowy</h3>
        <button class="btn-modal-close" id="btnCloseShopDiscountModal">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <div class="admin-modal-body">
        <form id="shopDiscountForm" novalidate>
          <input type="hidden" id="shopDiscountId">
          
          <label class="admin-form-field">
            <span>Kod rabatowy *</span>
            <input type="text" id="shopDiscountCode" required placeholder="SUMMER20" style="text-transform: uppercase;">
          </label>

          <!-- Language Tabs -->
          <div class="lang-tabs" style="display: flex; gap: 8px; margin: 16px 0 12px; border-bottom: 1px solid var(--admin-border);">
            <button type="button" class="lang-tab active" data-lang="pl" onclick="switchDiscountLang('pl')">üáµüá± Polski</button>
            <button type="button" class="lang-tab" data-lang="en" onclick="switchDiscountLang('en')">üá¨üáß English</button>
          </div>

          <!-- Polish Content -->
          <div id="discountLangPL" class="lang-content active">
            <label class="admin-form-field">
              <span>Opis (PL)</span>
              <input type="text" id="shopDiscountDescription" placeholder="Letnia wyprzeda≈º 20% taniej">
            </label>
          </div>

          <!-- English Content -->
          <div id="discountLangEN" class="lang-content">
            <label class="admin-form-field">
              <span>Description (EN)</span>
              <input type="text" id="shopDiscountDescriptionEn" placeholder="Summer sale 20% off">
            </label>
          </div>

          <div class="admin-form-grid">
            <label class="admin-form-field">
              <span>Typ rabatu</span>
              <select id="shopDiscountType">
                <option value="percentage">Procentowy (%)</option>
                <option value="fixed">Kwotowy (‚Ç¨)</option>
                <option value="free_shipping">Darmowa wysy≈Çka</option>
              </select>
            </label>
            <label class="admin-form-field">
              <span>Warto≈õƒá</span>
              <input type="number" id="shopDiscountValue" step="0.01" min="0" placeholder="20">
              <small style="color: var(--admin-text-muted);">% lub ‚Ç¨ zale≈ºnie od typu</small>
            </label>
          </div>

          <div class="admin-form-grid">
            <label class="admin-form-field">
              <span>Min. warto≈õƒá zam√≥wienia (‚Ç¨)</span>
              <input type="number" id="shopDiscountMinOrder" step="0.01" min="0" placeholder="0">
              <small style="color: var(--admin-text-muted);">Puste = bez minimum</small>
            </label>
            <label class="admin-form-field">
              <span>Maks. rabat (‚Ç¨)</span>
              <input type="number" id="shopDiscountMaxDiscount" step="0.01" min="0" placeholder="">
              <small style="color: var(--admin-text-muted);">Tylko dla % - puste = bez limitu</small>
            </label>
          </div>

          <div class="admin-form-grid">
            <label class="admin-form-field">
              <span>Limit u≈ºyƒá (og√≥≈Çem)</span>
              <input type="number" id="shopDiscountUsageLimit" min="0" placeholder="">
              <small style="color: var(--admin-text-muted);">Puste = bez limitu</small>
            </label>
            <label class="admin-form-field">
              <span>Limit na u≈ºytkownika</span>
              <input type="number" id="shopDiscountPerUserLimit" min="0" value="1">
              <small style="color: var(--admin-text-muted);">Ile razy 1 osoba mo≈ºe u≈ºyƒá</small>
            </label>
          </div>

          <div class="admin-form-grid">
            <label class="admin-form-field">
              <span>Data rozpoczƒôcia</span>
              <input type="datetime-local" id="shopDiscountStartDate">
              <small style="color: var(--admin-text-muted);">Puste = od teraz</small>
            </label>
            <label class="admin-form-field">
              <span>Data wyga≈õniƒôcia</span>
              <input type="datetime-local" id="shopDiscountExpiryDate">
              <small style="color: var(--admin-text-muted);">Puste = bezterminowy</small>
            </label>
          </div>

          <!-- Applies To Section -->
          <div style="margin-top: 16px; padding: 12px; background: var(--admin-bg); border-radius: 8px;">
            <h4 style="margin: 0 0 12px; font-size: 13px; color: var(--admin-text-muted);">üéØ Zakres rabatu</h4>
            <label class="admin-form-field">
              <span>Zastosuj do</span>
              <select id="shopDiscountAppliesTo">
                <option value="all">Wszystkich produkt√≥w</option>
                <option value="products">Wybranych produkt√≥w</option>
                <option value="categories">Wybranych kategorii</option>
              </select>
            </label>
            <label class="admin-form-field" style="margin-top: 8px;">
              <span>Notatka wewnƒôtrzna</span>
              <input type="text" id="shopDiscountInternalNote" placeholder="Tylko dla admin√≥w">
            </label>
          </div>

          <!-- Advanced Options -->
          <div style="margin-top: 16px; display: flex; flex-direction: column; gap: 10px;">
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="checkbox" id="shopDiscountActive" checked>
              <span>‚úÖ Aktywny</span>
            </label>
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="checkbox" id="shopDiscountFirstPurchase">
              <span>üÜï Tylko pierwsze zam√≥wienie</span>
            </label>
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="checkbox" id="shopDiscountExcludeSale">
              <span>üè∑Ô∏è Wyklucz produkty przecenione</span>
            </label>
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="checkbox" id="shopDiscountStackable">
              <span>üìö Mo≈ºna ≈ÇƒÖczyƒá z innymi kodami</span>
            </label>
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="checkbox" id="shopDiscountAutoApply">
              <span>üîÑ Auto-zastosowanie (bez wpisywania kodu)</span>
            </label>
          </div>

          <div id="shopDiscountFormError" class="admin-error-message" hidden></div>

          <div class="poi-form-actions" style="margin-top: 20px;">
            <button type="button" class="btn-secondary" id="shopDiscountFormCancel">Anuluj</button>
            <button type="submit" class="btn-primary">üíæ Zapisz kod</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Shipping Method Form Modal -->
  <div class="admin-modal" id="shopShippingMethodModal" hidden>
    <div class="admin-modal-overlay" id="shopShippingMethodModalOverlay"></div>
    <div class="admin-modal-content" style="max-width: 600px; max-height: 90vh; overflow-y: auto;">
      <header class="admin-modal-header">
        <h3 id="shopShippingMethodModalTitle">New Shipping Method</h3>
        <button class="btn-modal-close" id="btnCloseShopShippingMethodModal">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <form id="shopShippingMethodForm" class="admin-modal-body">
        <input type="hidden" id="shippingMethodId">
        <input type="hidden" id="shippingMethodZoneId">
        
        <!-- Language Tabs -->
        <div class="lang-tabs" style="display: flex; gap: 8px; margin-bottom: 12px; border-bottom: 1px solid var(--admin-border);">
          <button type="button" class="lang-tab active" data-lang="pl" onclick="switchShippingMethodLang('pl')">üáµüá± Polski</button>
          <button type="button" class="lang-tab" data-lang="en" onclick="switchShippingMethodLang('en')">üá¨üáß English</button>
        </div>

        <!-- Polish Content -->
        <div id="shippingMethodLangPL" class="lang-content active">
          <label class="admin-form-field">
            <span>Nazwa metody (PL) *</span>
            <input type="text" id="shippingMethodName" required placeholder="Kurier DPD">
          </label>
          <label class="admin-form-field" style="margin-top: 8px;">
            <span>Opis (PL)</span>
            <input type="text" id="shippingMethodDescription" placeholder="Dostawa w 2-3 dni robocze">
          </label>
        </div>

        <!-- English Content -->
        <div id="shippingMethodLangEN" class="lang-content">
          <label class="admin-form-field">
            <span>Method Name (EN)</span>
            <input type="text" id="shippingMethodNameEn" placeholder="DPD Courier">
          </label>
          <label class="admin-form-field" style="margin-top: 8px;">
            <span>Description (EN)</span>
            <input type="text" id="shippingMethodDescriptionEn" placeholder="Delivery in 2-3 business days">
          </label>
        </div>

        <!-- Method Type & Cost -->
        <div style="margin: 16px 0; padding: 16px; background: var(--admin-bg); border-radius: 8px;">
          <h4 style="margin: 0 0 12px; font-size: 14px;">üí∞ Cennik</h4>
          <div class="admin-form-grid">
            <label class="admin-form-field">
              <span>Typ metody</span>
              <select id="shippingMethodType" onchange="updateShippingMethodFields()">
                <option value="flat_rate">Sta≈Ça stawka</option>
                <option value="free">Darmowa dostawa</option>
                <option value="per_weight">Wg wagi</option>
                <option value="per_item">Za ka≈ºdy produkt</option>
              </select>
            </label>
            <label class="admin-form-field">
              <span>Koszt podstawowy (‚Ç¨)</span>
              <input type="number" id="shippingMethodCost" step="0.01" min="0" value="0">
            </label>
          </div>
          
          <div id="shippingWeightFields" style="margin-top: 12px; display: none;">
            <div class="admin-form-grid">
              <label class="admin-form-field">
                <span>Koszt za kg (‚Ç¨)</span>
                <input type="number" id="shippingMethodCostPerKg" step="0.01" min="0" value="0">
              </label>
              <label class="admin-form-field">
                <span>Min. waga (kg)</span>
                <input type="number" id="shippingMethodMinWeight" step="0.001" min="0">
              </label>
            </div>
            <label class="admin-form-field" style="margin-top: 8px;">
              <span>Max. waga (kg)</span>
              <input type="number" id="shippingMethodMaxWeight" step="0.001" min="0">
            </label>
          </div>
          
          <div id="shippingPerItemFields" style="margin-top: 12px; display: none;">
            <label class="admin-form-field">
              <span>Koszt za ka≈ºdy produkt (‚Ç¨)</span>
              <input type="number" id="shippingMethodCostPerItem" step="0.01" min="0" value="0">
            </label>
          </div>
          
          <label class="admin-form-field" style="margin-top: 12px;">
            <span>Darmowa dostawa od (‚Ç¨)</span>
            <input type="number" id="shippingMethodFreeThreshold" step="0.01" min="0" placeholder="np. 100">
          </label>
        </div>

        <!-- Delivery Time -->
        <div style="margin: 16px 0; padding: 16px; background: var(--admin-bg); border-radius: 8px;">
          <h4 style="margin: 0 0 12px; font-size: 14px;">üì¶ Czas dostawy</h4>
          <div class="admin-form-grid">
            <label class="admin-form-field">
              <span>Min. dni dostawy</span>
              <input type="number" id="shippingMethodMinDays" min="0" value="1">
            </label>
            <label class="admin-form-field">
              <span>Max. dni dostawy</span>
              <input type="number" id="shippingMethodMaxDays" min="0" value="3">
            </label>
          </div>
          <label class="admin-form-field" style="margin-top: 8px;">
            <span>Dni na przygotowanie</span>
            <input type="number" id="shippingMethodProcessingDays" min="0" value="1">
          </label>
        </div>

        <!-- Additional Options -->
        <div style="margin: 16px 0; padding: 16px; background: var(--admin-bg); border-radius: 8px;">
          <h4 style="margin: 0 0 12px; font-size: 14px;">‚öôÔ∏è Dodatkowe opcje</h4>
          <div style="display: flex; gap: 16px; flex-wrap: wrap;">
            <label style="display: flex; align-items: center; gap: 8px;">
              <input type="checkbox" id="shippingMethodRequiresSignature">
              <span>Wymaga podpisu</span>
            </label>
            <label style="display: flex; align-items: center; gap: 8px;">
              <input type="checkbox" id="shippingMethodIncludesInsurance">
              <span>Ubezpieczenie</span>
            </label>
            <label style="display: flex; align-items: center; gap: 8px;">
              <input type="checkbox" id="shippingMethodActive" checked>
              <span>Aktywna</span>
            </label>
          </div>
          <div class="admin-form-grid" style="margin-top: 12px;">
            <label class="admin-form-field">
              <span>Koszt ubezpieczenia (‚Ç¨)</span>
              <input type="number" id="shippingMethodInsuranceCost" step="0.01" min="0" value="0">
            </label>
            <label class="admin-form-field">
              <span>Kolejno≈õƒá</span>
              <input type="number" id="shippingMethodSortOrder" min="0" value="0">
            </label>
          </div>
          <label class="admin-form-field" style="margin-top: 8px;">
            <span>URL szablonu ≈õledzenia</span>
            <input type="url" id="shippingMethodTrackingUrl" placeholder="https://tracking.dpd.com/?number={tracking_number}">
          </label>
        </div>

        <div id="shippingMethodFormError" class="admin-error-message" hidden></div>

        <div class="poi-form-actions" style="margin-top: 20px;">
          <button type="button" class="btn-secondary" id="shippingMethodFormCancel">Anuluj</button>
          <button type="submit" class="btn-primary">Zapisz metodƒô</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Shop Order Detail Modal -->
  <div class="admin-modal" id="shopOrderModal" hidden>
    <div class="admin-modal-overlay" id="shopOrderModalOverlay"></div>
    <div class="admin-modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
      <header class="admin-modal-header">
        <h3 id="shopOrderModalTitle">Order Details</h3>
        <button class="btn-modal-close" id="btnCloseShopOrderModal">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <div class="admin-modal-body" id="shopOrderModalContent">
        <p style="text-align: center; color: var(--admin-text-muted);">Loading order details...</p>
      </div>
    </div>
  </div>

  <!-- Shipping Zone Form Modal -->
  <div class="admin-modal" id="shopShippingZoneModal" hidden>
    <div class="admin-modal-overlay" id="shopShippingZoneModalOverlay"></div>
    <div class="admin-modal-content" style="max-width: 500px;">
      <header class="admin-modal-header">
        <h3 id="shopShippingZoneModalTitle">Nowa strefa wysy≈Çki</h3>
        <button class="btn-modal-close" id="btnCloseShopShippingZoneModal">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <form id="shopShippingZoneForm" class="admin-modal-body" novalidate>
        <input type="hidden" id="shippingZoneId">
        <label class="admin-form-field">
          <span>Nazwa strefy (PL) *</span>
          <input type="text" id="shippingZoneName" required placeholder="np. Unia Europejska">
        </label>
        <label class="admin-form-field">
          <span>Nazwa strefy (EN)</span>
          <input type="text" id="shippingZoneNameEn" placeholder="e.g. European Union">
        </label>
        <label class="admin-form-field">
          <span>Kraje (kody ISO) * <small style="color: var(--admin-text-muted);">oddzielone przecinkami, * = wszystkie</small></span>
          <input type="text" id="shippingZoneCountries" required placeholder="PL, DE, FR, CZ lub *">
        </label>
        <div class="admin-form-grid">
          <label class="admin-form-field">
            <span>Kolejno≈õƒá</span>
            <input type="number" id="shippingZoneSortOrder" min="0" value="0">
          </label>
          <label style="display: flex; align-items: center; gap: 8px; padding-top: 24px;">
            <input type="checkbox" id="shippingZoneActive" checked>
            <span>Aktywna</span>
          </label>
        </div>
        <div id="shippingZoneFormError" class="admin-error-message" hidden></div>
        <div class="poi-form-actions" style="margin-top: 20px;">
          <button type="button" class="btn-secondary" id="shippingZoneFormCancel">Anuluj</button>
          <button type="submit" class="btn-primary">Zapisz strefƒô</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Shipping Class Form Modal -->
  <div class="admin-modal" id="shopShippingClassModal" hidden>
    <div class="admin-modal-overlay" id="shopShippingClassModalOverlay"></div>
    <div class="admin-modal-content" style="max-width: 500px;">
      <header class="admin-modal-header">
        <h3 id="shopShippingClassModalTitle">Nowa klasa wysy≈Çkowa</h3>
        <button class="btn-modal-close" id="btnCloseShopShippingClassModal">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <form id="shopShippingClassForm" class="admin-modal-body" novalidate>
        <input type="hidden" id="shippingClassId">
        <label class="admin-form-field">
          <span>Nazwa (PL) *</span>
          <input type="text" id="shippingClassName" required placeholder="np. Produkty ciƒô≈ºkie">
        </label>
        <label class="admin-form-field">
          <span>Nazwa (EN)</span>
          <input type="text" id="shippingClassNameEn" placeholder="e.g. Heavy Items">
        </label>
        <label class="admin-form-field">
          <span>Opis</span>
          <input type="text" id="shippingClassDescription" placeholder="Opcjonalny opis">
        </label>
        <div class="admin-form-grid">
          <label class="admin-form-field">
            <span>Dodatkowy koszt (‚Ç¨)</span>
            <input type="number" id="shippingClassExtraCost" step="0.01" min="0" value="0">
          </label>
          <label class="admin-form-field">
            <span>Koszt za kg (‚Ç¨)</span>
            <input type="number" id="shippingClassCostPerKg" step="0.01" min="0" value="0">
          </label>
        </div>
        <label class="admin-form-field">
          <span>Op≈Çata za obs≈Çugƒô (‚Ç¨)</span>
          <input type="number" id="shippingClassHandlingFee" step="0.01" min="0" value="0">
        </label>
        <div style="display: flex; gap: 16px; flex-wrap: wrap; margin-top: 12px;">
          <label style="display: flex; align-items: center; gap: 8px;">
            <input type="checkbox" id="shippingClassRequiresSignature">
            <span>Wymaga podpisu</span>
          </label>
          <label style="display: flex; align-items: center; gap: 8px;">
            <input type="checkbox" id="shippingClassRequiresInsurance">
            <span>Wymaga ubezpieczenia</span>
          </label>
        </div>
        <div id="shippingClassFormError" class="admin-error-message" hidden></div>
        <div class="poi-form-actions" style="margin-top: 20px;">
          <button type="button" class="btn-secondary" id="shippingClassFormCancel">Anuluj</button>
          <button type="submit" class="btn-primary">Zapisz klasƒô</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Tax Class Form Modal -->
  <div class="admin-modal" id="shopTaxClassModal" hidden>
    <div class="admin-modal-overlay" id="shopTaxClassModalOverlay"></div>
    <div class="admin-modal-content" style="max-width: 600px; max-height: 90vh; overflow-y: auto;">
      <header class="admin-modal-header">
        <h3 id="shopTaxClassModalTitle">Nowa klasa podatkowa</h3>
        <button class="btn-modal-close" id="btnCloseShopTaxClassModal">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <form id="shopTaxClassForm" class="admin-modal-body" novalidate>
        <input type="hidden" id="taxClassId">
        <label class="admin-form-field">
          <span>Nazwa (PL) *</span>
          <input type="text" id="taxClassName" required placeholder="np. Stawka standardowa VAT">
        </label>
        <label class="admin-form-field">
          <span>Nazwa (EN)</span>
          <input type="text" id="taxClassNameEn" placeholder="e.g. Standard VAT Rate">
        </label>
        <label class="admin-form-field">
          <span>Opis</span>
          <input type="text" id="taxClassDescription" placeholder="np. Standardowa stawka 19% VAT">
        </label>
        <div style="display: flex; gap: 16px; flex-wrap: wrap; margin-top: 12px;">
          <label style="display: flex; align-items: center; gap: 8px;">
            <input type="checkbox" id="taxClassDefault">
            <span>Domy≈õlna</span>
          </label>
          <label style="display: flex; align-items: center; gap: 8px;">
            <input type="checkbox" id="taxClassActive" checked>
            <span>Aktywna</span>
          </label>
        </div>

        <!-- Tax Rates Section -->
        <div id="taxRatesSection" style="margin-top: 20px; padding: 16px; background: var(--admin-bg); border-radius: 8px; display: none;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
            <h4 style="margin: 0; font-size: 14px;">üíµ Stawki VAT per kraj</h4>
            <button type="button" class="btn-secondary" onclick="addTaxRate()" style="font-size: 12px; padding: 4px 10px;">‚ûï Dodaj stawkƒô</button>
          </div>
          <div id="taxRatesList"></div>
        </div>

        <div id="taxClassFormError" class="admin-error-message" hidden></div>
        <div class="poi-form-actions" style="margin-top: 20px;">
          <button type="button" class="btn-secondary" id="taxClassFormCancel">Anuluj</button>
          <button type="submit" class="btn-primary">Zapisz klasƒô</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Customer Group Form Modal -->
  <div class="admin-modal" id="shopCustomerGroupModal" hidden>
    <div class="admin-modal-overlay" id="shopCustomerGroupModalOverlay"></div>
    <div class="admin-modal-content" style="max-width: 500px;">
      <header class="admin-modal-header">
        <h3 id="shopCustomerGroupModalTitle">Nowa grupa klient√≥w</h3>
        <button class="btn-modal-close" id="btnCloseShopCustomerGroupModal">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <form id="shopCustomerGroupForm" class="admin-modal-body" novalidate>
        <input type="hidden" id="customerGroupId">
        <label class="admin-form-field">
          <span>Nazwa (PL) *</span>
          <input type="text" id="customerGroupName" required placeholder="np. VIP">
        </label>
        <label class="admin-form-field">
          <span>Nazwa (EN)</span>
          <input type="text" id="customerGroupNameEn" placeholder="e.g. VIP">
        </label>
        <label class="admin-form-field">
          <span>Opis</span>
          <input type="text" id="customerGroupDescription" placeholder="Opcjonalny opis grupy">
        </label>
        <div class="admin-form-grid">
          <label class="admin-form-field">
            <span>Typ rabatu</span>
            <select id="customerGroupDiscountType">
              <option value="percentage">Procentowy (%)</option>
              <option value="fixed">Sta≈Ça kwota (‚Ç¨)</option>
            </select>
          </label>
          <label class="admin-form-field">
            <span>Warto≈õƒá rabatu</span>
            <input type="number" id="customerGroupDiscountValue" step="0.01" min="0" value="0">
          </label>
        </div>
        <label class="admin-form-field">
          <span>Min. liczba zam√≥wie≈Ñ <small style="color: var(--admin-text-muted);">do automatycznego przypisania</small></span>
          <input type="number" id="customerGroupMinOrders" min="0" placeholder="opcjonalne">
        </label>
        <div style="display: flex; gap: 16px; flex-wrap: wrap; margin-top: 12px;">
          <label style="display: flex; align-items: center; gap: 8px;">
            <input type="checkbox" id="customerGroupDefault">
            <span>Domy≈õlna</span>
          </label>
          <label style="display: flex; align-items: center; gap: 8px;">
            <input type="checkbox" id="customerGroupActive" checked>
            <span>Aktywna</span>
          </label>
        </div>
        <div id="customerGroupFormError" class="admin-error-message" hidden></div>
        <div class="poi-form-actions" style="margin-top: 20px;">
          <button type="button" class="btn-secondary" id="customerGroupFormCancel">Anuluj</button>
          <button type="submit" class="btn-primary">Zapisz grupƒô</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Attribute Form Modal -->
  <div class="admin-modal" id="shopAttributeModal" hidden>
    <div class="admin-modal-overlay" id="shopAttributeModalOverlay"></div>
    <div class="admin-modal-content" style="max-width: 550px;">
      <header class="admin-modal-header">
        <h3 id="shopAttributeModalTitle">Nowy atrybut</h3>
        <button class="btn-modal-close" id="btnCloseShopAttributeModal">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </header>
      <form id="shopAttributeForm" class="admin-modal-body" novalidate>
        <input type="hidden" id="attributeId">
        <label class="admin-form-field">
          <span>Nazwa (PL) *</span>
          <input type="text" id="attributeName" required placeholder="np. Rozmiar">
        </label>
        <label class="admin-form-field">
          <span>Nazwa (EN)</span>
          <input type="text" id="attributeNameEn" placeholder="e.g. Size">
        </label>
        <label class="admin-form-field">
          <span>Typ</span>
          <select id="attributeType">
            <option value="select">Lista wyboru</option>
            <option value="color">Kolor (z podglƒÖdem)</option>
            <option value="text">Tekst</option>
            <option value="number">Liczba</option>
          </select>
        </label>
        <label class="admin-form-field">
          <span>Warto≈õci <small style="color: var(--admin-text-muted);">oddzielone przecinkami</small></span>
          <input type="text" id="attributeValues" placeholder="S, M, L, XL lub Czerwony, Niebieski, Zielony">
        </label>
        <div style="display: flex; gap: 16px; flex-wrap: wrap; margin-top: 12px;">
          <label style="display: flex; align-items: center; gap: 8px;">
            <input type="checkbox" id="attributeFilterable" checked>
            <span>Filtrowalny</span>
          </label>
          <label style="display: flex; align-items: center; gap: 8px;">
            <input type="checkbox" id="attributeVariation" checked>
            <span>Do wariant√≥w</span>
          </label>
          <label style="display: flex; align-items: center; gap: 8px;">
            <input type="checkbox" id="attributeVisible" checked>
            <span>Widoczny</span>
          </label>
        </div>
        <div id="attributeFormError" class="admin-error-message" hidden></div>
        <div class="poi-form-actions" style="margin-top: 20px;">
          <button type="button" class="btn-secondary" id="attributeFormCancel">Anuluj</button>
          <button type="submit" class="btn-primary">Zapisz atrybut</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Toast Notifications -->
  <div id="toast-container" class="toast-container"></div>

</body>
</html>

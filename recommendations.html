<!DOCTYPE html>
<html lang="pl" dir="ltr">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FCSE0876CR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);} 
    gtag('js', new Date());
    gtag('config', 'G-FCSE0876CR');
  </script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Security: Content Security Policy (skopiowane z index.html) -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.googletagmanager.com https://www.google-analytics.com https://region1.google-analytics.com https://esm.sh https://*.esm.sh https://unpkg.com https://cdn.jsdelivr.net https://static.cloudflareinsights.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://unpkg.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https: blob:; connect-src 'self' https://daoohnbnnowmmcizgvrq.supabase.co https://*.supabase.co wss://daoohnbnnowmmcizgvrq.supabase.co wss://*.supabase.co https://www.google-analytics.com https://region1.google-analytics.com https://esm.sh https://*.esm.sh https://unpkg.com https://*.tile.openstreetmap.org; frame-src 'self' https://docs.google.com; object-src 'none'; base-uri 'self'; form-action 'self'; upgrade-insecure-requests;" />

  <meta name="theme-color" content="#2563eb" />
  <meta name="robots" content="index,follow" />
  <title>Rekomendacje â€“ CyprusEye Quest</title>
  <meta name="description" content="Odkryj nasze sprawdzone rekomendacje â€“ najlepsze miejsca, restauracje, hotele i atrakcje na Cyprze z ekskluzywnymi zniÅ¼kami." />
  <link rel="canonical" href="https://www.cypruseye.com/recommendations.html" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Jost:wght@300;400;500;600;700&display=swap" />
  <link href="https://fonts.googleapis.com/css2?family=Jost:wght@300;400;500;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'" />
  <noscript>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  </noscript>

  <!-- Global styles takie jak w index.html -->
  <link rel="stylesheet" href="assets/css/tokens.css" />
  <link rel="stylesheet" href="assets/css/base.css" />
  <link rel="stylesheet" href="assets/css/components.css" />
  <link rel="stylesheet" href="assets/css/header-metrics.css" />
  <link rel="stylesheet" href="assets/css/mobile.css" />
  <link rel="stylesheet" href="assets/css/mobile-nav.css" />
  <link rel="stylesheet" href="assets/css/rtl.css" />
  <link rel="stylesheet" href="assets/css/language-switcher.css" />
  <link rel="stylesheet" href="assets/css/language-selector.css" />
  <link rel="stylesheet" href="css/toast.css" />
  <link rel="stylesheet" href="assets/css/recommendations.css" />

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin data-leaflet-resource="style" />

  <meta name="ce-auth" content="on" />
  <script type="module" src="/js/supabaseClient.js"></script>
  <script type="module" src="/js/toast.js"></script>
  <script type="module" src="/js/auth.js"></script>
  <script type="module" src="/js/authUi.js"></script>
</head>
<body data-navigation="multi-page" data-seo-page="recommendations">
  <div id="authMessage" class="auth-message" role="status" aria-live="polite"></div>

  <!-- HEADER: taki sam ukÅ‚ad jak w index.html, tylko aktywna zakÅ‚adka Rekomendacje -->
  <header class="app-header">
    <div class="header-top">
      <div class="brand">
        <img
          src="assets/cyprus_logo-1000x1054.png"
          alt="WakacjeCypr.com â€“ logo Å¼Ã³Å‚wia z flagÄ… Polski"
          data-i18n-attrs="alt:header.logoAlt"
          width="1000"
          height="1054"
          loading="eager"
          fetchpriority="high"
        />
        <div class="brand-title" data-i18n="header.brand">
          <p class="brand-name">WakacjeCypr <span>Quest</span></p>
          <p class="tagline">Zwiedzaj Cypr w interaktywny sposÃ³b â€“ zdobywaj odznaki, doÅ›wiadczenie i odkrywaj nasze najlepsze oferty.</p>
        </div>

        <div class="user-stats-section" data-auth="user-only">
          <a href="achievements.html" class="user-profile-card" id="profileButton" aria-label="MÃ³j profil">
            <img id="headerUserAvatar" class="profile-avatar" src="assets/cyprus_logo-1000x1054.png" alt="Avatar" width="50" height="50" loading="eager" />
            <div class="profile-info">
              <div class="profile-name">MÃ³j Profil</div>
              <div class="profile-status">Poziom 1 â€¢ 0 odznak</div>
            </div>
          </a>

          <div class="stats-cards">
            <a class="card metric-card metric-card-link" role="listitem" href="achievements.html">
              <p class="metric-label" data-i18n="metrics.level.label">Poziom</p>
              <p class="metric-value" id="headerLevelNumber">1</p>
              <p class="metric-subtext" id="headerLevelStatus" data-i18n="metrics.level.subtext">ZdobÄ…dÅº pierwsze check-iny, aby awansowaÄ‡!</p>
            </a>
            <a class="card metric-card metric-card-link" role="listitem" href="achievements.html">
              <p class="metric-label" data-i18n="metrics.xp.label">DoÅ›wiadczenie</p>
              <p class="metric-value"><span id="headerXpPoints">0</span> XP</p>
              <div class="metric-progress" role="img" aria-label="PostÄ™p doÅ›wiadczenia" data-i18n-attrs="aria-label:metrics.xp.aria">
                <div class="metric-progress-track">
                  <div class="metric-progress-fill is-width-zero" id="headerXpFill"></div>
                </div>
                <p class="metric-progress-text" id="headerXpProgressText" data-i18n="metrics.xp.progress">0 / 150 XP do kolejnego poziomu</p>
              </div>
            </a>
            <a class="card metric-card metric-card-link" role="listitem" href="achievements.html">
              <p class="metric-label" data-i18n="metrics.badges.label">Odznaki</p>
              <p class="metric-value" id="headerBadgesCount">0</p>
              <p class="metric-subtext" data-i18n="metrics.badges.subtext">Odkrywaj atrakcje i kolekcjonuj pamiÄ…tki.</p>
            </a>
          </div>
        </div>
      </div>

      <div class="header-top-actions">
        <div class="header-auth-controls">
          <button
            id="notificationsToggle"
            class="ghost notifications-toggle"
            data-gated="true"
            data-require-auth
            data-i18n="header.notifications"
            type="button"
            aria-haspopup="true"
            aria-expanded="false"
            aria-controls="notificationsPanel"
          >
            ğŸ”” <span class="btn-text">Powiadomienia</span>
            <span id="notificationsCounter" class="notifications-counter" hidden>0</span>
          </button>
          <div id="auth-actions" class="auth-actions-inline" aria-live="polite">
            <button class="btn btn-sm" data-auth="login" data-auth-login-mode="modal" data-i18n="header.login" data-i18n-attrs="aria-label:auth.login.aria" aria-label="Zaloguj do konta">Zaloguj</button>
            <button class="btn btn-sm" data-auth="guest" data-i18n="auth.guest.button" data-i18n-attrs="aria-label:auth.guest.aria" aria-label="Tryb gry jako goÅ›Ä‡">GoÅ›Ä‡</button>
            <button class="btn btn-sm" data-auth="logout" data-i18n="header.logout" data-i18n-attrs="aria-label:auth.logout.aria" aria-label="Wyloguj z konta">Wyloguj</button>
            <button id="sosToggle" class="btn btn-sm btn-danger" type="button" aria-haspopup="dialog" aria-controls="sosModal" data-i18n="header.sosToggle">ğŸš¨ SOS</button>
          </div>
          <div data-auth="spinner" class="auth-spinner-inline" aria-live="polite" data-i18n="auth.status.spinner" hidden>ÅÄ…czenie...</div>
        </div>

        <div class="header-actions" aria-label="Szybkie dziaÅ‚ania" data-i18n-attrs="aria-label:header.quickActions.aria">
          <div class="header-actions-primary" data-tour-target="quick-actions">
            <a class="ghost header-link" href="packing.html" data-i18n="nav.packing">ğŸ’ Pakowanie</a>
            <a class="ghost header-link" href="kupon.html" data-i18n="header.coupon" aria-label="Kupon">ğŸŸï¸ Kupon</a>
            <a class="ghost header-link" href="car-rental-landing.html" data-i18n="header.carRentalLink">ğŸš— Wynajem auta</a>
            <a class="ghost header-link" href="trips.html" aria-label="Wycieczki">ğŸ§­ Wycieczki</a>
            <a class="ghost header-link" href="hotels.html" aria-label="Hotele">ğŸ¨ Hotele</a>
          </div>
        </div>
      </div>
    </div>

    <nav class="header-tabs" role="tablist" data-i18n-attrs="aria-label:header.tabs.aria" aria-label="Nawigacja gÅ‚Ã³wna" data-tour-target="tabs-navigation">
      <a href="index.html" class="header-tab" id="headerAdventureTab" data-i18n="nav.adventure">ğŸ¯ Twoja przygoda</a>
      <a href="community.html" class="header-tab" id="headerCommunityTab" data-i18n="nav.community">ğŸ’¬ SpoÅ‚ecznoÅ›Ä‡</a>
      <a href="recommendations.html" class="header-tab is-active" id="headerRecommendationsTab" data-i18n="nav.recommendations">âœ¨ Polecane</a>
      <a href="tasks.html" class="header-tab" id="headerTasksTab" data-i18n="nav.tasks">âœ… Zadania do wykonania</a>
    </nav>
  </header>

  <!-- PANEL POWIADOMIEÅƒ (jak w index) -->
  <div id="notificationsPanel" class="notifications-panel" hidden aria-live="polite">
    <div class="notifications-panel-header">
      <h3 data-i18n="notifications.title">Powiadomienia</h3>
      <div class="notifications-panel-actions">
        <button type="button" class="ghost" id="notificationsMarkAll" data-i18n="notifications.markAll">Oznacz wszystkie jako przeczytane</button>
        <button type="button" class="ghost notifications-close" id="notificationsClose" aria-label="Zamknij powiadomienia" data-i18n="notifications.close">âœ•</button>
      </div>
    </div>
    <p id="notificationsPanelEmpty" class="notifications-empty" data-i18n="notifications.empty">Zaloguj siÄ™, aby zobaczyÄ‡ swoje powiadomienia.</p>
  </div>

  <!-- GÅÃ“WNA CZÄ˜ÅšÄ† STRONY REKOMENDACJI -->
  <main class="recommendations-main" data-page="recommendations">
    <!-- Hero -->
    <section class="recommendations-hero">
      <div class="hero-content">
        <h1>âœ¨ Nasze Rekomendacje</h1>
        <p class="hero-subtitle">Sprawdzone miejsca, ktÃ³re kochamy na Cyprze â€“ z ekskluzywnymi zniÅ¼kami i bonusami dla Ciebie.</p>
      </div>
    </section>

    <!-- Filtry kategorii -->
    <section class="recommendations-filters" aria-label="Filtry kategorii">
      <div class="filters-container">
        <div class="filters-header">
          <h2>Wybierz kategoriÄ™</h2>
          <button id="clearFilters" class="btn-text" type="button" style="display:none">WyczyÅ›Ä‡ filtry</button>
        </div>
        <div id="categoriesFilters" class="filters-grid" aria-live="polite">
          <!-- Dynamiczne przyciski kategorii z js/recommendations.js -->
        </div>
      </div>
    </section>

    <!-- Lista rekomendacji -->
    <section class="recommendations-section" aria-label="Lista rekomendowanych miejsc">
      <div id="loadingState" class="loading-state">
        <div class="loading-spinner" aria-hidden="true"></div>
        <p>Åadowanie rekomendacji...</p>
      </div>

      <div id="recommendationsGrid" class="recommendations-grid" aria-live="polite">
        <!-- Karty rekomendacji bÄ™dÄ… generowane w js/recommendations.js -->
      </div>

      <div id="emptyState" class="empty-state" style="display:none">
        <div class="empty-state-icon">ğŸ”</div>
        <h3>Brak wynikÃ³w</h3>
        <p>Nie znaleÅºliÅ›my miejsc dla wybranych filtrÃ³w. SprÃ³buj zmieniÄ‡ kategoriÄ™ lub wyczyÅ›ciÄ‡ filtry.</p>
        <button type="button" class="btn" onclick="clearFilters()">PokaÅ¼ wszystkie miejsca</button>
      </div>
    </section>

    <!-- Modal szczegÃ³Å‚Ã³w rekomendacji -->
    <div id="detailModal" class="recommendation-modal" style="display:none" role="dialog" aria-modal="true" aria-labelledby="detailModalTitle">
      <div class="modal-overlay" onclick="closeDetailModal()"></div>
      <div class="modal-content">
        <button class="modal-close" type="button" aria-label="Zamknij" onclick="closeDetailModal()">âœ•</button>
        <div id="modalDetails" class="modal-body">
          <!-- ZawartoÅ›Ä‡ modalu wypeÅ‚nia js/recommendations.js (openDetailModal) -->
        </div>
      </div>
    </div>
  </main>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin data-leaflet-resource="script"></script>
  <script src="/js/recommendations.js"></script>
  
  <!-- Language system -->
  <script src="/js/languageSwitcher.js"></script>
  <script src="/js/languageSelector.js" defer></script>
  <script src="/js/i18n.js" defer></script>
  <script src="/js/header-stats.js" defer></script>
  <script src="/js/seo.js" defer></script>
  <script src="/js/mobile-nav.js" defer></script>
</body>
</html>

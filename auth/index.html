<!doctype html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Account â€” CyprusEye</title>
<meta name="ce-auth" content="on">
<meta name="supabase-url" content="https://daoohnbnnowmmcizgvrq.supabase.co">
<meta name="supabase-anon" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRhb29obmJubm93bWNpemd2cnEiLCJyb2xlIjoiYW5vbiIsImlhdCI6MTc2MDc2OTA0OSwiZXhwIjoyMDc2MzQ1MDQ5fQ.AJrmxrk18yWxL1_Ejk_SZ1-X04YxN4C8LXCn9c3yFSM">
<link rel="preload" href="https://esm.sh/@supabase/supabase-js@2" as="script">
</head><body>
<h1>Account</h1>

<section aria-labelledby="signup-h"><h2 id="signup-h">Create account</h2>
<form id="signup" novalidate>
  <label>Email <input type="email" name="email" required autocomplete="email"></label>
  <label>Password <input type="password" name="password" required minlength="6" autocomplete="new-password"></label>
  <button type="submit">Create account</button>
</form></section>

<section aria-labelledby="login-h"><h2 id="login-h">Log in</h2>
<form id="login" novalidate>
  <label>Email <input type="email" name="email" required autocomplete="email"></label>
  <label>Password <input type="password" name="password" required autocomplete="current-password"></label>
  <button type="submit">Log in</button>
</form></section>

<section aria-labelledby="reset-h"><h2 id="reset-h">Reset password</h2>
<form id="reset" novalidate>
  <label>Email <input type="email" name="email" required></label>
  <button type="submit">Send reset link</button>
</form></section>

<p id="auth-state" aria-live="polite"></p>

<script type="module">
import { createClient } from "https://esm.sh/@supabase/supabase-js@2";
const URL = document.querySelector('meta[name="supabase-url"]')?.content || 'https://daoohnbnnowmmcizgvrq.supabase.co';
const KEY = document.querySelector('meta[name="supabase-anon"]')?.content || 'REPLACED_BY_HEAD';
const s = createClient(URL, KEY);


document.getElementById('signup')?.addEventListener('submit', async (e)=>{
  e.preventDefault();
  const email = e.target.email.value.trim();
  const password = e.target.password.value;
  const { error } = await s.auth.signUp({
    email, password,
    options: { emailRedirectTo: 'https://cypruseye.com/auth/callback' }
  });
  alert(error ? error.message : 'Check your email to confirm.');
});


document.getElementById('login')?.addEventListener('submit', async (e)=>{
  e.preventDefault();
  const email = e.target.email.value.trim();
  const password = e.target.password.value;
  const { error } = await s.auth.signInWithPassword({ email, password });
  if (error) alert(error.message); else window.location.href = '/account';
});


document.getElementById('reset')?.addEventListener('submit', async (e)=>{
  e.preventDefault();
  const email = e.target.email.value.trim();
  const { error } = await s.auth.resetPasswordForEmail(email, { redirectTo: 'https://cypruseye.com/reset' });
  alert(error ? error.message : 'Reset link sent.');
});


s.auth.onAuthStateChange(async (_evt, session)=>{
  const el = document.getElementById('auth-state');
  if (el) el.textContent = session ? `Logged in as ${session.user.email}` : 'Logged out';
});
</script>
</body></html>

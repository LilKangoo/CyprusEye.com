<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#2563eb" />
    <title>Twoje osiągnięcia – WakacjeCypr Quest</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Nunito:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="app-header achievements-header">
      <div class="auth-bar" aria-label="Panel konta">
        <div class="auth-controls">
          <button id="openAuthModal" class="ghost" type="button" aria-haspopup="dialog" aria-controls="authModal">
            🔐 Zaloguj się
          </button>
          <div class="user-menu" id="userMenu" hidden>
            <span id="userGreeting" aria-live="polite"></span>
            <div class="user-menu-actions">
              <button type="button" class="ghost" id="accountSettingsBtn">⚙️ Ustawienia konta</button>
              <button type="button" class="ghost" id="logoutBtn">Wyloguj</button>
            </div>
          </div>
        </div>
      </div>

      <div class="achievements-hero">
        <div class="brand">
          <img src="cyprus_logo-1000x1054.png" alt="WakacjeCypr.com – logo żółwia z flagą Polski" />
          <div class="brand-title">
            <h1>WakacjeCypr <span>Quest</span></h1>
            <p class="tagline">Zwiedzaj Cypr w interaktywny sposób – zdobywaj odznaki, doświadczenie i odkrywaj nasze najlepsze oferty.</p>
          </div>
        </div>
        <div class="achievements-hero-content">
          <div>
            <h2>Twoje osiągnięcia</h2>
            <p>Sprawdź zdobyte poziomy, XP oraz pamiątki z wypraw po Cyprze.</p>
          </div>
          <a class="ghost achievements-back" href="app.html">← Wróć do mapy przygody</a>
        </div>
      </div>

      <div class="header-metrics" role="list" aria-live="polite">
        <a class="metric-card metric-card-link is-current" role="listitem" href="achievements.html">
          <p class="metric-label">Poziom</p>
          <p class="metric-value" id="headerLevelNumber">1</p>
          <p class="metric-subtext" id="headerLevelStatus">Zdobądź pierwsze check-iny, aby awansować!</p>
        </a>
        <a class="metric-card metric-card-link is-current" role="listitem" href="achievements.html">
          <p class="metric-label">Doświadczenie</p>
          <p class="metric-value"><span id="headerXpPoints">0</span> XP</p>
          <div class="metric-progress" role="img" aria-label="Postęp doświadczenia">
            <div class="metric-progress-track">
              <div class="metric-progress-fill" id="headerXpFill" style="width: 0%"></div>
            </div>
            <p class="metric-progress-text" id="headerXpProgressText">0 / 150 XP do kolejnego poziomu</p>
          </div>
        </a>
        <a class="metric-card metric-card-link is-current" role="listitem" href="achievements.html">
          <p class="metric-label">Odznaki</p>
          <p class="metric-value" id="headerBadgesCount">0</p>
          <p class="metric-subtext">Odkrywaj atrakcje i kolekcjonuj pamiątki.</p>
        </a>
      </div>

      <nav class="header-tabs achievements-tabs" aria-label="Nawigacja osiągnięć">
        <span class="header-tab is-active" role="tab" aria-selected="true">🏆 Podsumowanie osiągnięć</span>
        <a class="header-tab" role="tab" aria-selected="false" href="app.html">🎯 Twoja przygoda</a>
      </nav>
    </header>

    <main class="achievements-main">
      <section class="progress-panel surface-card achievements-progress" aria-labelledby="achievementsTitle">
        <header class="achievements-progress-header">
          <div>
            <h2 id="achievementsTitle">Podsumowanie postępów</h2>
            <p class="achievements-subtitle">Zobacz swój obecny poziom, doświadczenie i tempo zdobywania odznak.</p>
          </div>
          <p class="achievements-next" id="achievementsNextMilestone"></p>
        </header>
        <div class="achievements-progress-body">
          <p class="level-indicator">Poziom <span id="levelNumber">1</span> • <span id="xpPoints">0</span> XP</p>
          <div class="xp-bar">
            <div class="xp-fill" id="xpFill" style="width: 0%"></div>
          </div>
          <p class="xp-progress" id="xpProgressText">0 / 150 XP do kolejnego poziomu</p>
          <p class="level-status" id="levelStatus"></p>
        </div>
        <div class="guest-reset" id="guestResetContainer" hidden>
          <button type="button" class="ghost" id="guestResetProgress">🔄 Wyzeruj statystyki gościa</button>
          <p class="guest-reset-hint">Usuwa cały zapisany lokalnie postęp, XP i odznaki.</p>
        </div>
        <footer class="achievements-stats">
          <div>
            <strong>Zdobyte odznaki</strong>
            <p><span id="achievementsBadgesCount">0</span> unikalnych pamiątek</p>
          </div>
          <div>
            <strong>Odwiedzone miejsca</strong>
            <p><span id="achievementsVisitedCount">0</span> lokalizacji z mapy</p>
          </div>
        </footer>
      </section>

      <section class="surface-card achievements-badges" aria-labelledby="achievementsBadgesTitle">
        <h2 id="achievementsBadgesTitle">Zdobyte odznaki</h2>
        <p class="achievements-section-intro">
          Kolekcjonuj odznaki za odwiedzone miejsca i aktywności. Każda z nich to nowa historia z cypryjskiej przygody.
        </p>
        <ul class="badges-list" id="badgesList"></ul>
      </section>

      <section class="surface-card achievements-visited" aria-labelledby="achievementsVisitedTitle">
        <h2 id="achievementsVisitedTitle">Odwiedzone miejsca</h2>
        <p id="achievementsVisitedEmpty" class="achievements-empty">Jeszcze nie odwiedziłeś żadnego miejsca. Skocz na mapę i rozpocznij swoją przygodę!</p>
        <ul id="achievementsVisitedList" class="achievements-visited-list"></ul>
      </section>
    </main>

    <div class="auth-modal" id="authModal" hidden role="dialog" aria-modal="true" aria-labelledby="authTitle">
      <div class="auth-dialog">
        <header class="auth-header">
          <div>
            <h2 id="authTitle">Dołącz do WakacjeCypr Quest</h2>
            <p>Zaloguj się lub załóż konto, aby zapisywać swoje przygody na wszystkich urządzeniach.</p>
          </div>
          <button type="button" class="icon-button" id="authClose" aria-label="Zamknij okno logowania">✕</button>
        </header>

        <div class="auth-content">
          <form id="loginForm" class="auth-form" autocomplete="on">
            <h3>Zaloguj się</h3>
            <label for="loginEmail">Adres e-mail</label>
            <input id="loginEmail" name="loginEmail" type="email" autocomplete="email" required />
            <label for="loginPassword">Hasło</label>
            <input id="loginPassword" name="loginPassword" type="password" autocomplete="current-password" required />
            <button type="submit" class="primary">Zaloguj się</button>
          </form>

          <form id="registerForm" class="auth-form" autocomplete="on">
            <h3>Załóż konto</h3>
            <label for="registerUsername">Nazwa użytkownika</label>
            <input id="registerUsername" name="registerUsername" type="text" autocomplete="username" required />
            <label for="registerEmail">Adres e-mail</label>
            <input id="registerEmail" name="registerEmail" type="email" autocomplete="email" required />
            <label for="registerPassword">Hasło</label>
            <input id="registerPassword" name="registerPassword" type="password" autocomplete="new-password" required minlength="8" />
            <button type="submit" class="secondary">Zarejestruj się</button>
          </form>
        </div>

        <footer class="auth-footer">
          <p id="authMessage" class="auth-message" role="status" aria-live="polite"></p>
          <button type="button" class="ghost" id="guestAccessBtn">Kontynuuj jako gość</button>
        </footer>
      </div>
    </div>

    <div class="account-modal" id="accountModal" hidden role="dialog" aria-modal="true" aria-labelledby="accountTitle">
      <div class="account-dialog">
        <header class="account-header">
          <div>
            <h2 id="accountTitle">Ustawienia konta</h2>
            <p>Zaktualizuj swoje dane logowania lub rozpocznij przygodę od nowa.</p>
          </div>
          <button type="button" class="icon-button" id="accountClose" aria-label="Zamknij ustawienia konta">✕</button>
        </header>

        <div class="account-content">
          <form id="accountUsernameForm" class="account-form">
            <h3>Zmień nazwę użytkownika</h3>
            <label for="accountUsername">Nowa nazwa użytkownika</label>
            <input id="accountUsername" name="accountUsername" type="text" autocomplete="username" required />
            <p class="form-hint">Zmiana zapisze się od razu i będzie widoczna w przywitaniu.</p>
            <button type="submit" class="secondary">Zapisz nazwę</button>
          </form>

          <form id="accountPasswordForm" class="account-form">
            <h3>Zaktualizuj hasło</h3>
            <label for="accountCurrentPassword">Obecne hasło</label>
            <input id="accountCurrentPassword" name="accountCurrentPassword" type="password" autocomplete="current-password" required />
            <label for="accountNewPassword">Nowe hasło</label>
            <input id="accountNewPassword" name="accountNewPassword" type="password" autocomplete="new-password" required minlength="8" />
            <label for="accountConfirmPassword">Powtórz nowe hasło</label>
            <input id="accountConfirmPassword" name="accountConfirmPassword" type="password" autocomplete="new-password" required minlength="8" />
            <p class="form-hint">Hasło powinno mieć co najmniej 8 znaków.</p>
            <button type="submit" class="secondary">Zmień hasło</button>
          </form>

          <section class="account-reset">
            <h3>Restart gry</h3>
            <p>Wyzeruj zdobyte odznaki oraz doświadczenie i rozpocznij eksplorację od poziomu pierwszego.</p>
            <button type="button" class="danger" id="accountResetProgress">🔄 Zresetuj postęp</button>
          </section>
        </div>

        <footer class="account-footer">
          <p id="accountMessage" class="account-message" role="status" aria-live="polite"></p>
        </footer>
      </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="app.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FCSE0876CR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-FCSE0876CR');
  </script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- Security: Content Security Policy -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.googletagmanager.com https://esm.sh https://unpkg.com https://static.cloudflareinsights.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://unpkg.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https: blob:; connect-src 'self' https://daoohnbnnowmmcizgvrq.supabase.co https://www.google-analytics.com https://region1.google-analytics.com https://*.tile.openstreetmap.org https://unpkg.com https://esm.sh; frame-src 'self' https://docs.google.com; object-src 'none'; base-uri 'self'; form-action 'self'; upgrade-insecure-requests;">
  
  <meta name="theme-color" content="#2563eb" />
  <meta name="robots" content="noindex,nofollow" />
  <title data-i18n="dashboard.meta.title">User Dashboard ‚Äì CyprusEye Quest</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Jost:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  
  <link rel="stylesheet" href="assets/css/tokens.css" />
  <link rel="stylesheet" href="assets/css/base.css" />
  <link rel="stylesheet" href="assets/css/components.css" />
  <link rel="stylesheet" href="assets/css/header-metrics.css" />
  <link rel="stylesheet" href="assets/css/current-place.css" />
  <link rel="stylesheet" href="assets/css/mobile.css" />
  <link rel="stylesheet" href="assets/css/mobile-nav.css" />
  <link rel="stylesheet" href="assets/css/rtl.css" />
  <link rel="stylesheet" href="assets/css/language-switcher.css" />
  <link rel="stylesheet" href="assets/css/language-selector.css" />
  <link rel="stylesheet" href="css/toast.css" />
  <link rel="stylesheet" href="css/successPopup.css" />
  <link rel="stylesheet" href="css/modal-ios-fix.css" />
  <!-- New Dashboard Styles -->
  <link rel="stylesheet" href="assets/css/dashboard.css" />

  <meta name="ce-auth" content="on" />
  <script type="module" src="js/supabaseClient.js"></script>
  <script type="module" src="js/toast.js"></script>
  <script type="module" src="js/auth.js"></script>
  <script type="module" src="js/authUi.js"></script>
</head>
<body data-navigation="dashboard" class="dashboard-body">
  
  <div id="authMessage" class="auth-message" role="status" aria-live="polite"></div>

  <!-- Global Header -->
  <header class="app-header nav-modern">
      <div class="nav-modern__top" aria-label="Global header">
        <div class="brand nav-modern__brand-block">
          <a href="index.html" class="nav-modern__brand-link" aria-label="CyprusEye Quest home">
            <img
              src="assets/cyprus_logo-1000x1054.png"
              alt="WakacjeCypr.com ‚Äì logo ≈º√≥≈Çwia z flagƒÖ Polski"
              data-i18n-attrs="alt:header.logoAlt"
              width="1000"
              height="1054"
              loading="eager"
              fetchpriority="high"
            />
            <div class="brand-title" data-i18n="header.brand">
              <p class="brand-name">CyprusEye Quest &amp; Travel</p>
            </div>
          </a>
        </div>

        <div class="nav-modern__stats nav-modern__stats-lite" data-auth="user-only">
          <div class="stats-lite__pill">
            <a href="achievements.html" class="stats-lite__profile" id="profileButton" aria-label="M√≥j profil">
              <img
                id="headerUserAvatar"
                class="profile-avatar"
                src="assets/cyprus_logo-1000x1054.png"
                alt="Avatar"
                width="48"
                height="48"
                loading="eager"
              />
              <div class="profile-info">
                <p class="profile-name" data-i18n="header.profile">M√≥j Profil</p>
                <p class="profile-status" data-i18n="header.statusPlaceholder">Poziom 1 ‚Ä¢ 0 odznak</p>
              </div>
            </a>

            <div class="stats-lite__panel">
              <div class="stats-lite__level">
                <span class="stats-lite__label">LVL</span>
                <span class="stats-lite__value" id="headerLevelNumber">1</span>
                <span class="stats-lite__status" id="headerLevelStatus" data-i18n="metrics.level.subtext">Status poziomu</span>
              </div>

              <div class="stats-lite__xp" role="img" aria-label="Postƒôp do≈õwiadczenia" data-i18n-attrs="aria-label:metrics.xp.aria">
                <span class="stats-lite__xp-current"><span id="headerXpPoints">0</span> XP</span>
                <div class="stats-lite__xp-bar">
                  <div class="stats-lite__xp-fill is-width-zero" id="headerXpFill"></div>
                </div>
                <span class="stats-lite__xp-target" id="headerXpProgressText" data-i18n="metrics.xp.progress">
                  0 / 150 XP do kolejnego poziomu
                </span>
              </div>

              <div class="stats-lite__badges">
                <span class="stats-lite__label">üèÜ</span>
                <span class="stats-lite__value" id="headerBadgesCount">0</span>
              </div>
            </div>
          </div>
        </div>

        <div class="nav-modern__top-actions">
          <div class="nav-modern__auth">
            <div id="auth-actions" class="auth-actions-inline" aria-live="polite">
              <button
                class="nav-modern__login"
                data-open-auth
                data-auth="anon-only"
                data-tour-target="login-button"
                data-i18n="header.login"
                data-i18n-attrs="aria-label:auth.login.aria"
                aria-label="Zaloguj do konta"
              >
                Zaloguj
              </button>
<button class="btn btn-sm" data-auth="logout" data-i18n="header.logout" data-i18n-attrs="aria-label:auth.logout.aria" aria-label="Wyloguj z konta">Wyloguj</button>
            </div>
            <div data-auth="spinner" class="auth-spinner-inline" aria-live="polite" data-i18n="auth.status.spinner" hidden>≈ÅƒÖczenie...</div>
          </div>

          <button
            id="sosToggle"
            class="nav-modern__sos"
            type="button"
            aria-haspopup="dialog"
            aria-controls="sosModal"
            data-i18n="header.sosToggle"
          >
            ‚ö†Ô∏è SOS
          </button>

          <div class="language-pill-group" data-language-toggle aria-label="Language selector" data-i18n-attrs="aria-label:language.switcher.label">
            <button type="button" class="language-pill" data-language-pill="pl" aria-pressed="false">PL</button>
            <button type="button" class="language-pill" data-language-pill="en" aria-pressed="false">EN</button>
            <!-- <button type="button" class="language-pill" data-language-pill="el" aria-pressed="false">EL</button> -->
            <!-- <button type="button" class="language-pill" data-language-pill="he" aria-pressed="false">HE</button> -->
          </div>
        </div>
      </div>
    <div class="nav-modern__shell">

      <div class="nav-modern__bars" data-tour-target="tabs-navigation">
        <button class="nav-modern__toggle-btn" id="navToggleBtn" aria-expanded="false" aria-controls="navLinksRow" data-i18n="nav.toggle">
          ‚ò∞ Nawigacja
        </button>
        <div class="nav-modern__links-row" id="navLinksRow" aria-label="G≈Ç√≥wna nawigacja i skr√≥ty" data-i18n-attrs="aria-label:header.quickActions.aria">
          <nav class="nav-modern__tabs" role="tablist" data-i18n-attrs="aria-label:header.tabs.aria" aria-label="Nawigacja g≈Ç√≥wna">
            <a href="index.html" class="nav-modern__tab" id="headerAdventureTab" data-i18n="nav.adventure">
              üéØ Przygoda
            </a>
            <a href="community.html" class="nav-modern__tab" id="headerPackingTab" data-i18n="nav.community">
              üí¨ Spo≈Çeczno≈õƒá
            </a>
            <a href="recommendations.html" class="nav-modern__tab" id="headerRecommendationsTab" data-i18n="nav.recommendations">
              ‚ú® Polecane
            </a>
            <a href="tasks.html" class="nav-modern__tab" id="headerTasksTab" data-i18n="nav.tasks">
              ‚òëÔ∏è Zadania
            </a>
          </nav>

          <div class="nav-modern__chips">
            <a class="nav-chip" href="packing.html" data-i18n="nav.packing">üéí Pakowanie</a>
            <a class="nav-chip" href="kupon.html" data-i18n="header.coupon">üéüÔ∏è Kupon</a>
            <a class="nav-chip" href="car-rental-landing.html" data-i18n="header.carRentalLink">üöó Wynajem auta</a>
            <a class="nav-chip" href="trips.html" data-i18n="nav.trips">üß≠ Wycieczki</a>
            <a class="nav-chip" href="hotels.html" data-i18n="nav.hotels">üè® Hotele</a>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Dashboard Layout -->
  <div class="dashboard-container">
    
    <!-- Sidebar -->
    <aside class="dashboard-sidebar">
      <div class="user-brief">
        <div class="user-brief-avatar">
          <img id="sidebarAvatar" src="assets/cyprus_logo-1000x1054.png" alt="Avatar">
        </div>
        <div class="user-brief-info">
          <p id="sidebarUsername" class="user-brief-name">Loading...</p>
          <p id="sidebarLevel" class="user-brief-level">Level 1</p>
        </div>
      </div>

      <nav class="sidebar-nav">
        <button class="nav-item active" data-section="overview">
          <span class="icon">üìä</span>
          <span data-i18n="dashboard.nav.overview">Overview</span>
        </button>
        <button class="nav-item" data-section="reservations">
          <span class="icon">üìÖ</span>
          <span data-i18n="dashboard.nav.reservations">Orders & Bookings</span>
          <span class="badge-count" id="reservationsCount" hidden>0</span>
        </button>
        <button class="nav-item" data-section="content">
          <span class="icon">üìù</span>
          <span data-i18n="dashboard.nav.content">My Content</span>
        </button>
        <button class="nav-item" data-section="achievements">
          <span class="icon">üèÜ</span>
          <span data-i18n="dashboard.nav.achievements">Achievements</span>
        </button>
        <button class="nav-item" data-section="settings">
          <span class="icon">‚öôÔ∏è</span>
          <span data-i18n="dashboard.nav.settings">Settings</span>
        </button>
      </nav>

      <div class="sidebar-footer">
        <button class="nav-item logout-btn" data-auth="logout">
          <span class="icon">üö™</span>
          <span data-i18n="auth.logout">Log out</span>
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="dashboard-main">
      
      <!-- Mobile Sidebar Toggle (Visible only on mobile) -->
      <div class="dashboard-mobile-toggle-bar">
        <button class="mobile-sidebar-toggle" id="dashboardSidebarToggle">
          ‚ò∞ <span class="mobile-page-title" data-i18n="dashboard.nav.overview">Menu</span>
        </button>
      </div>

      <!-- SECTION: OVERVIEW -->
      <section id="section-overview" class="dashboard-section active">
        <div class="section-header">
          <h1 data-i18n="dashboard.overview.title">Welcome back!</h1>
          <p data-i18n="dashboard.overview.subtitle">Here is what's happening with your adventure.</p>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon xp">‚ú®</div>
            <div class="stat-details">
              <h3 data-i18n="metrics.xp">Experience</h3>
              <p class="stat-number" id="overviewXP">0 XP</p>
              <div class="progress-bar-sm">
                <div class="progress-fill" id="overviewXPBar" style="width: 0%"></div>
              </div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon level">üÜô</div>
            <div class="stat-details">
              <h3 data-i18n="metrics.level">Level</h3>
              <p class="stat-number" id="overviewLevel">1</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon places">üìç</div>
            <div class="stat-details">
              <h3 data-i18n="metrics.visited">Visited</h3>
              <p class="stat-number" id="overviewVisited">0</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon bookings">üìÖ</div>
            <div class="stat-details">
              <h3 data-i18n="metrics.activeBookings">Active Bookings</h3>
              <p class="stat-number" id="overviewActiveBookings">0</p>
            </div>
          </div>
        </div>

        <div class="content-grid">
          <!-- Recent Activity -->
          <div class="card dashboard-card wide">
            <div class="card-header">
              <h2 data-i18n="dashboard.activity.title">Recent Activity</h2>
            </div>
            <div class="card-body" id="recentActivityList">
              <p class="empty-state" data-i18n="dashboard.activity.empty">No recent activity.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- SECTION: RESERVATIONS -->
      <section id="section-reservations" class="dashboard-section">
        <div class="section-header">
          <h1 data-i18n="dashboard.reservations.title">My Orders & Bookings</h1>
          <p data-i18n="dashboard.reservations.subtitle">Track current status of your trips, hotels and rentals.</p>
        </div>

        <div class="reservations-container">
          <!-- Tabs -->
          <div class="tabs-line">
            <button class="tab-btn active" data-filter="all" data-i18n="dashboard.reservations.all">All</button>
            <button class="tab-btn" data-filter="pending" data-i18n="dashboard.reservations.pending">Pending</button>
            <button class="tab-btn" data-filter="confirmed" data-i18n="dashboard.reservations.confirmed">Confirmed</button>
            <button class="tab-btn" data-filter="completed" data-i18n="dashboard.reservations.completed">History</button>
          </div>

          <div class="reservations-list" id="reservationsList">
            <!-- Loading State -->
            <div class="loading-state">
              <div class="spinner"></div>
              <p>Loading orders...</p>
            </div>
          </div>
        </div>
      </section>

      <!-- SECTION: CONTENT (New) -->
      <section id="section-content" class="dashboard-section">
        <div class="section-header">
          <h1 data-i18n="dashboard.content.title">My Content</h1>
          <p data-i18n="dashboard.content.subtitle">Manage your photos and comments.</p>
        </div>

        <div class="content-container">
          <div class="tabs-line">
            <button class="tab-btn active" data-content-tab="photos" data-i18n="dashboard.content.photos">Photos</button>
            <button class="tab-btn" data-content-tab="comments" data-i18n="dashboard.content.comments">Comments</button>
          </div>

          <div id="content-photos" class="content-tab-pane active">
            <div class="photos-grid" id="userPhotosList">
              <div class="loading-state"><div class="spinner"></div><p>Loading photos...</p></div>
            </div>
          </div>

          <div id="content-comments" class="content-tab-pane" style="display:none">
            <div class="comments-list" id="userCommentsList">
              <div class="loading-state"><div class="spinner"></div><p>Loading comments...</p></div>
            </div>
          </div>
        </div>
      </section>

      <!-- SECTION: ACHIEVEMENTS -->
      <section id="section-achievements" class="dashboard-section">
        <div class="section-header">
          <h1 data-i18n="dashboard.achievements.title">Badges & Rewards</h1>
        </div>

        <div class="tabs-line">
          <button class="tab-btn active" data-achievements-tab="badges" data-i18n="dashboard.achievements.tab.badges">üèÖ Badges</button>
          <button class="tab-btn" data-achievements-tab="quests" data-i18n="dashboard.achievements.tab.quests">‚úÖ Completed Quests</button>
        </div>

        <div id="achievements-badges" class="achievements-tab-pane active">
          <div class="badges-grid" id="badgesGrid">
            <!-- Filled by JS -->
            <p>Loading badges...</p>
          </div>
        </div>

        <div id="achievements-quests" class="achievements-tab-pane" style="display:none">
          <div class="quests-grid" id="completedQuestsList">
            <div class="loading-state"><div class="spinner"></div><p>Loading quests...</p></div>
          </div>
        </div>
      </section>

      <!-- SECTION: SETTINGS -->
      <section id="section-settings" class="dashboard-section">
        <div class="section-header">
          <h1 data-i18n="dashboard.settings.title">Account Settings</h1>
        </div>
        <div class="settings-grid">
          <!-- Profile Card -->
          <div class="card dashboard-card">
            <div class="card-header">
              <h2 data-i18n="profile.profile">Profile</h2>
            </div>
            <div class="card-body settings-form">
              <!-- Avatar -->
              <div class="form-group">
                <label data-i18n="profile.avatar.change">Avatar</label>
                <div class="avatar-upload-row">
                  <img id="settingsAvatarPreview" src="assets/cyprus_logo-1000x1054.png" width="64" height="64">
                  <button class="btn btn-secondary btn-sm" id="uploadAvatarBtn" data-i18n="profile.avatar.change">Change</button>
                  <input type="file" id="avatarInput" hidden accept="image/*">
                </div>
              </div>
              
              <!-- Username -->
              <div class="form-group">
                <label data-i18n="profile.username.label">Username</label>
                <div class="input-group">
                  <input type="text" id="settingsUsername" disabled>
                  <button class="btn btn-ghost btn-sm" id="editUsernameBtn">Edit</button>
                  <button class="btn btn-primary btn-sm" id="saveUsernameBtn" hidden>Save</button>
                </div>
              </div>

              <!-- Name -->
              <div class="form-group">
                <label data-i18n="profile.name.label">Name</label>
                <div class="input-group">
                  <input type="text" id="settingsName" disabled>
                  <button class="btn btn-ghost btn-sm" id="editNameBtn">Edit</button>
                  <button class="btn btn-primary btn-sm" id="saveNameBtn" hidden>Save</button>
                </div>
              </div>

              <!-- Email -->
              <div class="form-group">
                <label data-i18n="profile.email.label">Email</label>
                <div class="input-group">
                  <input type="email" id="settingsEmail" disabled>
                  <button class="btn btn-ghost btn-sm" id="changeEmailBtn" data-i18n="profile.email.change">Change</button>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Referral Card -->
          <div class="card dashboard-card">
            <div class="card-header">
              <h2 data-i18n="profile.referral">Refer a Friend</h2>
            </div>
            <div class="card-body">
              <p class="text-muted" data-i18n="profile.referral.desc">Share your link and earn bonuses.</p>
              <div class="input-group referral-group">
                <input type="text" id="referralLink" readonly value="≈Åadowanie...">
                <button class="btn btn-secondary" id="copyReferralBtn" data-i18n="profile.referral.copy">Copy</button>
              </div>
            </div>
          </div>

          <!-- Security Card -->
          <div class="card dashboard-card">
            <div class="card-header">
              <h2 data-i18n="profile.security">Security</h2>
            </div>
            <div class="card-body">
              <button class="btn btn-outline w-100 mb-3" id="changePasswordBtn" data-i18n="profile.security.password.change">Change Password</button>
              <div class="danger-zone">
                <p class="text-danger small mb-2" data-i18n="profile.security.delete.warning">Irreversible action.</p>
                <button class="btn btn-danger btn-sm w-100" id="deleteAccountBtn" data-i18n="profile.security.delete">Delete Account</button>
              </div>
            </div>
          </div>
        </div>
      </section>

    </main>
  </div>

  <!-- Booking Details Modal -->
  <div id="bookingDetailsModal" class="modal-overlay" hidden>
    <div class="modal-content dashboard-modal">
      <div class="modal-header">
        <h2 id="bookingDetailTitle">Booking Details</h2>
        <button class="close-modal-btn" id="btnCloseModalX">&times;</button>
      </div>
      <div class="modal-body" id="bookingDetailBody">
        <!-- Details injected by JS -->
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="btnCloseModalBtn">Close</button>
      </div>
    </div>
  </div>

  <!-- SOS Modal -->
  <div
    class="sos-modal"
    id="sosModal"
    hidden
    role="dialog"
    aria-modal="true"
    aria-labelledby="sosTitle"
    aria-describedby="sosDescription"
  >
    <div class="sos-dialog" role="document" tabindex="-1">
      <header class="sos-header">
        <div>
          <h2 id="sosTitle" data-i18n="sos.title">SOS</h2>
          <p id="sosDescription" data-i18n="sos.description">
            Szybki dostƒôp do numer√≥w alarmowych, kontaktu z ambasadƒÖ oraz wskaz√≥wek medycznych.
          </p>
        </div>
        <button
          type="button"
          class="icon-button"
          id="sosClose"
          aria-label="Zamknij SOS"
          data-i18n="sos.close"
        >
          X
        </button>
      </header>

      <div class="sos-grid" aria-describedby="sosDescription">
        <section class="sos-card">
          <h3 data-i18n="sos.emergency.title">üöë Numery alarmowe na Cyprze</h3>
          <ul>
            <li>
              <strong>112</strong>
              <p data-i18n="sos.emergency.eu">
                Uniwersalny numer alarmowy UE (policja, pogotowie, stra≈º po≈ºarna). <a href="tel:112">Zadzwo≈Ñ teraz</a>
              </p>
            </li>
            <li>
              <strong>199</strong>
              <p data-i18n="sos.emergency.cyprus">
                Cypryjski numer alarmowy ‚Äì dzia≈Ça r√≥wnolegle z 112. <a href="tel:199">Po≈ÇƒÖcz</a>
              </p>
            </li>
            <li>
              <strong>+357 22 802 020</strong>
              <p data-i18n="sos.emergency.police">
                Ca≈Çodobowa linia policji (spoza Cypru wybierz pe≈Çny numer kierunkowy). <a href="tel:+35722802020">Zadzwo≈Ñ</a>
              </p>
            </li>
          </ul>
        </section>

        <section class="sos-card">
          <h3 data-i18n="sos.embassy.title">üõ°Ô∏è Ambasada RP w Nikozji</h3>
          <ul>
            <li>
              <strong>Telefon alarmowy</strong>
              <p data-i18n="sos.embassy.hotline">
                <a href="tel:+35799660451">+357 99 660 451</a> (wsparcie w nag≈Çych wypadkach obywateli RP).
              </p>
            </li>
            <li>
              <strong>Recepcja</strong>
              <p data-i18n="sos.embassy.reception">
                <a href="tel:+35722751777">+357 22 751 777</a> (pon.‚Äìpt. w godz. pracy plac√≥wki).
              </p>
            </li>
            <li>
              <strong>Adres</strong>
              <p data-i18n="sos.embassy.address">
                14, Ifigenias Street, 2007 Nikozja ‚Ä¢ <a href="https://maps.google.com/?q=Embassy+of+Poland+in+Cyprus" target="_blank" rel="noopener">Wyznacz trasƒô</a>
              </p>
            </li>
            <li>
              <strong>E-mail</strong>
              <p data-i18n="sos.embassy.email"><a href="mailto:nicosia.info@msz.gov.pl">nicosia.info@msz.gov.pl</a></p>
            </li>
          </ul>
        </section>

        <section class="sos-card">
          <h3 data-i18n="sos.healthcare.title">üè• Najbli≈ºsza pomoc medyczna</h3>
          <ul>
            <li>
              <strong>Paphos General Hospital</strong>
              <p data-i18n="sos.healthcare.hospital">
                Ca≈Çodobowa izba przyjƒôƒá, Anavargos, Pafos. <a href="tel:+35726803000">+357 26 803 000</a> ‚Ä¢
                <a href="https://maps.google.com/?q=Paphos+General+Hospital" target="_blank" rel="noopener">Mapa dojazdu</a>
              </p>
            </li>
            <li>
              <strong data-i18n="sos.healthcare.searchTitle">Wyszukaj szpital w pobli≈ºu</strong>
              <p data-i18n="sos.healthcare.search">
                <a href="https://www.google.com/maps/search/hospital+near+me/" target="_blank" rel="noopener">Otw√≥rz listƒô szpitali na Mapach Google</a>
                i udostƒôpnij lokalizacjƒô, aby zobaczyƒá najbli≈ºsze opcje.
              </p>
            </li>
            <li>
              <strong data-i18n="sos.healthcare.pharmacyTitle">Dy≈ºurna apteka</strong>
              <p data-i18n="sos.healthcare.pharmacy">
                Sprawd≈∫ aktualne dy≈ºury na <a href="https://pharmacy.dl.moh.gov.cy/" target="_blank" rel="noopener">stronie Ministerstwa Zdrowia</a>
                lub wyszukaj <a href="https://www.google.com/maps/search/pharmacy+near+me/" target="_blank" rel="noopener">aptekƒô w pobli≈ºu</a>.
              </p>
            </li>
          </ul>
          <p class="sos-note" data-i18n="sos.healthcare.note">
            W sytuacji zagro≈ºenia ≈ºycia zawsze dzwo≈Ñ pod 112 i dok≈Çadnie podaj lokalizacjƒô. W aplikacji w≈ÇƒÖcz udostƒôpnianie
            lokalizacji, aby szybciej odnale≈∫ƒá pomoc na mapie.
          </p>
        </section>
      </div>
    </div>
  </div>

  <!-- Change Password Modal -->
  <div id="changePasswordModal" class="modal-overlay" hidden>
    <div class="modal-content dashboard-modal modal-sm">
      <div class="modal-header">
        <h2 data-i18n="profile.modal.password.title">Change Password</h2>
        <button class="close-modal-btn close-pwd-modal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label data-i18n="profile.modal.password.new">New Password</label>
          <input type="password" id="newPasswordInput" class="form-control" minlength="6">
        </div>
        <div class="form-group">
          <label data-i18n="profile.modal.password.confirm">Confirm Password</label>
          <input type="password" id="confirmPasswordInput" class="form-control" minlength="6">
        </div>
        <p id="pwdError" class="text-danger small" hidden></p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary close-pwd-modal">Cancel</button>
        <button class="btn btn-primary" id="submitPasswordBtn" data-i18n="profile.modal.password.submit">Change</button>
      </div>
    </div>
  </div>

  <!-- Change Email Modal -->
  <div id="changeEmailModal" class="modal-overlay" hidden>
    <div class="modal-content dashboard-modal modal-sm">
      <div class="modal-header">
        <h2 data-i18n="profile.modal.email.title">Change Email</h2>
        <button class="close-modal-btn close-email-modal">&times;</button>
      </div>
      <div class="modal-body">
        <p class="small text-muted" data-i18n="profile.modal.email.info">We will send a confirmation link.</p>
        <div class="form-group">
          <label data-i18n="profile.modal.email.new">New Email</label>
          <input type="email" id="newEmailInput" class="form-control">
        </div>
        <p id="emailError" class="text-danger small" hidden></p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary close-email-modal">Cancel</button>
        <button class="btn btn-primary" id="submitEmailBtn">Send Link</button>
      </div>
    </div>
  </div>

  <!-- Delete Account Modal -->
  <div id="deleteAccountModal" class="modal-overlay" hidden>
    <div class="modal-content dashboard-modal modal-sm">
      <div class="modal-header">
        <h2 data-i18n="profile.modal.delete.title">Are you sure?</h2>
        <button class="close-modal-btn close-del-modal">&times;</button>
      </div>
      <div class="modal-body">
        <p class="text-danger" data-i18n="profile.security.delete.warning">This is irreversible.</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary close-del-modal">Cancel</button>
        <button class="btn btn-danger" id="confirmDeleteBtn" data-i18n="profile.modal.delete.confirm">Delete Account</button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="js/languageSwitcher.js"></script>
  <script src="js/languageSelector.js" defer></script>
  <script src="js/i18n.js" defer></script>
  <script src="js/mobile-nav.js" defer></script>
  <script src="js/header-dropdown.js" defer></script>
  <script type="module" src="js/referral.js"></script>
  
  <!-- Load core logic -->
  <script type="module" src="js/dashboard.js"></script>
  
  <!-- Referral link is now handled by dashboard.js -->

</body>
</html>

!function(){const SUPPORTED_LANGUAGES={pl:{label:"Polski",shortLabel:"PL",flag:"叼",dir:"ltr"},en:{label:"English",shortLabel:"EN",flag:"",dir:"ltr"},el:{label:"位位畏谓喂魏维",shortLabel:"EL",flag:"",dir:"ltr"},he:{label:"注专转",shortLabel:"HE",flag:"",dir:"rtl"}},translationCache=new Map,originalContent=new WeakMap,originalAttributes=new WeakMap,appI18n=window.appI18n||{language:"pl",translations:{}};function safeLocalStorage(action,key,value){try{if("get"===action)return window.localStorage.getItem(key);"set"===action&&window.localStorage.setItem(key,value)}catch(error){}return null}function restoreOriginalAttribute(element,attribute){const stored=originalAttributes.get(element);if(!stored||!Object.prototype.hasOwnProperty.call(stored,attribute))return;const value=stored[attribute];null==value?element.removeAttribute(attribute):element.setAttribute(attribute,value)}function getTranslationEntry(translations,key){return key&&translations?translations[key]:null}function getTranslationString(translations,key){const entry=getTranslationEntry(translations,key);if("string"==typeof entry)return entry;if(entry&&"object"==typeof entry){if("string"==typeof entry.text)return entry.text;if("string"==typeof entry.html)return entry.html}return null}function applyTranslations(language,translations={}){appI18n.language=language,appI18n.translations[language]=translations;const languageInfo=SUPPORTED_LANGUAGES[language]||SUPPORTED_LANGUAGES.pl;document.documentElement.lang=language,document.documentElement.dir=languageInfo.dir,document.querySelectorAll("[data-i18n]").forEach(element=>{!function(element,translations){const key=element.dataset.i18n,attrMap=function(spec,fallbackKey){const map=new Map;return spec?(spec.split(",").forEach(raw=>{const entry=raw.trim();if(!entry)return;const parts=entry.split(":"),attr=parts[0].trim();if(!attr)return;const key=parts[1]&&parts[1].trim();map.set(attr,key||fallbackKey||null)}),map):map}(element.dataset.i18nAttrs,key);!function(element,attrMap){if(originalContent.has(element)||originalContent.set(element,element.innerHTML),attrMap.size&&!originalAttributes.has(element)){const attrs={};attrMap.forEach((_,attribute)=>{attrs[attribute]=element.getAttribute(attribute)}),originalAttributes.set(element,attrs)}}(element,attrMap);let applied=!1;const entry=getTranslationEntry(translations,key);"string"==typeof entry?(element.textContent=entry,applied=!0):entry&&"object"==typeof entry&&"string"==typeof entry.html?(element.innerHTML=entry.html,applied=!0):entry&&"object"==typeof entry&&"string"==typeof entry.text?(element.textContent=entry.text,applied=!0):key||(applied=!0),applied||function(element){originalContent.has(element)&&(element.innerHTML=originalContent.get(element))}(element),attrMap.size&&attrMap.forEach((attributeKey,attribute)=>{const value=getTranslationString(translations,attributeKey);if("string"==typeof value)element.setAttribute(attribute,value);else if(attributeKey===key){const fallback=getTranslationString(translations,key);"string"==typeof fallback?element.setAttribute(attribute,fallback):restoreOriginalAttribute(element,attribute)}else restoreOriginalAttribute(element,attribute)})}(element,translations)}),function(language){document.querySelectorAll("a[href]").forEach(anchor=>{const href=anchor.getAttribute("href");if(href&&!href.startsWith("#")&&!href.startsWith("mailto:")&&!href.startsWith("tel:"))try{const url=new URL(href,window.location.origin);if(url.origin!==window.location.origin)return;url.searchParams.set("lang",language);const relativePath=url.pathname.startsWith("/")?url.pathname.slice(1):url.pathname;anchor.setAttribute("href",`${relativePath}${url.search}${url.hash}`)}catch(error){}}),document.querySelectorAll("[data-page-url]").forEach(element=>{const target=element.getAttribute("data-page-url");if(target)try{const url=new URL(target,window.location.origin);if(url.origin!==window.location.origin)return;url.searchParams.set("lang",language),element.setAttribute("data-page-url",`${url.pathname}${url.search}${url.hash}`)}catch(error){}})}(language),document.dispatchEvent(new CustomEvent("wakacjecypr:languagechange",{detail:{language:language}}))}function updateSwitcherValue(language){const container=document.querySelector(".language-switcher");if(!container)return;const info=SUPPORTED_LANGUAGES[language]||SUPPORTED_LANGUAGES.pl,toggle=container.querySelector(".language-switcher-toggle");if(toggle){toggle.setAttribute("data-language",language);const flag=toggle.querySelector(".language-switcher-toggle-flag"),text=toggle.querySelector(".language-switcher-toggle-text");flag&&(flag.textContent=info.flag||""),text&&(text.textContent=info.shortLabel||language.toUpperCase())}const menu=container.querySelector(".language-switcher-menu"),options=container.querySelectorAll(".language-switcher-option");let activeId=null;options.forEach(option=>{const isActive=option.dataset.language===language;option.classList.toggle("is-active",isActive),option.setAttribute("aria-selected",isActive?"true":"false"),isActive&&(activeId=option.id||null)}),menu&&(activeId?menu.setAttribute("aria-activedescendant",activeId):menu.removeAttribute("aria-activedescendant"))}function setLanguage(language,{persist:persist=!0,updateUrl:updateUrl=!0}={}){let target=language;Object.prototype.hasOwnProperty.call(SUPPORTED_LANGUAGES,target)||(target="pl"),persist&&function(language){safeLocalStorage("set","ce_lang",language)}(target),updateUrl&&function(language){const current=new URL(window.location.href);current.searchParams.get("lang")!==language&&(current.searchParams.set("lang",language),window.history.replaceState({},"",current))}(target);const langConfig=SUPPORTED_LANGUAGES[target];langConfig&&(document.documentElement.setAttribute("dir",langConfig.dir),document.documentElement.setAttribute("lang",target));const apply=(translations={})=>{const run=()=>{!function(language){if(document.querySelector(".language-switcher"))return void updateSwitcherValue(language);const container=document.createElement("div");container.className="language-switcher";const toggle=document.createElement("button");toggle.type="button",toggle.id="languageSwitcherToggle",toggle.className="language-switcher-toggle",toggle.dataset.testid="language-switcher-toggle",toggle.setAttribute("aria-haspopup","listbox"),toggle.setAttribute("aria-expanded","false"),toggle.setAttribute("aria-label","Language selector"),toggle.dataset.i18nAttrs="aria-label:language.switcher.label";const toggleFlag=document.createElement("span");toggleFlag.className="language-switcher-toggle-flag",toggle.append(toggleFlag);const toggleText=document.createElement("span");toggleText.className="language-switcher-toggle-text",toggle.append(toggleText);const menu=document.createElement("ul");menu.className="language-switcher-menu",menu.id="languageSwitcherMenu",menu.setAttribute("role","listbox"),menu.setAttribute("aria-label","Language selector"),menu.dataset.i18nAttrs="aria-label:language.switcher.label",menu.setAttribute("aria-hidden","true"),toggle.setAttribute("aria-controls",menu.id);const setOptionsTabIndex=value=>{menu.querySelectorAll(".language-switcher-option").forEach(option=>{option.tabIndex=value})};function handleDocumentPointerDown(event){container.contains(event.target)||closeMenu()}function handleDocumentKeydown(event){"Escape"===event.key&&(event.preventDefault(),closeMenu({focusToggle:!0}))}function openMenu(){if(container.classList.contains("is-open"))return;container.classList.add("is-open"),toggle.setAttribute("aria-expanded","true"),menu.setAttribute("aria-hidden","false"),setOptionsTabIndex(0);const activeOption=menu.querySelector(".language-switcher-option.is-active")||menu.querySelector(".language-switcher-option");window.requestAnimationFrame(()=>{activeOption&&activeOption.focus()}),document.addEventListener("pointerdown",handleDocumentPointerDown,!0),document.addEventListener("keydown",handleDocumentKeydown)}function closeMenu({focusToggle:focusToggle=!1}={}){container.classList.contains("is-open")&&(container.classList.remove("is-open"),toggle.setAttribute("aria-expanded","false"),menu.setAttribute("aria-hidden","true"),setOptionsTabIndex(-1),document.removeEventListener("pointerdown",handleDocumentPointerDown,!0),document.removeEventListener("keydown",handleDocumentKeydown),focusToggle&&toggle.focus())}Object.keys(SUPPORTED_LANGUAGES).forEach(code=>{const info=SUPPORTED_LANGUAGES[code],item=document.createElement("li");item.className="language-switcher-menu-item";const option=document.createElement("button");option.type="button",option.className="language-switcher-option",option.id=`languageSwitcherOption-${code}`,option.dataset.language=code,option.dataset.testid=`language-option-${code}`,option.setAttribute("role","option"),option.setAttribute("aria-selected",code===language?"true":"false"),option.tabIndex=-1;const flag=document.createElement("span");flag.className="language-switcher-option-flag",flag.textContent=info.flag||"",option.append(flag);const label=document.createElement("span");label.className="language-switcher-option-label",label.dataset.i18n=`language.option.${code}`,label.textContent=info.label,option.append(label),option.addEventListener("click",()=>{closeMenu(),code!==appI18n.language&&setLanguage(code)}),item.append(option),menu.append(item)}),toggle.addEventListener("click",()=>{container.classList.contains("is-open")?closeMenu():openMenu()}),toggle.addEventListener("keydown",event=>{"ArrowDown"!==event.key&&"Enter"!==event.key&&" "!==event.key||container.classList.contains("is-open")||(event.preventDefault(),openMenu())}),menu.addEventListener("keydown",function(event){const options=Array.from(menu.querySelectorAll(".language-switcher-option"));if(!options.length)return;const currentIndex=options.indexOf(document.activeElement);"ArrowDown"===event.key?(event.preventDefault(),options[-1===currentIndex?0:(currentIndex+1)%options.length].focus()):"ArrowUp"===event.key?(event.preventDefault(),options[-1===currentIndex?options.length-1:(currentIndex-1+options.length)%options.length].focus()):"Home"===event.key?(event.preventDefault(),options[0].focus()):"End"===event.key?(event.preventDefault(),options[options.length-1].focus()):"Escape"===event.key?(event.preventDefault(),closeMenu({focusToggle:!0})):"Tab"===event.key&&closeMenu()}),container.append(toggle,menu),document.body.append(container),updateSwitcherValue(language),setOptionsTabIndex(-1)}(target),applyTranslations(target,translations),updateSwitcherValue(target)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",run,{once:!0}):run()},cached=translationCache.get(target);cached?cached.then(apply):function(language){if(!language||!Object.prototype.hasOwnProperty.call(SUPPORTED_LANGUAGES,language))return Promise.resolve({});if(translationCache.has(language))return translationCache.get(language);const promise=fetch(`translations/${language}.json`).then(response=>{if(!response.ok)throw new Error(`Failed to load translations for ${language}`);return response.json()}).catch(error=>(console.error("Unable to load translation file.",error),{}));return translationCache.set(language,promise),promise}(target).then(translations=>{translationCache.set(target,Promise.resolve(translations||{})),apply(translations)})}function init(){const languageSelector=window.languageSelector;if(languageSelector&&"function"==typeof languageSelector.shouldShow&&languageSelector.shouldShow())return;const detected=function(){const urlLang=(new URL(window.location.href).searchParams.get("lang")||"").toLowerCase();if(urlLang&&Object.prototype.hasOwnProperty.call(SUPPORTED_LANGUAGES,urlLang))return urlLang;const stored=(safeLocalStorage("get","ce_lang")||"").toLowerCase();return stored&&Object.prototype.hasOwnProperty.call(SUPPORTED_LANGUAGES,stored)?stored:"pl"}();setLanguage(Object.prototype.hasOwnProperty.call(SUPPORTED_LANGUAGES,detected)?detected:"pl",{persist:!0,updateUrl:!0})}window.appI18n=appI18n,appI18n.setLanguage=setLanguage,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{setTimeout(init,10)}):setTimeout(init,10)}();